/*
Searchable terms:
[TYPE]          [Search Term]
Themes  ------> Dark theme
                Light theme
                Night theme
                Red Green CB theme
                Dark Night theme
                Orange Soda Theme
                Dracula Theme
Theme colors -> Theme colors
Components  --> .has-text-xxx
                .popper
                .fool
                .tabs
                .button
                .basic-button
                .Label
                .checkbox
                .dropdown
                .b-tooltip
                Trade
                UI Bars
                .meter
                .main
                .fort
                .market-item
                .modalBox
                .industry
                Stars
                -webkit-scrollbar
                .pop-desc
Misc ---------> Main template
                Base CSS
*/

// Named colors
@black: #000;
@white: #fff;

// Named bulma colors
@bulma-success: #48c774;
@bulma-danger: #f14668;
@bulma-info: #167df0;
@bulma-dark: #363636;
@bulma-warning: #ffdd57;
@bulma-link: #4a4a4a;
@bulma-link-active: #B86BFF;
@bulma-link-hover: #363636;
@bulma-label: #363636;
@bulma-checkbox-hover: #363636;

// Library containing all theme colors
#lib {
    .themes() {

        // Dark theme
        .dark() {
            // Theme colors {
            @html-background: #1f2424;
            @primary-border: #ccc;
            @secondary-border: @primary-border;
            @primary-color: @white;
            @secondary-color: #3a4344;

            @link: #1abc9c;
            @link-hover: #f2f2f2;
            @enabled: #00af0f;
            @disabled: #c20000;
            // }

            // .has-text-xxx
            @has-text-advanced: #00ac95;
            @has-text-alert: #af5d00;
            @has-text-caution: #ffa500;
            @has-text-danger: @bulma-danger;
            @has-text-fade: #5e5e5e;
            @has-text-flair: @has-text-special;
            @has-text-label: #ffff9e;
            @has-text-special: #91006c;
            @has-text-info: @bulma-info;
            @has-text-success: @bulma-success;
            @has-text-warning: @bulma-warning;

            // .popper
            @popper: #363636;
            @popper-has-text-label: #1100ff;
            @popper-has-text-success: #1c7e21;
            @popper-has-text-warning: #776425;
            @modal-child-popper-background: #f5f5f5;
            @modal-child-popper-border: @black;

            /* AFP 2021
            // .fool
            @fool-has-text-danger: #23d160;
            @fool-has-text-success: #ff3860;
            @fool-popper-has-text-danger: @popper-has-text-success;
            @fool-span-on: @disabled;
            @fool-span-off: @enabled;
            */

            // .tabs
            @tabs-li-is-active-link-border: @link;
            @tabs-li-is-active-link: @link;

            // .button
            @button-background: #282f2f;
            @button: @primary-color;
            @button-hover-background: @secondary-color;
            @button-hover: @link-hover;
            @button-focus-border: #dbdbdb;

            // .basic-button
            @basic-button-border-hover-background: @secondary-color;
            @basic-button-border-hover: #eee;

            // .label
            @label: #dbdee0;

            // .checkbox
            @checkbox-hover: @link;

            // .dropdown
            @dropdown-content-background: #1f2424;

            // .b-tooltip
            @b-tooltip-accent: @link-hover;
            @b-tooltip-is-primary-background: @b-tooltip-accent;
            @b-tooltip-is-primary-border: #f5f5f5;
            @b-tooltip-is-primary: @black;

            // UI Bars
            @bars-background: @secondary-color;

            // .meter
            @meter-low: #cc0000;
            @meter-neutral: #c0ce00;
            @meter-high: #00af0f;

            // .main
            @div-special-border: #282f2f;
            @div-special-gear-fill: #ad5f12;
            @div-special-hover-border: @secondary-color;
            @div-special-hover-gear-fill: #d4af37;
            @span-on-border: #282f2f;
            @span-on: @enabled;
            @span-on-warn: #af5d00;
            @span-off-border: #282f2f;
            @span-off: @disabled;
            @span-on-off-hover-border: @secondary-color;
            @hl-button-border: @enabled;
            @link-button-background: #181818;
            @special-on-off-border: #181818;
            @oldTech: @primary-color;
            @cnam-aTitle: #975f5f;

            // .fort
            @fort-patrol-check-background: @black ;

            // .market-item
            @market-item-background: #0f1414;
            @market-item-order-hover-background: @secondary-color;
            @market-item-order-hover-border: #eee;

            // .resource
            @resource-overlay-color: darken(@html-background, 15%);
            @resource-overlay-color-alt: darken(@market-item-background, 15%);

            // .modalBox
            @modalBox-background: #282f2f;

            // Stars
            @star-2-fill: @white;
            @star-3-fill: #cd7f32;
            @star-4-fill: #c0c0c0;
            @star-5-fill: #d4af37;

            // -webkit-scrollbar
            @webkit-scrollbar-background: @html-background;
            @webkit-scrollbar-thumb-background: #F5F5F5;
        }

        // Light theme
        .light() {
            // Theme colors {
            @html-background: @white;
            @primary-border: @black;
            @secondary-border: #4e4e4e;
            @primary-color: @black;
            @secondary-color: #3a4344;

            @link: @bulma-link;
            @link-hover: @bulma-link-hover;
            @enabled: #008f0c;
            @disabled: #800000;
            // }

            // .has-text-xxx
            @has-text-advanced: #0098a3;
            @has-text-alert: #743e00;
            @has-text-caution: #966100;
            @has-text-danger: #470303;
            @has-text-fade: #5e5e5e;
            @has-text-flair: @has-text-special;
            @has-text-info: @bulma-info;
            @has-text-label: #1100ff;
            @has-text-special: #91006c;
            @has-text-success: #082412;
            @has-text-warning: #7a6304;

            // .popper
            @popper: #363636;
            @popper-has-text-label: @has-text-label;
            @popper-has-text-success: #1c7e21;
            @popper-has-text-warning: @has-text-warning;
            @modal-child-popper-background: #f5f5f5;
            @modal-child-popper-border: @black;

            /* AFP 2021
            // .fool
            @fool-has-text-danger: @has-text-success;
            @fool-has-text-success: @has-text-danger;
            @fool-popper-has-text-danger: @fool-has-text-danger;
            @fool-span-on: @disabled;
            @fool-span-off: @enabled;
            */

            // .tabs
            @tabs-li-is-active-link-border: @bulma-link-active;
            @tabs-li-is-active-link: @bulma-link-active;

            // .button
            @button-background: @html-background;
            @button: @primary-color;
            @button-hover-background: #ccc;
            @button-hover: @primary-color;
            @button-focus-border: @primary-color;

            // .basic-button
            @basic-button-border-hover-background: #ccc;
            @basic-button-border-hover: #333;

            // .label
            @label: @bulma-label;

            // .checkbox
            @checkbox-hover: @bulma-checkbox-hover;

            // .dropdown
            @dropdown-content-background: @html-background;

            // .b-tooltip
            @b-tooltip-accent: #f2f2f2;
            @b-tooltip-is-primary-background: @b-tooltip-accent;
            @b-tooltip-is-primary-border: #f5f5f5;
            @b-tooltip-is-primary: @black;

            // UI Bars
            @bars-background: #c7c7c7;

            // .meter
            @meter-low: #cc0000;
            @meter-neutral: #c0ce00;
            @meter-high: #00af0f;

            // .main
            @div-special-border: #3a4344;
            @div-special-gear-fill: #3a4344;
            @div-special-hover-border: @primary-border;
            @div-special-hover-gear-fill: #4a5354;
            @span-on-border: @primary-border;
            @span-on: @enabled;
            @span-on-warn: #743e00;
            @span-off-border: @primary-border;
            @span-off: @disabled;
            @span-on-off-hover-border: @primary-border;
            @hl-button-border: @disabled;
            @link-button-background: #ddd;
            @special-on-off-border: @primary-border;
            @oldTech: @primary-color;
            @cnam-aTitle: #900;

            // .fort
            @fort-patrol-check-background: @white ;

            // .market-item
            @market-item-background: #ddd;
            @market-item-order-hover-background: #ccc;
            @market-item-order-hover-border: #333;

            // .resource
            @resource-overlay-color: darken(@html-background, 25%);
            @resource-overlay-color-alt: darken(@market-item-background, 25%);

            // .modalBox
            @modalBox-background: @white;

            // Stars
            @star-2-fill: @black;
            @star-3-fill: #cd7f32;
            @star-4-fill: #c0c0c0;
            @star-5-fill: #d4af37;

            // -webkit-scrollbar
            @webkit-scrollbar-background: #F5F5F5;
            @webkit-scrollbar-thumb-background: @black;
        }

        // Night theme
        .night() {
            // Theme colors {
            @html-background: @black;
            // }

            // .has-text-xxx
            @has-text-flair: #d39753;
            @has-text-special: #e500b4;

            // .popper
            @popper: @white ;
            @popper-has-text-label: #ffff9e;
            @popper-has-text-success: #23d160;
            @popper-has-text-warning: #ffdd57;
            @modal-child-popper-background: #0f0f0f;
            @modal-child-popper-border: #999;

            // .b-tooltip
            @b-tooltip-accent: #999;
            @b-tooltip-is-primary-background: #0f0f0f;
            @b-tooltip-is-primary-border: #999;
            @b-tooltip-is-primary: @white;

            // .market-item
            @market-item-background: #1b1b1b;

            // .resource
            @resource-overlay-color: lighten(@html-background, 10%);
            @resource-overlay-color-alt: darken(@market-item-background, 15%);

            // -webkit-scrollbar
            @webkit-scrollbar-thumb-background: #727272;
        }

        // Red Green CB theme
        .redgreen() {
            // .has-text-xxx
            @has-text-danger: #9900cc;
            @has-text-flair: @has-text-success;
            @has-text-special: #ffff9e;
            @has-text-success: #00ff00;
            @has-text-warning: #ffcc00;

            // .popper
            @tabs-li-is-active-link: #167df0;

            /* AFP 2021
            // .fool
            @fool-has-text-danger: @has-text-success;
            @fool-has-text-success: @has-text-danger;
            @fool-span-on: @has-text-danger;
            @fool-span-off: @has-text-success;
            */

            // .meter
            @meter-low: #167df0;
            @meter-neutral: #00af0f;
            @meter-high: @white;

            // .main
            @span-on: @has-text-success;
            @span-off: @has-text-danger;
        }

        // Dark Night theme
        .darkNight() {
            // Theme colors {
            @primary-color: #b8b8b8;
            // }

            // .popper
            @popper: @primary-color ;

            // .button
            @button: #ccc;

            // .b-tooltip
            @b-tooltip-is-primary: @primary-color;
        }

        // GruvBox Light
        .gruvboxLight() {
            // Theme colors {
            @html-background: #fbf1c7;
            @primary-border: #3c3836;
            @secondary-border: @primary-border;
            @primary-color: #3c3836;
            @secondary-color: #d5c4a1;

            @link: #427b58;
            @link-hover: #689d6a;
            @enabled: #79740e;
            @disabled: #9d0006;
            // }

            // .has-text-xxx
            @has-text-advanced: #458588;
            @has-text-alert: #af5d00;
            @has-text-caution: #af3a03;
            @has-text-danger: @disabled ;
            @has-text-fade: #898B87;
            @has-text-flair: @has-text-special;
            @has-text-info: #076678;
            @has-text-label: #076678;
            @has-text-special: #8f3f71;
            @has-text-success: @enabled ;
            @has-text-warning: #b57614 ;

            // .popper
            @popper: @primary-color ;
            @popper-has-text-label: @has-text-label ;
            @popper-has-text-success: @has-text-success ;
            @popper-has-text-warning: @has-text-warning ;
            @modal-child-popper-background: #fbf1c7;
            @modal-child-popper-border: @secondary-border;

            /* AFP 2021
            // .fool
            @fool-has-text-danger: @has-text-success;
            @fool-has-text-success: @has-text-danger;
            @fool-popper-has-text-danger: @popper-has-text-success;
            @fool-span-on: @disabled;
            @fool-span-off: @enabled;
            */

            // .tabs
            @tabs-li-is-active-link-border: @link;
            @tabs-li-is-active-link: @link;

            // .button
            @button-background: #d5c4a1;
            @button: @primary-color;
            @button-hover-background: @secondary-color;
            @button-hover: @link-hover;
            @button-focus-border: @secondary-border;

            // .basic-button
            @basic-button-border-hover-background: #f2e5bc;
            @basic-button-border-hover: @link;

            // .label
            @label: @primary-color;

            // .checkbox
            @checkbox-hover: @link;

            // .dropdown
            @dropdown-content-background: @button-background;

            // .b-tooltip
            @b-tooltip-accent: #fbf1c7;
            @b-tooltip-is-primary-background: @b-tooltip-accent;
            @b-tooltip-is-primary-border: @primary-border;
            @b-tooltip-is-primary: @black;

            // UI Bars
            @bars-background: @secondary-color;

            // .meter
            @meter-low: @disabled;
            @meter-neutral: @has-text-caution;
            @meter-high: @has-text-info;

            // .main
            @div-special-border: @primary-border;
            @div-special-gear-fill: @link;
            @div-special-hover-border: @secondary-color;
            @div-special-hover-gear-fill: #F09D51;
            @span-on-border: @primary-border;
            @span-on: @enabled;
            @span-on-warn: #af5d00;
            @span-off-border: @primary-border;
            @span-off: @disabled;
            @span-on-off-hover-border: @secondary-color;
            @hl-button-border: @enabled;
            @link-button-background: #a89984;
            @special-on-off-border: @primary-border;
            @oldTech: @primary-color;
            @cnam-aTitle: @disabled;

            // .fort
            @fort-patrol-check-background: @black ;

            // .market-item
            @market-item-background: #f9f5d7;
            @market-item-order-hover-background: @secondary-color;
            @market-item-order-hover-border: @link-hover;

            // .resource
            @resource-overlay-color: darken(@html-background, 15%);
            @resource-overlay-color-alt: darken(@market-item-background, 15%);

            // .modalBox
            @modalBox-background: @html-background;

            // Stars
            @star-2-fill: @white;
            @star-3-fill: #cd7f32;
            @star-4-fill: #c0c0c0;
            @star-5-fill: #d4af37;

            // -webkit-scrollbar
            @webkit-scrollbar-background: @html-background;
            @webkit-scrollbar-thumb-background: @primary-border;
        }

        // GruvBox Dark
        .gruvboxDark() {
            // Theme colors {
            @html-background: #282828;
            @primary-border: #3c3836;
            @secondary-border: #665c54;
            @primary-color: #ebdbb2;
            @secondary-color: #504945;

            @link: #8ec07c;
            @link-hover: #689d6a;
            @enabled: #b8bb26;
            @disabled: #fb4934;
            // }

            // .has-text-xxx
            @has-text-advanced: #458588;
            @has-text-alert: #af5d00;
            @has-text-caution: #fe8019;
            @has-text-danger: @disabled ;
            @has-text-fade: #898B87;
            @has-text-flair: @has-text-special;
            @has-text-info: #83a598;
            @has-text-label: #458588;
            @has-text-special: #d3869b;
            @has-text-success: @enabled ;
            @has-text-warning: #fabd2f ;

            // .popper
            @popper: @primary-color ;
            @popper-has-text-label: @has-text-label ;
            @popper-has-text-success: @has-text-success ;
            @popper-has-text-warning: @has-text-warning ;
            @modal-child-popper-background: #282828;
            @modal-child-popper-border: @secondary-border;

            /* AFP 2021
            // .fool
            @fool-has-text-danger: @has-text-success;
            @fool-has-text-success: @has-text-danger;
            @fool-popper-has-text-danger: @popper-has-text-success;
            @fool-span-on: @disabled;
            @fool-span-off: @enabled;
            */

            // .tabs
            @tabs-li-is-active-link-border: @link;
            @tabs-li-is-active-link: @link;

            // .button
            @button-background: #3c3836;
            @button: @primary-color;
            @button-hover-background: @secondary-color;
            @button-hover: @link-hover;
            @button-focus-border: @secondary-border;

            // .basic-button
            @basic-button-border-hover-background: #1d2021;
            @basic-button-border-hover: @link;

            // .label
            @label: @primary-color;

            // .checkbox
            @checkbox-hover: @link;

            // .dropdown
            @dropdown-content-background: @button-background;

            // .b-tooltip
            @b-tooltip-accent: #282828;
            @b-tooltip-is-primary-background: @b-tooltip-accent;
            @b-tooltip-is-primary-border: @primary-border;
            @b-tooltip-is-primary: @primary-color;

            // UI Bars
            @bars-background: @secondary-color;

            // .meter
            @meter-low: @disabled;
            @meter-neutral: @has-text-caution;
            @meter-high: @has-text-info;

            // .main
            @div-special-border: @primary-border;
            @div-special-gear-fill: #f09d51;
            @div-special-hover-border: @secondary-color;
            @div-special-hover-gear-fill: @link;
            @span-on-border: @primary-border;
            @span-on: @enabled;
            @span-on-warn: #af5d00;
            @span-off-border: @primary-border;
            @span-off: @disabled;
            @span-on-off-hover-border: @secondary-color;
            @hl-button-border: @enabled;
            @link-button-background: #1d2021;
            @special-on-off-border: @primary-border;
            @oldTech: @primary-color;
            @cnam-aTitle: @disabled;

            // .fort
            @fort-patrol-check-background: @black ;

            // .market-item
            @market-item-background: #1d2021;
            @market-item-order-hover-background: @secondary-color;
            @market-item-order-hover-border: @link-hover;

            // .resource
            @resource-overlay-color: darken(@html-background, 15%);
            @resource-overlay-color-alt: darken(@market-item-background, 15%);

            //@html-background: #282828;

            // .modalBox
            @modalBox-background: @html-background;

            // Stars
            @star-2-fill: @primary-border;
            @star-3-fill: #cd7f32;
            @star-4-fill: #c0c0c0;
            @star-5-fill: #d4af37;

            // -webkit-scrollbar
            @webkit-scrollbar-background: @html-background;
            @webkit-scrollbar-thumb-background: @primary-border;
        }

        // GruvBox Dark Red Green CB theme
        .gruvboxDarkRG() {
            // .has-text-xxx
            @has-text-danger: #c409bb;
            @has-text-flair: @has-text-success;
            @has-text-special: #ffff9e;
            @has-text-success: #00ff00;
            @has-text-warning: #ffcc00;
            @has-text-caution: #9ab8ff;
            @has-text-info: #83a598;
            @disabled: #ffe940;

            // .popper
            @tabs-li-is-active-link: #82bdff;

            .switch input[type=checkbox]:checked+.check {
                background: #a28cdf;
            }

            /* AFP 2021
            // .fool
            @fool-has-text-danger: @has-text-success;
            @fool-has-text-success: @has-text-danger;
            @fool-span-on: @has-text-danger;
            @fool-span-off: @has-text-success;
            */

            // .meter
            @meter-low: @disabled;
            @meter-neutral: @has-text-caution;
            @meter-high: @has-text-info;

            // .main
            @span-on: @has-text-success;
            @span-off: @has-text-danger;

            @cnam-aTitle: @disabled;
        }

        // Orange Soda theme
        .orangeSoda() {
            // Theme colors {
            @html-background: #131516;
            @primary-border: #313638;
            @secondary-border: @primary-border;
            @primary-color: #EBDBB2;
            @secondary-color: #313638;

            @link: #F06543;
            @link-hover: #D09376;
            @enabled: #35A7FF;
            @disabled: #C21E83;
            // }

            // .has-text-xxx
            @has-text-advanced: #00ac95;
            @has-text-alert: #af5d00;
            @has-text-caution: #F09D51;
            @has-text-danger: @disabled ;
            @has-text-fade: #898B87;
            @has-text-flair: @has-text-special;
            @has-text-info: @bulma-info;
            @has-text-label: #35A7FF;
            @has-text-special: #91006c;
            @has-text-success: @enabled ;
            @has-text-warning: @link ;

            // .popper
            @popper: @primary-color ;
            @popper-has-text-label: @has-text-label ;
            @popper-has-text-success: @has-text-success ;
            @popper-has-text-warning: @has-text-warning ;
            @modal-child-popper-background: #292929;
            @modal-child-popper-border: @secondary-border;

            /* AFP 2021
            // .fool
            @fool-has-text-danger: @has-text-success;
            @fool-has-text-success: @has-text-danger;
            @fool-popper-has-text-danger: @popper-has-text-success;
            @fool-span-on: @disabled;
            @fool-span-off: @enabled;
            */

            // .tabs
            @tabs-li-is-active-link-border: @link;
            @tabs-li-is-active-link: @link;

            // .button
            @button-background: #1C2021;
            @button: @primary-color;
            @button-hover-background: @secondary-color;
            @button-hover: @link-hover;
            @button-focus-border: @secondary-border;

            // .basic-button
            @basic-button-border-hover-background: #292929;
            @basic-button-border-hover: @link;

            // .label
            @label: @primary-color;

            // .checkbox
            @checkbox-hover: @link;

            // .dropdown
            @dropdown-content-background: @button-background;

            // .b-tooltip
            @b-tooltip-accent: @link-hover;
            @b-tooltip-is-primary-background: @b-tooltip-accent;
            @b-tooltip-is-primary-border: @primary-border;
            @b-tooltip-is-primary: @black;

            // UI Bars
            @bars-background: @secondary-color;

            // .meter
            @meter-low: @disabled;
            @meter-neutral: #38618C;
            @meter-high: #35A7FF;

            // .main
            @div-special-border: @primary-border;
            @div-special-gear-fill: @link;
            @div-special-hover-border: @secondary-color;
            @div-special-hover-gear-fill: #F09D51;
            @span-on-border: @primary-border;
            @span-on: @enabled;
            @span-on-warn: #af5d00;
            @span-off-border: @primary-border;
            @span-off: @disabled;
            @span-on-off-hover-border: @secondary-color;
            @hl-button-border: @enabled;
            @link-button-background: #181818;
            @special-on-off-border: @primary-border;
            @oldTech: @primary-color;
            @cnam-aTitle: @disabled;

            // .fort
            @fort-patrol-check-background: @black ;

            // .market-item
            @market-item-background: #292929;
            @market-item-order-hover-background: @secondary-color;
            @market-item-order-hover-border: @link-hover;

            // .resource
            @resource-overlay-color: darken(@html-background, 13%);
            @resource-overlay-color-alt: darken(@market-item-background, 15%);

            // .modalBox
            @modalBox-background: @html-background;

            // Stars
            @star-2-fill: @white;
            @star-3-fill: #cd7f32;
            @star-4-fill: #c0c0c0;
            @star-5-fill: #d4af37;

            // -webkit-scrollbar
            @webkit-scrollbar-background: @html-background;
            @webkit-scrollbar-thumb-background: @primary-border;
        }

        // Dracula
        .dracula() {
            // Theme colors {
            @html-background: #282a36;
            @primary-border: #44475a;
            @secondary-border: #44475a;
            @primary-color: #f8f8f2;
            @secondary-color: #6272a4;
            @dark-background: #1a1c24;

            @link: #bd93f9;
            @link-hover: #9573c5;
            @enabled: #50fa7b;
            @disabled: #ff5555;
            // }

            // .has-text-xxx
            @has-text-advanced: #8be9fd;
            @has-text-alert: #e0a361;
            @has-text-caution: #ffa26c;
            @has-text-danger: @disabled ;
            @has-text-fade: #6272a4;
            @has-text-flair: @has-text-special;
            @has-text-info: #bd93f9;
            @has-text-label: #7dcbdd;
            @has-text-special: #ff79c6;
            @has-text-success: @enabled ;
            @has-text-warning: #f1fa8c ;

            // .popper
            @popper: @primary-color ;
            @popper-has-text-label: @has-text-label ;
            @popper-has-text-success: @has-text-success ;
            @popper-has-text-warning: @has-text-warning ;
            @modal-child-popper-background: @dark-background;
            @modal-child-popper-border: @secondary-border;

            /* AFP 2021
            // .fool
            @fool-has-text-danger: @has-text-success;
            @fool-has-text-success: @has-text-danger;
            @fool-popper-has-text-danger: @popper-has-text-success;
            @fool-span-on: @disabled;
            @fool-span-off: @enabled;
            */

            // .tabs
            @tabs-li-is-active-link-border: @link;
            @tabs-li-is-active-link: @link;

            // .button
            @button-background: #3f4253;
            @button: @primary-color;
            @button-hover-background: @secondary-border;
            @button-hover: @link-hover;
            @button-focus-border: @secondary-border;

            // .basic-button
            @basic-button-border-hover-background: @dark-background;
            @basic-button-border-hover: @link;

            // .label
            @label: @primary-color;

            // .checkbox
            @checkbox-hover: @link;

            // .dropdown
            @dropdown-content-background: @button-background;

            // .b-tooltip
            @b-tooltip-accent: #282828;
            @b-tooltip-is-primary-background: @b-tooltip-accent;
            @b-tooltip-is-primary-border: @primary-border;
            @b-tooltip-is-primary: @primary-color;

            // UI Bars
            @bars-background: @secondary-color;

            // .meter
            @meter-low: @disabled;
            @meter-neutral: @has-text-caution;
            @meter-high: @has-text-info;

            // .main
            @div-special-border: @primary-border;
            @div-special-gear-fill: #f09d51;
            @div-special-hover-border: @secondary-color;
            @div-special-hover-gear-fill: @link;
            @span-on-border: @primary-border;
            @span-on: @enabled;
            @span-on-warn: #af5d00;
            @span-off-border: @primary-border;
            @span-off: @disabled;
            @span-on-off-hover-border: @secondary-color;
            @hl-button-border: @enabled;
            @link-button-background: @dark-background;
            @special-on-off-border: @primary-border;
            @oldTech: @primary-color;
            @cnam-aTitle: @disabled;

            // .fort
            @fort-patrol-check-background: @black ;

            // .market-item
            @market-item-background: #1d2021;
            @market-item-order-hover-background: @secondary-color;
            @market-item-order-hover-border: @link-hover;

            // .resource
            @resource-overlay-color: darken(@html-background, 15%);
            @resource-overlay-color-alt: darken(@market-item-background, 15%);

            // .modalBox
            @modalBox-background: @html-background;

            // Stars
            @star-2-fill: @white;
            @star-3-fill: #cd7f32;
            @star-4-fill: #c0c0c0;
            @star-5-fill: #d4af37;

            // -webkit-scrollbar
            @webkit-scrollbar-background: @html-background;
            @webkit-scrollbar-thumb-background: @primary-border;
        }
    }

    // Main template
    .mainTemplate() {
        // Basic
        background-color: @html-background;

        body {
            color: @primary-color;
        }

        h2,
        h3 {
            color: @primary-color;
        }

        a {
            color: @link;
        }

        // .has-text-xxx
        .button.has-text-advanced,
        .has-text-advanced {
            color: @has-text-advanced;
        }

        .button.has-text-alert,
        .has-text-alert {
            color: @has-text-alert;
        }

        .button.has-text-caution,
        .has-text-caution {
            color: @has-text-caution;
        }

        .button.has-text-danger,
        .has-text-danger {
            color: @has-text-danger;
        }

        .has-text-fade {
            color: @has-text-fade;
        }

        .has-text-flair {
            color: @has-text-flair;
        }

        .button.has-text-info,
        .has-text-info {
            color: @has-text-info;
        }

        .has-text-label {
            color: @has-text-label;
        }

        .button.has-text-special,
        .has-text-special {
            color: @has-text-special;
        }

        .button.has-text-success,
        .has-text-success {
            color: @has-text-success;
        }

        .button.has-text-warning,
        .has-text-warning {
            color: @has-text-warning;
        }

        .has-text-danger-pulse {
            color: @has-text-warning;
            -webkit-animation: color-change 5s infinite;
            -moz-animation: color-change 5s infinite;
            -o-animation: color-change 5s infinite;
            -ms-animation: color-change 5s infinite;
            animation: color-change 5s infinite;
        }
        
        @keyframes color-change {
            0% {
                color: @has-text-warning;
            }
            50% {
                color: @has-text-danger;
            }
            100% {
                color: @has-text-warning;
            }
        }

        .challenge {
            .simButton {
                border-color: @has-text-success;
            }

            .configList {
                display: flex;
                flex-flow: wrap;
                justify-content: space-around;
                > div {
                    margin: 0 .25rem;
                    width: 10rem;

                    > input {
                        height: 1.25rem;
                        text-align: center;
                        padding: 0;
                    }
                }
            }
        }

        // .popper
        .popper {
            .has-text-label {
                color: @popper-has-text-label;
            }

            .has-text-success {
                color: @popper-has-text-success;
            }

            .has-text-warning {
                color: @popper-has-text-warning;
            }

            .divide-line {
                border-top: @secondary-border solid .0625rem;
            }
        }

.main>div.popper,
body>div.popper,
body .modal>div.popper {
    z-index: 100003;
    background-color: @modal-child-popper-background;
    border: .0625rem solid @modal-child-popper-border;
    color: @popper;

            >div {
                border-top: solid .0625rem @modal-child-popper-border;
            }
            >div:first-child {
                border-top: none;
            }

            .has-text-dark {
                color: @popper;
            }

            .split {
                display: flex;
                > div {
                    flex-wrap: nowrap;
                }
                > div:nth-of-type(2) {
                    border-left: solid .0625rem @modal-child-popper-border;
                    margin-left: .375rem;
                    padding-left: .375rem;
                }
            }
        }

        .shipPopper {
            .divider {
                border-bottom: solid .0625rem @modal-child-popper-border;
            }
        }

        .sliderbar {
            > span {
                position: relative;
                display: inline-block;
                width: 5%;
                bottom: 1.125rem;
                margin: 0 .375rem;
            }
            .b-slider {
                display: inline-block;
                width: 80%;
                .b-slider-track {
                    height: 1rem;
                }
            }
            .is-primary .b-slider-fill {
                background: @has-text-success;
            }
        }

        .sliderbar.thin {
            > span {
                bottom: .625rem;
            }
            .b-slider {
                margin-top: .5rem;
                margin-bottom: .5rem;
            }
        }

        /* AFP 2020
        // .fool
        .fool {
            .has-text-advanced {
                color: @has-text-caution;
            }

            .has-text-caution {
                color: @has-text-advanced;
            }

            .has-text-danger {
                color: @fool-has-text-danger;
            }

            .has-text-success {
                color: @fool-has-text-success;
            }

            .popper {
                .has-text-success {
                    color: @fool-has-text-success;
                }

                .has-text-danger {
                    color: @fool-popper-has-text-danger;
                }
            }

            .main {
                .content {
                    .action {
                        span.on {
                            color: @fool-span-on;
                        }

                        span.off {
                            color: @fool-span-off;
                        }
                    }
                }
            }
        }
        */

        // .tabs
        .tabs a,
        .msgQueueFilters span {
            color: @primary-color;
        }

        .tabs li.is-active a,
        .msgQueueFilters span.is-active {
            border-bottom-color: @tabs-li-is-active-link-border;
            color: @tabs-li-is-active-link;
        }

        .tabs a:hover,
        .msgQueueFilters span:hover {
            border-bottom-color: @link-hover;
            color: @link-hover;
        }

        .tabs > ul {
            border-bottom: solid .0625rem;
        }

        // .button
        .button {
            background-color: @button-background;
            color: @button;
        }

        .button.is-light {
            background-color: @primary-color;
        }

        .button.is-hovered,
        .button:hover {
            background-color: @button-hover-background;
            color: @link-hover;
        }

        .button.is-focused,
        .button:focus {
            border-color: @button-focus-border;
        }

        // .basic-button
        .basic-button {
            border: @primary-border solid .0625rem;
        }

        .basic-button:hover {
            border: @basic-button-border-hover solid .0625rem;
            background-color: @basic-button-border-hover-background;
        }
        
        .text-button:hover {
            cursor: pointer;
            color: @link-hover;
            text-decoration: underline;
        }

        // .label
        .label {
            color: @label;
        }

        // .checkbox, .radio
        .checkbox:hover,
        .radio:hover {
            color: @checkbox-hover;
        }

        // .dropdown
        .dropdown-content {
            background-color: @dropdown-content-background;
        }

        // .b-tooltip
        .b-tooltip.is-right:before {
            border-right: 5px solid @b-tooltip-accent;
        }

        .b-tooltip.is-left:before {
            border-left: 5px solid @b-tooltip-accent;
        }

        .b-tooltip.is-bottom:before {
            border-bottom: 5px solid @b-tooltip-accent;
        }

        .b-tooltip.is-primary .tooltip-content {
            background: @b-tooltip-is-primary-background;
            border: .0625rem solid @b-tooltip-is-primary-border;
            color: @b-tooltip-is-primary;
        }

        // Trade
        .add,
        .sub {
            border: @primary-border solid .0625rem;
            transition: all 200ms ease;
        }

        .add:hover,
        .sub:hover {
            background-color: @button-hover-background;
            color: @link-hover;
        }

        .current {
            border-top: @primary-border solid .0625rem;
            border-bottom: @primary-border solid .0625rem;
        }
        .current.infoOnly {
            border: @primary-border solid .0625rem;
        }

        // UI Bars
        .topBar,
        .promoBar {
            background-color: @bars-background;
        }
        
        // Play/Pause
        .play {
            display: inline-block;
            position: relative;
            cursor: pointer;
            bottom: .125rem;
            width: 0;
            height: 0;
            border-top: .25rem solid transparent;
            border-left: .375rem solid @has-text-success;
            border-bottom: .25rem solid transparent;
            transition: all 0.3s;
            -webkit-transition: all 0.3s;
            -moz-transition: all 0.3s;
        }
        .pause {
            display: inline-block;
            position: relative;
            cursor: pointer;
            box-sizing: content-box;
            bottom: .0625rem;
            width: .125rem;;
            height: .625rem;;
            border-right: .125rem solid @has-text-danger;
            border-left: .125rem solid @has-text-danger;
            transition: all 0.3s;
            -webkit-transition: all 0.3s;
            -moz-transition: all 0.3s;
        }

        // .meter
        .meter {
            &.low {
                color: @meter-low;
            }

            &.neutral {
                color: @meter-neutral;
            }

            &.high {
                color: @meter-high;
            }
        }

        // .buildList
        .buildList {
            .hl-ca {
                color: @enabled ;
            }

            .hl-cna {
                color: @disabled ;
            }
        }

        // .msgQueue
        // .graphContainer
        .msgQueue,
        .graphContainer {
            span.special {
                .gear {
                    fill: @div-special-gear-fill;
                }
            }

            span.special:hover {
                .gear {
                    fill: @div-special-hover-gear-fill;
                }
            }
        }

        // .main
        .main {
            .content {
                .action {
                    a.button {
                        &.hl-ca .aTitle {
                            color: @enabled;
                        }

                        &.hl-cna .aTitle {
                            color: @disabled;
                        }

                        span.count {
                            background: @html-background;
                        }
                    }

                    div.special {
                        background: @html-background;
                        border: .0625rem solid @div-special-border;

                        .gear {
                            fill: @div-special-gear-fill;
                        }
                    }

                    div.special:hover {
                        border: .0625rem solid @div-special-hover-border;

                        .gear {
                            fill: @div-special-hover-gear-fill;
                        }
                    }

                    span.on {
                        background: @html-background;
                        border: .0625rem solid @span-on-border;
                        color: @span-on;
                    }

                    span.on.warn,
                    span.on.altwarn {
                        color: @span-on-warn;
                    }

                    span.off {
                        background: @html-background;
                        border: .0625rem solid @span-off-border;
                        color: @span-off;
                    }

                    span.on:hover,
                    span.off:hover {
                        border: .0625rem solid @span-on-off-hover-border;
                    }

                    &.hl .button {
                        border: solid 1px @hl-button-border;
                    }
                }

                .action.cna {
                    a.button {
                        background-color: @link-button-background;

                        &.hl-ca .aTitle {
                            color: @enabled;
                        }

                        &.hl-cna .aTitle {
                            color: @disabled;
                        }
                    }

                    .special,
                    .on,
                    .off {
                        border-color: @special-on-off-border;
                    }

                    .oldTech span.aTitle {
                        color: @oldTech;
                    }
                }

                .action.cnam {
                    span.aTitle {
                        color: @cnam-aTitle;
                    }
                }

                .action {
                    a.button.rna-action,
                    a.button.dna-action,
                    a.button.membrane-action,
                    a.button.organelles-action,
                    a.button.nucleus-action,
                    a.button.eukaryotic-cell-action,
                    a.button.mitochondria-action,
                    a.button.sexual-reproduction-action,
                    a.button.phagocytosis-action,
                    a.button.chloroplasts-action,
                    a.button.chitin-action,
                    a.button.multicellular-action,
                    a.button.spores-action,
                    a.button.poikilohydric-action,
                    a.button.club-action,
                    a.button.bone-tools-action,
                    a.button.bryophyte-action,
                    a.button.sentience-action,
                    a.button.bilateral-symmetry-action,
                    a.button.arthropods-action,
                    a.button.mammals-action,
                    a.button.humanoid-action,
                    a.button.gigantism-action,
                    a.button.dwarfism-action,
                    a.button.animalism-action,
                    a.button.carnivore-action,
                    a.button.herbivore-action,
                    a.button.endothermic-action,
                    a.button.ectothermic-action,
                    a.button.eggshell-action,
                    a.button.sundial-action,
                    a.button.currency-action,
                    a.button.primitive-axes-action,
                    a.button.sap-hardening-action,
                    a.button.irrigation-action,
                    a.button.scientific-method-action,
                    a.button.gather-amber-action,
                    a.button.pinguicula-food-action,
                    a.button.pinguicula-lumber-action,
                    a.button.grove-action,
                    a.button.farm-action,
                    a.button.agriculture-action,
                    a.button.housing-action,
                    a.button.aphrodisiac-action,
                    a.button.banking-action,
                    a.button.farm-houses-action,
                    a.button.leather-armor-action,
                    a.button.bows-action,
                    a.button.government-action,
                    a.button.mercenaries-action,
                    a.button.metal-working-action,
                    a.button.cement-action,
                    a.button.investing-action,
                    a.button.grain-silo-action,
                    a.button.grain-mill-action,
                    a.button.freight-yard-action,
                    a.button.smelting-action,
                    a.button.coal-mining-action,
                    a.button.reinforced-sheds-action,
                    a.button.iron-axe-action,
                    a.button.iron-pickaxe-action,
                    a.button.iron-hoes-action,
                    a.button.rebar-action,
                    a.button.research-grant-action,
                    a.button.sawmills-action,
                    a.button.tax-rates-action,
                    a.button.plate-armor-action,
                    a.button.cottage-action,
                    a.button.amphitheatre-action,
                    a.button.library-action,
                    a.button.bronze-axe-action,
                    a.button.foundry-action,
                    a.button.artisans-action,
                    a.button.bronze-pickaxe-action,
                    a.button.bronze-hoes-action,
                    a.button.dewey-decimal-system-action,
                    a.button.theatre-action,
                    a.button.playwright-action,
                    a.button.thesis-papers-action,
                    a.button.urban-planning-action,
                    a.button.apprentices-action,
                    a.button.trade-routes-action,
                    a.button.spies-action,
                    a.button.marketplace-action,
                    a.button.iron-mining-action,
                    a.button.containerization-action,
                    a.button.bank-vault-action,
                    a.button.savings-bonds-action,
                    a.button.cement-plant-action,
                    a.button.mine-action,
                    a.button.garrison-action,
                    a.button.warehouse-action,
                    a.button.basic-storage-action,
                    a.button.shed-action,
                    a.button.bank-action,
                    a.button.lumber-yard-action,
                    a.button.university-action,
                    #tech-club a.button,
                    #tech-bone_tools a.button,
                    #tech-sundial a.button {
                        background: transparent no-repeat center;
                        background-size: cover;
                        background-position: center;
                        border: 2px solid #2ecc71;
                        box-shadow: 0 0 0 2px rgba(46, 204, 113, 0.35);
                        border-radius: 9999px;
                        min-height: 4.5rem;
                        min-width: 6rem;
                        padding: 0.1rem;
                        transform-origin: center;
                        transition: transform 0.08s ease, filter 0.08s ease;
                    }

                    a.button.rna-action {
                        background-image: url(/photo/RNA.webp);
                    }

                    a.button.dna-action {
                        background-image: url(/photo/DNA.webp);
                    }

                    a.button.membrane-action {
                        background-image: url(/photo/membrane.webp);
                    }

                    a.button.organelles-action {
                        background-image: url(/photo/organelles.webp);
                    }

                    a.button.nucleus-action {
                        background-image: url(/photo/nucleus.webp);
                    }

                    a.button.eukaryotic-cell-action {
                        background-image: url(/photo/eukaryotic-cell.webp);
                    }

                    a.button.mitochondria-action {
                        background-image: url(/photo/mitochondria.webp);
                    }

                    a.button.sexual-reproduction-action {
                        background-image: url(/photo/sexual-reproduction/sexual-reproduction.webp);
                    }

                    a.button.phagocytosis-action {
                        background-image: url(/photo/sexual-reproduction/phagocytosis.webp);
                    }

                    a.button.chloroplasts-action {
                        background-image: url(/photo/sexual-reproduction/chloroplasts.webp);
                    }

                    a.button.chitin-action {
                        background-image: url(/photo/sexual-reproduction/chitin.webp);
                    }

                    a.button.multicellular-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/multicellular.webp);
                    }

                    a.button.spores-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/spores/spores.webp);
                    }

                    a.button.poikilohydric-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/Poikilohydric.webp);
                    }

                    a.button.club-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/club.webp);
                    }

                    #tech-club a.button {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/club.webp);
                    }

                    a.button.bone-tools-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/bone-tools.webp);
                    }

                    #tech-bone_tools a.button {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/bone-tools.webp);
                    }

                    a.button.bryophyte-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/spores/bryophyte/bryophyte.webp);
                    }

                    a.button.sentience-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/spores/bryophyte/sentience.webp);
                    }

                    a.button.bilateral-symmetry-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/bilateral-symmetry/bilateral-symmetry.webp);
                    }

                    a.button.arthropods-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/bilateral-symmetry/arthropods/arthropods.webp);
                    }

                    a.button.mammals-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/bilateral-symmetry/mammals/mammals.webp);
                    }

                    a.button.humanoid-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/bilateral-symmetry/mammals/mammals/humanoids.webp);
                    }

                    a.button.gigantism-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/bilateral-symmetry/mammals/mammals/gigantism.webp);
                    }

                    a.button.dwarfism-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/bilateral-symmetry/mammals/mammals/dwarfism.webp);
                    }

                    a.button.animalism-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/bilateral-symmetry/mammals/mammals/beast.webp);
                    }

                    a.button.carnivore-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/bilateral-symmetry/mammals/mammals/beast/carnivore.webp);
                    }

                    a.button.herbivore-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/bilateral-symmetry/mammals/mammals/beast/herbivore.webp);
                    }

                    a.button.eggshell-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/bilateral-symmetry/eggshell/eggshell.webp);
                    }

                    a.button.endothermic-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/bilateral-symmetry/eggshell/eggshell/endothermic.webp);
                    }

                    a.button.ectothermic-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/bilateral-symmetry/eggshell/eggshell/ectothermic.webp);
                    }

                    a.button.sundial-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/sundial.webp);
                    }

                    a.button.currency-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/currency.webp);
                    }

                    a.button.primitive-axes-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/primitive-axes.webp);
                    }

                    a.button.sap-hardening-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/sap-hardening.webp);
                    }

                    a.button.irrigation-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/lrrigation.webp);
                    }

                    a.button.scientific-method-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/scientific-method.webp);
                    }

                    #tech-sundial a.button {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/sundial.webp);
                    }

                    a.button.gather-amber-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/gather-lumber/gather-amber.webp);
                    }

                    a.button.pinguicula-food-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/gather-lumber/gather-food.webp);
                    }

                    a.button.pinguicula-lumber-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/gather-lumber/gather-lumber.webp);
                    }

                    a.button.grove-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/residential-block/grove.webp);
                    }

                    a.button.farm-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/residential-block/farm.webp);
                    }

                    a.button.agriculture-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/agriculture.webp);
                    }

                    a.button.housing-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/housing.webp);
                    }

                    a.button.aphrodisiac-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/aphrodisiac.webp);
                    }

                    a.button.banking-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/banking.webp);
                    }

                    a.button.farm-houses-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/farm-houses.webp);
                    }

                    a.button.leather-armor-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/leather-armor.webp);
                    }

                    a.button.bows-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/bows.webp);
                    }

                    a.button.government-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/government.webp);
                    }

                    a.button.mercenaries-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/mercenaries.webp);
                    }

                    a.button.metal-working-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/metal-working.webp);
                    }

                    a.button.cement-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/cement.webp);
                    }

                    a.button.investing-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/investing.webp);
                    }

                    a.button.grain-silo-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/trade-district/grain-silo.webp);
                    }

                    a.button.grain-mill-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/grain-mill.webp);
                    }

                    a.button.freight-yard-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/trade-district/freight-yard.webp);
                    }

                    a.button.smelting-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/smelting.webp);
                    }

                    a.button.coal-mining-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/coal-mining.webp);
                    }

                    a.button.reinforced-sheds-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/reinforced-sheds.webp);
                    }

                    a.button.iron-axe-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/iron-axe.webp);
                    }

                    a.button.iron-pickaxe-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/iron-pickaxe.webp);
                    }

                    a.button.iron-hoes-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/iron-hoes.webp);
                    }

                    a.button.rebar-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/rebar.webp);
                    }

                    a.button.research-grant-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/research-grant.webp);
                    }

                    a.button.sawmills-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/sawmills.webp);
                    }

                    a.button.tax-rates-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/tax-rates.webp);
                    }

                    a.button.plate-armor-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/plate-armor.webp);
                    }

                    a.button.cottage-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/residential-block/cottage.webp);
                    }

                    a.button.amphitheatre-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/commercial-district/amphitheatre.webp);
                    }

                    a.button.library-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/secience-sector/library.webp);
                    }

                    a.button.bronze-axe-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/bronze-axe.webp);
                    }

                    a.button.foundry-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/industrial-park/fondry.webp);
                    }

                    a.button.artisans-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/artisans.webp);
                    }

                    a.button.bronze-pickaxe-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/bronze-pickaxe.webp);
                    }

                    a.button.bronze-hoes-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/bronze-hoes.webp);
                    }

                    a.button.dewey-decimal-system-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/dewey-decimal-system.webp);
                    }

                    a.button.theatre-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/theatre.webp);
                    }

                    a.button.playwright-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/playwright.webp);
                    }

                    a.button.thesis-papers-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/thesis-papers.webp);
                    }

                    a.button.urban-planning-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/urban-planning.webp);
                    }

                    a.button.apprentices-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/apprentices.webp);
                    }

                    a.button.trade-routes-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/trade-routes.webp);
                    }

                    a.button.spies-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/spies.webp);
                    }

                    a.button.marketplace-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/marketplace.webp);
                    }

                    a.button.iron-mining-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/iron-mining.webp);
                    }

                    a.button.containerization-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/containerization.webp);
                    }

                    a.button.bank-vault-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/bank-vault.webp);
                    }

                    a.button.savings-bonds-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/savings-bonds.webp);
                    }

                    a.button.cement-plant-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/industrial-park/cement-plant.webp);
                    }

                    a.button.mine-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/industrial-park/mine.webp);
                    }

                    a.button.garrison-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/garrison.webp);
                    }

                    a.button.warehouse-action {
                        background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22currentColor%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20class%3D%22lucide%20lucide-warehouse-icon%20lucide-warehouse%22%20color%3D%22%23f8f8f8%22%3E%3Cpath%20d%3D%22M18%2021V10a1%201%200%200%200-1-1H7a1%201%200%200%200-1%201v11%22/%3E%3Cpath%20d%3D%22M22%2019a2%202%200%200%201-2%202H4a2%202%200%200%201-2-2V8a2%202%200%200%201%201.132-1.803l7.95-3.974a2%202%200%200%201%201.837%200l7.948%203.974A2%202%200%200%201%2022%208z%22/%3E%3Cpath%20d%3D%22M6%2013h12%22/%3E%3Cpath%20d%3D%22M6%2017h12%22/%3E%3C/svg%3E");
                    }

                    a.button.basic-storage-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/basic-storage.webp);
                    }

                    a.button.shed-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/trade-district/shed.webp);
                    }

                    a.button.bank-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/commercial-district/bank.webp);
                    }

                    a.button.lumber-yard-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/industrial-park/lumber-yard.webp);
                    }

                    a.button.university-action {
                        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/secience-sector/university.webp);
                    }

                    a.button.rna-action .aTitle,
                    a.button.dna-action .aTitle,
                    a.button.membrane-action .aTitle,
                    a.button.organelles-action .aTitle,
                    a.button.nucleus-action .aTitle,
                    a.button.eukaryotic-cell-action .aTitle,
                    a.button.mitochondria-action .aTitle,
                    a.button.sexual-reproduction-action .aTitle,
                    a.button.phagocytosis-action .aTitle,
                    a.button.chloroplasts-action .aTitle,
                    a.button.chitin-action .aTitle,
                    a.button.multicellular-action .aTitle,
                    a.button.spores-action .aTitle,
                    a.button.poikilohydric-action .aTitle,
                    a.button.club-action .aTitle,
                    a.button.bone-tools-action .aTitle,
                    a.button.bryophyte-action .aTitle,
                    a.button.sentience-action .aTitle,
                    a.button.bilateral-symmetry-action .aTitle,
                    a.button.arthropods-action .aTitle,
                    a.button.mammals-action .aTitle,
                    a.button.humanoid-action .aTitle,
                    a.button.gigantism-action .aTitle,
                    a.button.dwarfism-action .aTitle,
                    a.button.animalism-action .aTitle,
                    a.button.eggshell-action .aTitle,
                    a.button.sundial-action .aTitle,
                    a.button.currency-action .aTitle,
                    a.button.primitive-axes-action .aTitle,
                    a.button.sap-hardening-action .aTitle,
                    a.button.irrigation-action .aTitle,
                    a.button.scientific-method-action .aTitle,
                    a.button.gather-amber-action .aTitle,
                    a.button.pinguicula-food-action .aTitle,
                    a.button.pinguicula-lumber-action .aTitle,
                    a.button.grove-action .aTitle,
                    a.button.farm-action .aTitle,
                    a.button.agriculture-action .aTitle,
                    a.button.housing-action .aTitle,
                    a.button.aphrodisiac-action .aTitle,
                    a.button.banking-action .aTitle,
                    a.button.farm-houses-action .aTitle,
                    a.button.leather-armor-action .aTitle,
                    a.button.bows-action .aTitle,
                    a.button.government-action .aTitle,
                    a.button.mercenaries-action .aTitle,
                    a.button.metal-working-action .aTitle,
                    a.button.cement-action .aTitle,
                    a.button.investing-action .aTitle,
                    a.button.grain-silo-action .aTitle,
                    a.button.grain-mill-action .aTitle,
                    a.button.freight-yard-action .aTitle,
                    a.button.smelting-action .aTitle,
                    a.button.coal-mining-action .aTitle,
                    a.button.reinforced-sheds-action .aTitle,
                    a.button.iron-axe-action .aTitle,
                    a.button.iron-pickaxe-action .aTitle,
                    a.button.iron-hoes-action .aTitle,
                    a.button.rebar-action .aTitle,
                    a.button.research-grant-action .aTitle,
                    a.button.sawmills-action .aTitle,
                    a.button.tax-rates-action .aTitle,
                    a.button.plate-armor-action .aTitle,
                    a.button.cottage-action .aTitle,
                    a.button.amphitheatre-action .aTitle,
                    a.button.library-action .aTitle,
                    a.button.bronze-axe-action .aTitle,
                    a.button.foundry-action .aTitle,
                    a.button.artisans-action .aTitle,
                    a.button.bronze-pickaxe-action .aTitle,
                    a.button.bronze-hoes-action .aTitle,
                    a.button.dewey-decimal-system-action .aTitle,
                    a.button.theatre-action .aTitle,
                    a.button.playwright-action .aTitle,
                    a.button.thesis-papers-action .aTitle,
                    a.button.urban-planning-action .aTitle,
                    a.button.apprentices-action .aTitle,
                    a.button.trade-routes-action .aTitle,
                    a.button.spies-action .aTitle,
                    a.button.marketplace-action .aTitle,
                    a.button.iron-mining-action .aTitle,
                    a.button.containerization-action .aTitle,
                    a.button.bank-vault-action .aTitle,
                    a.button.savings-bonds-action .aTitle,
                    a.button.cement-plant-action .aTitle,
                    a.button.mine-action .aTitle,
                    a.button.garrison-action .aTitle,
                    a.button.warehouse-action .aTitle,
                    a.button.basic-storage-action .aTitle,
                    a.button.shed-action .aTitle,
                    a.button.bank-action .aTitle,
                    a.button.lumber-yard-action .aTitle,
                    a.button.university-action .aTitle,
                    #tech-club a.button .aTitle,
                    #tech-bone_tools a.button .aTitle,
                    #tech-sundial a.button .aTitle {
                        color: transparent;
                        text-shadow: none;
                    }

                    &.is-unlocking a.button {
                        position: relative;
                        background-image: none;
                        overflow: hidden;
                    }

                    &.is-unlocking a.button::before {
                        content: "";
                        position: absolute;
                        inset: 0;
                        background: rgba(0, 0, 0, 0.55);
                        border-radius: inherit;
                        z-index: 0;
                    }

                    &.is-unlocking a.button::after {
                        content: attr(data-unlocking-label);
                        position: absolute;
                        inset: 0;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-weight: 700;
                        font-size: 0.85rem;
                        letter-spacing: 0.08em;
                        text-transform: uppercase;
                        color: @primary-color;
                        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7);
                        z-index: 2;
                        pointer-events: none;
                    }

                    &.is-unlocking a.button .unlock-progress {
                        position: absolute;
                        left: 12%;
                        right: 12%;
                        bottom: 18%;
                        height: 0.32rem;
                        border-radius: 999px;
                        overflow: hidden;
                        background-color: rgba(0, 0, 0, 0.4);
                        box-shadow: inset 0 0 0 1px rgba(155, 231, 165, 0.95);
                        z-index: 1;
                    }

                    &.is-unlocking a.button .unlock-progress-bar {
                        position: absolute;
                        top: 0;
                        bottom: 0;
                        left: 0;
                        width: 0%;
                        border-radius: inherit;
                        background-color: #2ecc71;
                        transition: width 0.3s linear;
                    }

                    &.is-unlocking a.button .unlock-progress.is-animated .unlock-progress-bar {
                        animation: unlock-progress-fill 1s linear forwards;
                        transition: none;
                    }

                    a.button.rna-action:hover .aTitle,
                    a.button.dna-action:hover .aTitle,
                    a.button.membrane-action:hover .aTitle,
                    a.button.organelles-action:hover .aTitle,
                    a.button.nucleus-action:hover .aTitle,
                    a.button.eukaryotic-cell-action:hover .aTitle,
                    a.button.mitochondria-action:hover .aTitle,
                    a.button.sexual-reproduction-action:hover .aTitle,
                    a.button.phagocytosis-action:hover .aTitle,
                    a.button.chloroplasts-action:hover .aTitle,
                    a.button.chitin-action:hover .aTitle,
                    a.button.multicellular-action:hover .aTitle,
                    a.button.spores-action:hover .aTitle,
                    a.button.poikilohydric-action:hover .aTitle,
                    a.button.club-action:hover .aTitle,
                    a.button.bone-tools-action:hover .aTitle,
                    a.button.bryophyte-action:hover .aTitle,
                    a.button.sentience-action:hover .aTitle,
                    a.button.bilateral-symmetry-action:hover .aTitle,
                    a.button.arthropods-action:hover .aTitle,
                    a.button.mammals-action:hover .aTitle,
                    a.button.humanoid-action:hover .aTitle,
                    a.button.gigantism-action:hover .aTitle,
                    a.button.dwarfism-action:hover .aTitle,
                    a.button.animalism-action:hover .aTitle,
                    a.button.eggshell-action:hover .aTitle,
                    a.button.sundial-action:hover .aTitle,
                    a.button.currency-action:hover .aTitle,
                    a.button.primitive-axes-action:hover .aTitle,
                    a.button.sap-hardening-action:hover .aTitle,
                    a.button.irrigation-action:hover .aTitle,
                    a.button.scientific-method-action:hover .aTitle,
                    a.button.gather-amber-action:hover .aTitle,
                    a.button.pinguicula-food-action:hover .aTitle,
                    a.button.pinguicula-lumber-action:hover .aTitle,
                    a.button.grove-action:hover .aTitle,
                    a.button.farm-action:hover .aTitle,
                    a.button.agriculture-action:hover .aTitle,
                    a.button.housing-action:hover .aTitle,
                    a.button.aphrodisiac-action:hover .aTitle,
                    a.button.banking-action:hover .aTitle,
                    a.button.farm-houses-action:hover .aTitle,
                    a.button.leather-armor-action:hover .aTitle,
                    a.button.bows-action:hover .aTitle,
                    a.button.government-action:hover .aTitle,
                    a.button.mercenaries-action:hover .aTitle,
                    a.button.metal-working-action:hover .aTitle,
                    a.button.cement-action:hover .aTitle,
                    a.button.investing-action:hover .aTitle,
                    a.button.grain-silo-action:hover .aTitle,
                    a.button.grain-mill-action:hover .aTitle,
                    a.button.freight-yard-action:hover .aTitle,
                    a.button.smelting-action:hover .aTitle,
                    a.button.coal-mining-action:hover .aTitle,
                    a.button.reinforced-sheds-action:hover .aTitle,
                    a.button.iron-axe-action:hover .aTitle,
                    a.button.iron-pickaxe-action:hover .aTitle,
                    a.button.iron-hoes-action:hover .aTitle,
                    a.button.rebar-action:hover .aTitle,
                    a.button.research-grant-action:hover .aTitle,
                    a.button.sawmills-action:hover .aTitle,
                    a.button.tax-rates-action:hover .aTitle,
                    a.button.plate-armor-action:hover .aTitle,
                    a.button.cottage-action:hover .aTitle,
                    a.button.amphitheatre-action:hover .aTitle,
                    a.button.library-action:hover .aTitle,
                    a.button.bronze-axe-action:hover .aTitle,
                    a.button.foundry-action:hover .aTitle,
                    a.button.artisans-action:hover .aTitle,
                    a.button.bronze-pickaxe-action:hover .aTitle,
                    a.button.bronze-hoes-action:hover .aTitle,
                    a.button.dewey-decimal-system-action:hover .aTitle,
                    a.button.theatre-action:hover .aTitle,
                    a.button.playwright-action:hover .aTitle,
                    a.button.thesis-papers-action:hover .aTitle,
                    a.button.urban-planning-action:hover .aTitle,
                    a.button.apprentices-action:hover .aTitle,
                    a.button.trade-routes-action:hover .aTitle,
                    a.button.spies-action:hover .aTitle,
                    a.button.marketplace-action:hover .aTitle,
                    a.button.iron-mining-action:hover .aTitle,
                    a.button.containerization-action:hover .aTitle,
                    a.button.bank-vault-action:hover .aTitle,
                    a.button.savings-bonds-action:hover .aTitle,
                    a.button.cement-plant-action:hover .aTitle,
                    a.button.mine-action:hover .aTitle,
                    a.button.garrison-action:hover .aTitle,
                    a.button.warehouse-action:hover .aTitle,
                    a.button.basic-storage-action:hover .aTitle,
                    a.button.shed-action:hover .aTitle,
                    a.button.bank-action:hover .aTitle,
                    a.button.lumber-yard-action:hover .aTitle,
                    a.button.university-action:hover .aTitle,
                    #tech-club a.button:hover .aTitle,
                    #tech-bone_tools a.button:hover .aTitle,
                    #tech-sundial a.button:hover .aTitle,
                    a.button.rna-action:focus-visible .aTitle,
                    a.button.dna-action:focus-visible .aTitle,
                    a.button.membrane-action:focus-visible .aTitle,
                    a.button.organelles-action:focus-visible .aTitle,
                    a.button.nucleus-action:focus-visible .aTitle,
                    a.button.eukaryotic-cell-action:focus-visible .aTitle,
                    a.button.mitochondria-action:focus-visible .aTitle,
                    a.button.sexual-reproduction-action:focus-visible .aTitle,
                    a.button.phagocytosis-action:focus-visible .aTitle,
                    a.button.chloroplasts-action:focus-visible .aTitle,
                    a.button.chitin-action:focus-visible .aTitle,
                    a.button.multicellular-action:focus-visible .aTitle,
                    a.button.spores-action:focus-visible .aTitle,
                    a.button.poikilohydric-action:focus-visible .aTitle,
                    a.button.club-action:focus-visible .aTitle,
                    a.button.bone-tools-action:focus-visible .aTitle,
                    a.button.bryophyte-action:focus-visible .aTitle,
                    a.button.sentience-action:focus-visible .aTitle,
                    a.button.bilateral-symmetry-action:focus-visible .aTitle,
                    a.button.arthropods-action:focus-visible .aTitle,
                    a.button.mammals-action:focus-visible .aTitle,
                    a.button.humanoid-action:focus-visible .aTitle,
                    a.button.gigantism-action:focus-visible .aTitle,
                    a.button.dwarfism-action:focus-visible .aTitle,
                    a.button.animalism-action:focus-visible .aTitle,
                    a.button.eggshell-action:focus-visible .aTitle,
                    a.button.sundial-action:focus-visible .aTitle,
                    a.button.currency-action:focus-visible .aTitle,
                    a.button.primitive-axes-action:focus-visible .aTitle,
                    a.button.sap-hardening-action:focus-visible .aTitle,
                    a.button.irrigation-action:focus-visible .aTitle,
                    a.button.scientific-method-action:focus-visible .aTitle,
                    a.button.gather-amber-action:focus-visible .aTitle,
                    a.button.pinguicula-food-action:focus-visible .aTitle,
                    a.button.pinguicula-lumber-action:focus-visible .aTitle,
                    a.button.grove-action:focus-visible .aTitle,
                    a.button.farm-action:focus-visible .aTitle,
                    a.button.agriculture-action:focus-visible .aTitle,
                    a.button.housing-action:focus-visible .aTitle,
                    a.button.aphrodisiac-action:focus-visible .aTitle,
                    a.button.banking-action:focus-visible .aTitle,
                    a.button.farm-houses-action:focus-visible .aTitle,
                    a.button.leather-armor-action:focus-visible .aTitle,
                    a.button.bows-action:focus-visible .aTitle,
                    a.button.government-action:focus-visible .aTitle,
                    a.button.mercenaries-action:focus-visible .aTitle,
                    a.button.metal-working-action:focus-visible .aTitle,
                    a.button.cement-action:focus-visible .aTitle,
                    a.button.investing-action:focus-visible .aTitle,
                    a.button.grain-silo-action:focus-visible .aTitle,
                    a.button.grain-mill-action:focus-visible .aTitle,
                    a.button.freight-yard-action:focus-visible .aTitle,
                    a.button.smelting-action:focus-visible .aTitle,
                    a.button.coal-mining-action:focus-visible .aTitle,
                    a.button.reinforced-sheds-action:focus-visible .aTitle,
                    a.button.iron-axe-action:focus-visible .aTitle,
                    a.button.iron-pickaxe-action:focus-visible .aTitle,
                    a.button.iron-hoes-action:focus-visible .aTitle,
                    a.button.rebar-action:focus-visible .aTitle,
                    a.button.research-grant-action:focus-visible .aTitle,
                    a.button.sawmills-action:focus-visible .aTitle,
                    a.button.tax-rates-action:focus-visible .aTitle,
                    a.button.plate-armor-action:focus-visible .aTitle,
                    a.button.cottage-action:focus-visible .aTitle,
                    a.button.amphitheatre-action:focus-visible .aTitle,
                    a.button.library-action:focus-visible .aTitle,
                    a.button.bronze-axe-action:focus-visible .aTitle,
                    a.button.foundry-action:focus-visible .aTitle,
                    a.button.artisans-action:focus-visible .aTitle,
                    a.button.bronze-pickaxe-action:focus-visible .aTitle,
                    a.button.bronze-hoes-action:focus-visible .aTitle,
                    a.button.dewey-decimal-system-action:focus-visible .aTitle,
                    a.button.theatre-action:focus-visible .aTitle,
                    a.button.playwright-action:focus-visible .aTitle,
                    a.button.thesis-papers-action:focus-visible .aTitle,
                    a.button.urban-planning-action:focus-visible .aTitle,
                    a.button.apprentices-action:focus-visible .aTitle,
                    a.button.trade-routes-action:focus-visible .aTitle,
                    a.button.spies-action:focus-visible .aTitle,
                    a.button.marketplace-action:focus-visible .aTitle,
                    a.button.iron-mining-action:focus-visible .aTitle,
                    a.button.containerization-action:focus-visible .aTitle,
                    a.button.bank-vault-action:focus-visible .aTitle,
                    a.button.savings-bonds-action:focus-visible .aTitle,
                    a.button.cement-plant-action:focus-visible .aTitle,
                    a.button.mine-action:focus-visible .aTitle,
                    a.button.garrison-action:focus-visible .aTitle,
                    a.button.warehouse-action:focus-visible .aTitle,
                    a.button.basic-storage-action:focus-visible .aTitle,
                    a.button.shed-action:focus-visible .aTitle,
                    a.button.bank-action:focus-visible .aTitle,
                    a.button.lumber-yard-action:focus-visible .aTitle,
                    a.button.university-action:focus-visible .aTitle,
                    #tech-club a.button:focus-visible .aTitle,
                    #tech-bone_tools a.button:focus-visible .aTitle,
                    #tech-sundial a.button:focus-visible .aTitle {
                        color: #f8f8f8;
                        text-shadow: 0 0 4px rgba(0, 0, 0, 0.85);
                    }

                    a.button.rna-action:active,
                    a.button.dna-action:active,
                    a.button.membrane-action:active,
                    a.button.organelles-action:active,
                    a.button.nucleus-action:active,
                    a.button.eukaryotic-cell-action:active,
                    a.button.mitochondria-action:active,
                    a.button.sexual-reproduction-action:active,
                    a.button.phagocytosis-action:active,
                    a.button.chloroplasts-action:active,
                    a.button.chitin-action:active,
                    a.button.multicellular-action:active,
                    a.button.spores-action:active,
                    a.button.poikilohydric-action:active,
                    a.button.club-action:active,
                    a.button.bone-tools-action:active,
                    a.button.bryophyte-action:active,
                    a.button.sentience-action:active,
                    a.button.bilateral-symmetry-action:active,
                    a.button.arthropods-action:active,
                    a.button.mammals-action:active,
                    a.button.humanoid-action:active,
                    a.button.gigantism-action:active,
                    a.button.dwarfism-action:active,
                    a.button.animalism-action:active,
                    a.button.eggshell-action:active,
                    a.button.sundial-action:active,
                    a.button.currency-action:active,
                    a.button.primitive-axes-action:active,
                    a.button.sap-hardening-action:active,
                    a.button.irrigation-action:active,
                    a.button.scientific-method-action:active,
                    a.button.gather-amber-action:active,
                    a.button.pinguicula-food-action:active,
                    a.button.pinguicula-lumber-action:active,
                    a.button.grove-action:active,
                    a.button.farm-action:active,
                    a.button.agriculture-action:active,
                    a.button.housing-action:active,
                    a.button.aphrodisiac-action:active,
                    a.button.banking-action:active,
                    a.button.farm-houses-action:active,
                    a.button.leather-armor-action:active,
                    a.button.bows-action:active,
                    a.button.government-action:active,
                    a.button.mercenaries-action:active,
                    a.button.metal-working-action:active,
                    a.button.cement-action:active,
                    a.button.investing-action:active,
                    a.button.grain-silo-action:active,
                    a.button.grain-mill-action:active,
                    a.button.freight-yard-action:active,
                    a.button.smelting-action:active,
                    a.button.coal-mining-action:active,
                    a.button.reinforced-sheds-action:active,
                    a.button.iron-axe-action:active,
                    a.button.iron-pickaxe-action:active,
                    a.button.iron-hoes-action:active,
                    a.button.rebar-action:active,
                    a.button.research-grant-action:active,
                    a.button.sawmills-action:active,
                    a.button.tax-rates-action:active,
                    a.button.plate-armor-action:active,
                    a.button.cottage-action:active,
                    a.button.amphitheatre-action:active,
                    a.button.library-action:active,
                    a.button.bronze-axe-action:active,
                    a.button.foundry-action:active,
                    a.button.artisans-action:active,
                    a.button.bronze-pickaxe-action:active,
                    a.button.bronze-hoes-action:active,
                    a.button.dewey-decimal-system-action:active,
                    a.button.theatre-action:active,
                    a.button.playwright-action:active,
                    a.button.thesis-papers-action:active,
                    a.button.urban-planning-action:active,
                    a.button.apprentices-action:active,
                    a.button.trade-routes-action:active,
                    a.button.spies-action:active,
                    a.button.marketplace-action:active,
                    a.button.iron-mining-action:active,
                    a.button.containerization-action:active,
                    a.button.bank-vault-action:active,
                    a.button.savings-bonds-action:active,
                    a.button.cement-plant-action:active,
                    a.button.mine-action:active,
                    a.button.garrison-action:active,
                    a.button.warehouse-action:active,
                    a.button.basic-storage-action:active,
                    a.button.shed-action:active,
                    a.button.bank-action:active,
                    a.button.lumber-yard-action:active,
                    a.button.university-action:active,
                    #tech-club a.button:active,
                    #tech-bone_tools a.button:active,
                    #tech-sundial a.button:active {
                        transform: scale(0.96);
                        filter: brightness(0.95);
                    }

                    .full-badge {
                        position: absolute;
                        right: 0.4rem;
                        bottom: 0.35rem;
                        padding: 0.1rem 0.4rem;
                        border-radius: 9999px;
                        background: rgba(46, 204, 113, 0.9);
                        color: #072b1a;
                        font-size: 0.65rem;
                        line-height: 1;
                        opacity: 0;
                        transform: scale(0.9);
                        transition: opacity 0.12s ease, transform 0.12s ease;
                        pointer-events: none;
                    }

                    &.show-full-badge .full-badge {
                        opacity: 1;
                        transform: scale(1);
                    }

                    .insufficient-badge {
                        position: absolute;
                        left: 0.35rem;
                        bottom: 0.35rem;
                        padding: 0.1rem 0.4rem;
                        border-radius: 9999px;
                        background: rgba(231, 76, 60, 0.9);
                        color: #fff;
                        font-size: 0.65rem;
                        line-height: 1;
                        opacity: 0;
                        transform: scale(0.9);
                        transition: opacity 0.12s ease, transform 0.12s ease;
                        pointer-events: none;
                    }

                    &.show-insufficient-badge .insufficient-badge {
                        opacity: 1;
                        transform: scale(1);
                    }

                    .afford-count-badge {
                        position: absolute;
                        left: 0.35rem;
                        top: 0.35rem;
                        min-width: 1.1rem;
                        padding: 0.1rem 0.4rem;
                        border-radius: 0.35rem;
                        background: rgba(46, 204, 113, 0.9);
                        color: #072b1a;
                        font-size: 0.65rem;
                        line-height: 1;
                        text-align: center;
                        opacity: 0;
                        transform: scale(0.9);
                        transition: opacity 0.12s ease, transform 0.12s ease;
                        pointer-events: none;
                    }

                    &.show-afford-count .afford-count-badge {
                        opacity: 1;
                        transform: scale(1);
                    }
                }

                #tech .action a.button {
                    border-color: #00b7ff;
                    box-shadow: 0 0 0 2px rgba(0, 183, 255, 0.35);
                }

                #tech {
                    display: grid;
                    grid-template-columns: repeat(4, minmax(0, 1fr));
                    gap: 0.5rem;
                    align-items: start;
                    justify-items: center;
                }

                #tech > div:not(.action) {
                    grid-column: 1 / -1;
                }

                #tech > .action {
                    margin: 0;
                    width: 100%;
                    max-width: 5.5rem;
                    aspect-ratio: 1 / 1;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                }

                #tech > .action a.button,
                #tech > .action .oldTech {
                    margin: 0;
                    width: 100%;
                    height: 100%;
                }

                #tech > .action a.button {
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    text-align: center;
                    padding: 0.4rem;
                }

                #tech > .action a.button .aTitle {
                    width: 100%;
                    text-align: center;
                }

                #techCompleted .tech {
                    display: grid;
                    grid-template-columns: repeat(4, minmax(0, 1fr));
                    gap: 0.5rem;
                    align-items: start;
                    justify-items: center;
                }

                #techCompleted .tech > div:not(.action) {
                    grid-column: 1 / -1;
                }

                #techCompleted .tech > .action {
                    margin: 0;
                    width: 100%;
                    max-width: 5.5rem;
                    aspect-ratio: 1 / 1;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                }

                #techCompleted .tech > .action .oldTech {
                    margin: 0;
                    width: 100%;
                    height: 100%;
                }

                #city-dist-residential .action a.button {
                    border-color: #ffb347;
                    box-shadow: 0 0 0 2px rgba(255, 179, 71, 0.35);
                }

                .enemyFortress {
                    background-color: @button-background;
                }

                .divider h2 {
                    background: @html-background;
                }

                .green,
                .synth {
                    box-shadow: 0 0 6px @has-text-success;
                    > span {
                        text-shadow: 1px 1px @has-text-success;
                    }
                }

                .red {
                    box-shadow: 0 0 6px @has-text-danger;
                    > span {
                        text-shadow: 1px 1px @has-text-danger;
                    }
                }

                .yellow {
                    box-shadow: 0 0 6px @has-text-warning;
                    > span {
                        text-shadow: 1px 1px @has-text-warning;
                    }
                }

                .orange {
                    box-shadow: 0 0 6px @has-text-caution;
                    > span {
                        text-shadow: 1px 1px @has-text-caution;
                    }
                }

                .purple {
                    box-shadow: 0 0 6px @has-text-special;
                    > span {
                        text-shadow: 1px 1px @has-text-special;
                    }
                }
                
                .blue,
                .precog {
                    box-shadow: 0 0 6px @has-text-info;
                    > span {
                        text-shadow: 1px 1px @has-text-info;
                    }
                }
                .cna .precog {
                    > span {
                        text-shadow: none;
                    }
                }
            }

            .government {
                .header {
                    border-bottom: .0625rem solid @secondary-border;
                }
            }

            .garrison {
                .header {
                    border-bottom: .0625rem solid @secondary-border;
                }
            }

            .market-header {
                border-bottom: @secondary-border solid 1px;
            }

            .galaxyTrade {
                border-top: @secondary-border solid 1px;
            }
        }

        .powerGrid {
            display: flex;
            flex-wrap: wrap;
            margin-left: 1rem;

            .circuit {
                min-width: 18.5rem;
                cursor: pointer;

                &.inactive {
                    display: none;
                }

                >span {
                    display: inline-block;
                }

                >span:first-child {
                    width: 1.5rem;
                }

                .struct {
                    width: 12rem;
                }

                .off,
                .on {
                    min-width: 2rem;
                    text-align: center;
                }

                .off {
                    color: @has-text-danger;
                }
                .on {
                    color: @has-text-success;
                }
            }
        }

        .gridHeader {
            border-top: @secondary-border solid .0625rem;
            margin: .25rem 0 .25rem 1rem;
            padding-top: .25rem;
        }

        .powerGridHead {
            display: flex;
            justify-content: space-between;
        }

        .powerGridHeader {
            margin-left: 1rem;
            margin-bottom: .5rem;
        }

        .resetPowerGrid {
            margin-left: 1rem;
            margin-top: .75rem;
            .button {
                height: 1.5rem;
            }
        }

        // .fort
        .fort {
            .patrol {
                .check {
                    background-color: @fort-patrol-check-background ;
                }
            }
        }

        // .market-item
        .market-item {
            .order {
                border: @primary-border solid .0625rem;
                transition: all 200ms ease;
            }

            .order:hover {
                border: @market-item-order-hover-border solid .0625rem;
                background-color: @market-item-order-hover-background;
            }
        }

        .market-item,
        .resource {
            &.alt {
                background-color: @market-item-background;
            }
        }

        .resource.showBar {
            background-repeat: no-repeat;
            background-position: left bottom;
            background-size: 100% 0.18rem;

            &.prime {
                background-image: linear-gradient(
                to right, transparent 0%,
                    transparent calc(var(--percent-full) - 1px),
                    @resource-overlay-color calc(var(--percent-full) + 1px),
                    @resource-overlay-color 100%
                );
            }
            &.alt {
                background-image: linear-gradient(
                    to right, transparent 0%,
                        transparent calc(var(--percent-full) - 1px),
                        @resource-overlay-color-alt calc(var(--percent-full) + 1px),
                        @resource-overlay-color-alt 100%
                    );
            }
        }

        #resMoney.resource.showBar,
        #resKnowledge.resource.showBar,
        #resCrates.resource.showBar,
        #resLumber.resource.showBar,
        #resFurs.resource.showBar,
        #resAmber.resource.showBar,
        #resAluminium.resource.showBar,
        #resFood.resource.showBar,
        #resIron.resource.showBar,
        body.race-sappy #resStone.resource.showBar {
            position: relative;
        }

        #resMoney.resource.showBar {
            background-image: none;
        }

        #resMoney.resource.showBar::after,
        #resKnowledge.resource.showBar::after,
        #resCrates.resource.showBar::after,
        #resLumber.resource.showBar::after,
        #resFurs.resource.showBar::after,
        #resAmber.resource.showBar::after,
        #resAluminium.resource.showBar::after,
        #resFood.resource.showBar::after,
        #resIron.resource.showBar::after,
        body.race-sappy #resStone.resource.showBar::after {
            content: "";
            position: absolute;
            left: 0.45rem;
            right: 0.45rem;
            bottom: 0;
            height: 0.18rem;
            border-radius: 0 0 0.25rem 0.25rem;
            pointer-events: none;
            transform-origin: left;
            transform: scaleX(var(--percent-full-ratio, 0));
        }

        #resMoney.resource.showBar::after {
            background-color: #9be7a5;
        }

        #resKnowledge.resource.showBar::after {
            background-color: #5aa0ff;
        }

        #resCrates.resource.showBar::after {
            background-color: #965f28;
        }

        #resLumber.resource.showBar::after {
            background-color: #3ccf6a;
        }

        #resFurs.resource.showBar::after {
            background-color: #8b5a2b;
        }

        #resAmber.resource.showBar::after,
        body.race-sappy #resStone.resource.showBar::after {
            background-color: #f0c74a;
        }

        #resAluminium.resource.showBar::after {
            background-color: #c0c0c0;
        }

        #resFood.resource.showBar::after {
            background-color: #8b5a2b;
        }

        #resIron.resource.showBar::after {
            background-color: #c0c0c0;
        }

        .resource .bar {
            cursor: pointer;
        }

        .inactive-row {
            background-color: @market-item-background;
        }

        // .modal
        .modal .actionSpace {
            background-color: @html-background;
        }
        
        // .modal-card
        .modal-card-head,
        .modal-card-body,
        .modal-card-foot {
            background-color: @modalBox-background;
        }
        
        .modal-card-head {
            p {
                color: @has-text-warning;
            }
        }

        // .industry
        .modalBox,
        .industry {
            background: @modalBox-background;

            p {
                border-bottom: @secondary-border solid .0625rem;
            }

            .market-item {
                border-top: @secondary-border solid .0625rem;
            }

            .divide {
                border-top: @secondary-border solid .0625rem;
            }

            .smelting {
                border-top: @secondary-border solid .0625rem;
            }
        }

        .industry {
            background: none;

            .header {
                border-bottom: @secondary-border solid .0625rem;
            }

            .avail {
                span {
                    margin: 0 2.5rem 0 2.125rem;
                }
            }
        }

        .govTask {
            margin-top: .25rem;
            .button {
                height: 1.5rem;
                margin-left: .5rem;
            }
        }
        
        .fileImport {
            background-color: @html-background;
        }

        // Stars
        .star1 {
            fill: @html-background;
            stroke: @star-2-fill;
            path {
                stroke: @star-2-fill;
            }
            path.bolden {
                stroke-width: 8px;
            }
        }

        .star2 {
            fill: @star-2-fill;
        }

        .star3 {
            fill: @star-3-fill;
        }

        .star4 {
            fill: @star-4-fill;
        }

        .star5 {
            fill: @star-5-fill;
        }
        
        .refresh svg {
            fill: @has-text-advanced;
        }

        // -webkit-scrollbar
        .hscroll::-webkit-scrollbar-track,
        .vscroll::-webkit-scrollbar-track,
        .sticky::-webkit-scrollbar-track,
        .resTabs>section::-webkit-scrollbar-track,
        .resTabs>.tabs::-webkit-scrollbar-track,
        .bldQueue::-webkit-scrollbar-track,
        .dropdown-content::-webkit-scrollbar-track {
            -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
            box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
            background-color: @webkit-scrollbar-background;
        }

        .vscroll::-webkit-scrollbar,
        .sticky::-webkit-scrollbar,
        .resTabs>section::-webkit-scrollbar,
        .resTabs>.tabs::-webkit-scrollbar,
        .bldQueue::-webkit-scrollbar,
        .dropdown-content::-webkit-scrollbar {
            width: 6px;
            background-color: @webkit-scrollbar-background;
        }

        .hscroll::-webkit-scrollbar {
            height: 8px;
            background-color: @webkit-scrollbar-background;
        }

        .vscroll::-webkit-scrollbar-thumb,
        .hscroll::-webkit-scrollbar-thumb,
        .sticky::-webkit-scrollbar-thumb,
        .resTabs>section::-webkit-scrollbar-thumb,
        .resTabs>.tabs::-webkit-scrollbar-thumb,
        .bldQueue::-webkit-scrollbar-thumb,
        .dropdown-content::-webkit-scrollbar-thumb {
            background-color: @webkit-scrollbar-thumb-background;
        }

        .vscroll,
        .hscroll,
        .sticky,
        .resTabs>section,
        .resTabs>.tabs,
        .bldQueue {
            scrollbar-color: @webkit-scrollbar-thumb-background @webkit-scrollbar-background;
        }

        .buttonList .is-selected {
            border-color: @enabled;
        }
    }
}

#city-gift .hgift {
    background-color: initial;
    background-image:
        repeating-linear-gradient(
            90deg,
            firebrick,
            firebrick 10px,
            beige 0,
            beige 12px,
            forestgreen 0,
            forestgreen 18px,
            gold 0,
            gold 20px,
            crimson 0,
            crimson 30px
        ),
        repeating-linear-gradient(
            firebrick,
            firebrick 10px,
            beige 0,
            beige 12px,
            forestgreen 0,
            forestgreen 18px,
            gold 0,
            gold 20px,
            crimson 0,
            crimson 30px
	);
    background-blend-mode: multiply;
    > span {
        color: #ebdbb2;
        text-shadow: 2px 2px #000;
    }
}

// Dark theme
html.dark {
    #lib.themes.dark(); // Highest priority
    #lib.mainTemplate();

    // Theme specific
    .modal .action {
        #lib.mainTemplate.main.content.action();
    }

    .pop-desc {
        .has-text-caution {
            color: #a30500;
        }
    }

    .popper {
        .grad-from-left {
            background-image: linear-gradient(90deg, @has-text-danger 45%, @popper 55%);
        }
        .grad-from-left-warn {
            background-image: linear-gradient(90deg, @has-text-alert 45%, @has-text-danger 55%);
        }
        .grad-from-right {
            background-image: linear-gradient(90deg, @popper 45%, @has-text-danger 55%);
        }
    }

    .modal .buttonList .is-selected {
        border-color: @enabled;
    }
}

// Light theme
html.light {
    #lib.themes.light(); // Highest priority
    #lib.mainTemplate();

    // Theme specific
    .modal .action {
        #lib.mainTemplate.main.content.action();
    }

    body {
        font-weight: 500;
    }

    // .button
    .button,
    .button:hover {
        border: solid .0625rem @black;
    }

    // UI Bars
    .topBar {
        .calendar {
            .wi-thermometer-exterior {
                color: #00d6b2;
            }

            .wi-day-sunny,
            .wi-day-windy {
                color: #fffb00;
            }

            .wi-cloud,
            .wi-cloudy-gusts {
                color: #dfe2d3;
            }

            .wi-rain,
            .wi-storm-showers {
                color: #00b0e6;
            }

            .wi-snow,
            .wi-snow-wind {
                color: #fff;
            }
        }
    }

    // .main
    .main {
        .content {
            .action {
                a.button {
                    span.count {
                        border-bottom: .0625rem solid #000;
                        border-left: .0625rem solid #000;
                    }
                }
            }

            .action.cna:not(.cnam) {
                span.aTitle {
                    color: #282828;
                }
            }
        }
    }

    // .industry
    .industry {
        background: none;

        .smelting {
            border-top: 0;
        }

        .header {
            border-bottom: #4e4e4e solid .0625rem;
        }
    }

    .progress::-webkit-progress-value,
    .progress::-moz-progress-bar {
        background-color: #898989;
    }

    .popper {
        .grad-from-left {
            background-image: linear-gradient(90deg, @has-text-danger 45%, @popper 55%);
        }
        .grad-from-left-warn {
            background-image: linear-gradient(90deg, @has-text-alert 45%, @has-text-danger 55%);
        }
        .grad-from-right {
            background-image: linear-gradient(90deg, @popper 45%, @has-text-danger 55%);
        }
    }

    .modal .buttonList .is-selected {
        border-color: @enabled;
    }
    .modal .buttonList .is-focused {
        color: @primary-color;
    }
}

// Night theme
html.night {
    #lib.themes.night(); // Highest priority
    #lib.themes.dark(); // Lowest priority
    #lib.mainTemplate();

    // Theme specific
    .modal .action {
        #lib.mainTemplate.main.content.action();
    }

    .popper {
        .grad-from-left {
            background-image: linear-gradient(90deg, @has-text-danger 45%, @popper 55%);
        }
        .grad-from-left-warn {
            background-image: linear-gradient(90deg, @has-text-alert 45%, @has-text-danger 55%);
        }
        .grad-from-right {
            background-image: linear-gradient(90deg, @popper 45%, @has-text-danger 55%);
        }
    }

    .modal .buttonList .is-selected {
        border-color: @enabled;
    }
}

// Red Green CB theme
html.redgreen {
    #lib.themes.redgreen(); // Highest priority
    #lib.themes.night();
    #lib.themes.dark(); // Lowest priority
    #lib.mainTemplate();

    // Theme specific
    .modal .action {
        #lib.mainTemplate.main.content.action();
    }

    .main>div.popper,
    body>div.popper,
    body .modal>div.popper {
        .has-text-danger {
            color: #aa00aa;
        }
    }

    #powerStatus .has-text-warning {
        color: #9900cc;
    }

    // Trade
    .trade {
        .has-text-danger {
            color: #167df0;
            color: #aa00ff;
        }

        .has-text-warning {
            color: #fff;
        }
    }

    // UI Bars
    .topBar {
        .calendar {
            .wi-thermometer-exterior {
                color: #00e6d2;
            }

            .wi-thermometer {
                color: #fffb00;
            }
        }
    }

    .mad {
        background: repeating-linear-gradient(45deg,
                #8a8b49,
                #8a8b49 10px,
                #000000 10px,
                #000000 20px);
    }

    .armed .mad {
        background: repeating-linear-gradient(45deg,
                #fbfd84,
                #fbfd84 10px,
                #000000 10px,
                #000000 20px);
    }

    .popper {
        .grad-from-left {
            background-image: linear-gradient(90deg, @has-text-danger 45%, @popper 55%);
        }
        .grad-from-left-warn {
            background-image: linear-gradient(90deg, @has-text-alert 45%, @has-text-danger 55%);
        }
        .grad-from-right {
            background-image: linear-gradient(90deg, @popper 45%, @has-text-danger 55%);
        }
    }

    .modal .buttonList .is-selected {
        border-color: @enabled;
    }
}

// Dark Night theme
html.darkNight {
    #lib.themes.darkNight(); // Highest priority
    #lib.themes.night();
    #lib.themes.dark(); // Lowest priority
    #lib.mainTemplate();

    // Theme specific
    .has-text-warning {
        color: #d6b220;
    }

    input,
    select,
    textarea {
        background: @primary-color;
    }

    .popper {
        .grad-from-left {
            background-image: linear-gradient(90deg, @has-text-danger 45%, @popper 55%);
        }
        .grad-from-left-warn {
            background-image: linear-gradient(90deg, @has-text-alert 45%, @has-text-danger 55%);
        }
        .grad-from-right {
            background-image: linear-gradient(90deg, @popper 45%, @has-text-danger 55%);
        }
    }

    .modal .buttonList .is-selected {
        border-color: @enabled;
    }
}

// GruvBox Light theme
html.gruvboxLight {
    #lib.themes.gruvboxLight(); // Highest priority
    #lib.themes.light(); // Lowest priority
    #lib.mainTemplate();

    input,
    select,
    textarea,
    .notification {
        background: @secondary-color;
    }

    .popper {
        .grad-from-left {
            background-image: linear-gradient(90deg, @has-text-danger 45%, @popper 55%);
        }
        .grad-from-left-warn {
            background-image: linear-gradient(90deg, @has-text-alert 45%, @has-text-danger 55%);
        }
        .grad-from-right {
            background-image: linear-gradient(90deg, @popper 45%, @has-text-danger 55%);
        }
    }

    .modal .buttonList .is-selected {
        border-color: @enabled;
    }
}

// GruvBox Dark theme
html.gruvboxDark {
    #lib.themes.gruvboxDark(); // Highest priority
    #lib.themes.dark(); // Lowest priority
    #lib.mainTemplate();

    input,
    select,
    textarea,
    .notification {
        background: @primary-color;
    }

    .add,
    .sub {
        border: @secondary-border solid .0625rem;
    }

    .current {
        border-top: @secondary-border solid .0625rem;
        border-bottom: @secondary-border solid .0625rem;
    }
    .current.infoOnly {
        border: @secondary-border solid .0625rem;
    }

    .popper {
        .grad-from-left {
            background-image: linear-gradient(90deg, @has-text-danger 45%, @popper 55%);
        }
        .grad-from-left-warn {
            background-image: linear-gradient(90deg, @has-text-alert 45%, @has-text-danger 55%);
        }
        .grad-from-right {
            background-image: linear-gradient(90deg, @popper 45%, @has-text-danger 55%);
        }
    }

    .modal .buttonList .is-selected {
        border-color: @enabled;
    }
}

// GruvBox Dark Red Green theme
html.gruvboxDarkRG {
    #lib.themes.gruvboxDarkRG(); // Highest priority
    #lib.themes.gruvboxDark(); // Higher priority
    #lib.themes.dark(); // Lowest priority
    #lib.mainTemplate();

    input,
    select,
    textarea,
    .notification {
        background: @primary-color;
    }

    .add,
    .sub {
        border: @secondary-border solid .0625rem;
    }

    .current {
        border-top: @secondary-border solid .0625rem;
        border-bottom: @secondary-border solid .0625rem;
    }
    .current.infoOnly {
        border: @secondary-border solid .0625rem;
    }

    .popper {
        .grad-from-left {
            background-image: linear-gradient(90deg, @has-text-danger 45%, @popper 55%);
        }
        .grad-from-left-warn {
            background-image: linear-gradient(90deg, @has-text-alert 45%, @has-text-danger 55%);
        }
        .grad-from-right {
            background-image: linear-gradient(90deg, @popper 45%, @has-text-danger 55%);
        }
    }

    .modal .buttonList .is-selected {
        border-color: @enabled;
    }
}

// Orange Soda theme
html.orangeSoda {
    #lib.themes.orangeSoda(); // Highest priority
    #lib.mainTemplate();

    // Theme specific
    .modal .action {
        #lib.mainTemplate.main.content.action();
    }

    .has-text-info {
        color: #F09D51;
    }

    .pop-desc {
        .has-text-caution {
            color: @has-text-danger;
        }
    }

    input,
    select,
    textarea,
    .notification {
        background: @primary-color;
    }

    .popper {
        .grad-from-left {
            background-image: linear-gradient(90deg, @has-text-danger 45%, @popper 55%);
        }
        .grad-from-left-warn {
            background-image: linear-gradient(90deg, @has-text-alert 45%, @has-text-danger 55%);
        }
        .grad-from-right {
            background-image: linear-gradient(90deg, @popper 45%, @has-text-danger 55%);
        }
    }

    .modal .buttonList .is-selected {
        border-color: @enabled;
    }
}

// Dracula theme
html.dracula {
    #lib.themes.dracula(); // Highest priority
    #lib.themes.dark(); // Lowest priority
    #lib.mainTemplate();

    input,
    select,
    textarea,
    .notification {
        background: @primary-color;
    }

    .add,
    .sub {
        border: @secondary-border solid .0625rem;
    }

    .current {
        border-top: @secondary-border solid .0625rem;
        border-bottom: @secondary-border solid .0625rem;
    }
    .current.infoOnly {
        border: @secondary-border solid .0625rem;
    }

    .popper {
        .grad-from-left {
            background-image: linear-gradient(90deg, @has-text-danger 45%, @popper 55%);
        }
        .grad-from-left-warn {
            background-image: linear-gradient(90deg, @has-text-alert 45%, @has-text-danger 55%);
        }
        .grad-from-right {
            background-image: linear-gradient(90deg, @popper 45%, @has-text-danger 55%);
        }
    }

    .modal .buttonList .is-selected {
        border-color: @enabled;
    }
}

// Base CSS
html {
    overflow-y: hidden;
    box-sizing: border-box;
    font-size: 16px;
}

body,
button,
input,
select,
textarea {
    font-family: "Lato", -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", "Helvetica", "Arial", sans-serif;
}

body {
    line-height: initial;
    touch-action: manipulation;
}

html.large_all {
    font-size: 18px;
}

h2,
h3,
.content h2,
.content h3 {
    font-size: 1rem;
    font-weight: normal;
    display: inline-block;
    margin-bottom: 0;
}

.is-sr-only {
    margin: 0;
}

span,
div {
    -moz-user-select: none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.button {
    transition: all 200ms ease;
}

.button.right {
    float: right;
}

a {
    cursor: pointer;
    text-decoration: none;
    transition: all 200ms ease;
}

.tabs a {
    border-bottom: none;
    padding: .5em 1em;
    vertical-align: top;
}

.content li {
    margin-top: 0;
}

.block:not(:last-child),
.box:not(:last-child),
.breadcrumb:not(:last-child),
.content:not(:last-child),
.highlight:not(:last-child),
.level:not(:last-child),
.list:not(:last-child),
.message:not(:last-child),
.notification:not(:last-child),
.progress:not(:last-child),
.subtitle:not(:last-child),
.table-container:not(:last-child),
.table:not(:last-child),
.title:not(:last-child) {
    margin-bottom: 1rem;
}

.tabs:not(:last-child) {
    margin-bottom: .5rem;
    overflow: hidden;
}

.modal .animation-content {
    overflow: hidden;
}

.actionWidth {
    @media only screen and (max-width: 113rem) {
        max-width: 38rem;
    }

    @media only screen and (max-width: 88.5rem) {
        max-width: 51rem;
    }

    @media only screen and (max-width: 76.375rem) {
        max-width: 38rem;
    }

    @media only screen and (max-width: 59rem) {
        max-width: 25rem;
    }

    @media only screen and (max-width: 48rem) {
        max-width: 38rem;
    }

    @media only screen and (max-width: 45rem) {
        max-width: 25rem;
    }

    @media only screen and (max-width: 32rem) {
        max-width: 12rem;
    }
}

.msgInput,
.keyMap {
    width: 7.5rem;
    display: inline-block;
    height: 1.25rem;
    margin-bottom: .25rem;
    text-align: center;

    input {
        height: 1.25rem;
        line-height: 1.25rem;
        text-align: center;
    }
}

.add {
    display: inline-block;
    margin-right: .25rem;
    padding: 0 .375rem;
    border-radius: 0 .375rem .375rem 0;
    line-height: 1rem;
    cursor: pointer;

    span:first-child {
        position: relative;
        bottom: .0625rem;
    }
}

.sub {
    outline: none;
    display: inline-block;
    margin-left: .125rem;
    padding: 0 .375rem;
    border-radius: .375rem 0 0 .375rem;
    line-height: 1rem;
    cursor: pointer;

    span:first-child {
        position: relative;
        bottom: .0625rem;
    }
}

.current {
    min-width: 5rem;
    text-align: center;
    display: inline-block;
    font-size: .875rem;
    line-height: 1rem;
    padding: 0 .125rem;
    cursor: default;
}
.current.infoOnly {
    border-radius: .375rem;
    padding: 0 .5rem;
}

.factory .current svg {
    width: unset;
}

.zero {
    cursor: pointer;
    margin-left: .75rem;
}

.zero:hover {
    text-decoration: underline;
}

.localization {
    margin-bottom: 1rem;
}

.basic-button {
    display: inline-block;
    font-size: .875rem;
    margin: 0 .25rem;
    padding-top: .125rem;
    border-radius: .375rem;
    line-height: 1rem;
    height: 1.375rem;
    min-width: 4rem;
    text-align: center;
    cursor: pointer;
    -moz-user-select: none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.tradeOffer {
    .trade-offer {
        margin: 0;
        padding: .125rem 0;

        .offer-item {
            width: 7.5rem;
        }

        .offer-vol {
            width: 4.5rem;
            border-right: 1px solid;
            margin-right: .125rem;
        }
    }
}

#egg4 {
    right: 0;
}

.doublePane {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: .5rem;
    > div {
        width: 50%;
    }

    > div.left {
        width: 70%;
    }

    > div.right {
        width: 30%;
    }
    
}

.topPad {
    margin-top: .5rem;
}

.main {
    margin: 1rem 1rem 1.25rem;
    overflow-y: hidden;

    .leftColumn {
        height: ~"calc(100vh - 2.45rem)";
        display: flex;
        flex-direction: column;
        min-height: 0;

        .colHeader {
            display: flex;
            justify-content: space-between;
        }
    }

    #mainColumn .sticky,
    #mainColumn .vscroll,
    #mainColumn .tab-content {
        scrollbar-width: none;
        -ms-overflow-style: none;

        &::-webkit-scrollbar {
            width: 0;
            height: 0;
        }
    }

    >.columns {
        margin-bottom: 0;
    }

    .queue,
    .theme,
    .localization {
        margin-bottom: 1rem;

        i {
            margin-left: .25rem;
            padding-bottom: .25rem;
        }

        .dropdown button {
            height: 1.5rem;
            padding: 0 .75rem;
        }
    }

    >.columns {
        > :first-child {
            min-width: 18rem;
        }
    }

    .sep {
        margin: 0 .5rem;
    }

    .race {
        position: relative;
        margin-top: 1rem;
        margin-bottom: 0;
        width: 100%;

        >span {
            cursor: default;
        }

        .power {
            text-align: right;
        }

        .morale-contain {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: .35rem;
        }

        .morale-contain.morale-docked {
            position: fixed;
            z-index: 12;
            margin: 0;
        }

        .morale {
            text-align: center;
        }

        .morale-job-controls {
            display: inline-flex;
            align-items: center;
            gap: .25rem;
            font-size: .65rem;
            line-height: 1;
            white-space: nowrap;
        }

        .morale-job-controls .morale-job-control {
            display: inline-flex;
            align-items: center;
            gap: .25rem;
            padding: .05rem .35rem;
            border-radius: .35rem;
            border: 1px solid rgba(255, 255, 255, 0.12);
            background: rgba(0, 0, 0, 0.35);
        }

        .morale-job-controls .morale-job-control .label {
            opacity: 0.8;
        }

        .morale-job-controls .morale-job-control .value {
            font-variant-numeric: tabular-nums;
        }

        .morale-job-controls .morale-job-control .value.max {
            opacity: 0.7;
        }

        .morale-job-controls .job-avatar-control {
            width: 1.1rem;
            height: 1.1rem;
            min-width: 1.1rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: .25rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            font-size: .65rem;
            cursor: pointer;
            user-select: none;
            line-height: 1;
        }

        .morale-job-controls .job-avatar-control.avatar-control-sub {
            color: #f14668;
        }

        .morale-job-controls .job-avatar-control.avatar-control-add {
            color: #48c774;
        }

        .morale-job-controls .job-avatar-control.avatar-control-default {
            color: #f5c542;
        }

        .morale-job-controls .job-avatar-control.avatar-control-default.is-default {
            background: #f5c542;
            border-color: #f5c542;
            color: #1a1a1a;
        }

        .race-portrait {
            display: block;
            width: 100%;
            max-height: 8rem;
            margin-top: 0.5rem;
            border-radius: 0.5rem;
            object-fit: cover;
        }

        .race-portrait-wrap {
            position: relative;
            width: 6.5rem;
            height: 6.5rem;
            margin: 0.5rem auto 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .race-portrait-wrap .race-portrait-round {
            margin: 0;
        }

        .race-portrait-title {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.35rem;
            text-align: center;
            color: #f8f8f8;
            font-weight: 700;
            font-size: 0.9rem;
            text-shadow: 0 0 4px rgba(0, 0, 0, 0.85);
            pointer-events: none;
        }

        .pinguicula-portrait-panel {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.35rem;
        }

        .pinguicula-name {
            font-weight: 700;
            text-align: center;
            color: #f8f8f8;
            text-shadow: 0 0 4px rgba(0, 0, 0, 0.85);
        }

        .pinguicula-portrait-panel.pinguicula-portrait-floating {
            position: fixed;
            left: .5rem;
            top: 5rem;
            z-index: 15;
            cursor: move;
            touch-action: none;
        }

        .pinguicula-portrait-panel.pinguicula-portrait-floating.is-dragging {
            opacity: 0.95;
        }

        .race-population {
            display: flex;
            justify-content: center;
            margin-top: 0.35rem;
        }

        .race-population .resource {
            flex: 0 0 auto;
        }

        .race-population .resource > div {
            flex: 0 0 auto;
            padding: 0.1rem 0.45rem;
            border-radius: 999px;
            background: rgba(0, 0, 0, 0.65);
        }

        .race-population .res,
        .race-population .count {
            color: #f8f8f8;
            font-size: 0.8rem;
        }

        .race-population .count {
            margin-left: 0;
        }

        .race-portrait-round {
            width: 6.5rem;
            height: 6.5rem;
            max-width: 6.5rem;
            max-height: 6.5rem;
            border-radius: 50%;
        }
    }

    .civil-race-dock {
        margin-bottom: 0.5rem;
    }

    .civil-race-dock #race {
        margin-top: 0;
    }

    .civil-race-dock .colHeader {
        display: flex;
        justify-content: space-between;
    }

    .queueCol {
        div.bldQueue:first-child {
            margin-top: 2.625rem;
        }
    }

    .queueCol.has-civic-military {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        max-height: ~"calc(100vh - 2.45rem)";
        overflow-y: auto;
        padding-bottom: 0.5rem;
    }

    .queueCol.has-civic-military .msgQueue.right {
        height: auto;
        max-height: 40vh;
    }

    .bldQueue,
    .msgQueue {
        resize: vertical;
        height: 7rem;
        border-top: solid .0625rem;
        border-bottom: solid .0625rem;
        overflow-y: auto;

        &.right {
            height: auto;
            border-bottom: none;
            padding: 1rem;
        }
    }

    .msgQueue {
        font-size: .75rem;
        position: relative;
        overflow: hidden;

        &.right {
            height: ~"calc(100vh - 9rem)";
        }
    }

    .msgQueue.msgQueue-floating {
        height: 0;
        border: none;
        resize: none;
        overflow: visible;
        padding: 0;
    }

    .msgQueue.msgQueue-embedded {
        height: auto;
        border: none;
        resize: none;
        overflow: visible;
        padding: 0;
    }

    .leftColumn > #msgQueue.msgQueue-embedded {
        flex: 0 0 auto;
        align-self: stretch;
        margin-top: auto;
        margin-bottom: 1.2rem;
    }

    .msgQueuePanel {
        position: fixed;
        left: .5rem;
        right: auto;
        bottom: .5rem;
        width: ~"min(36rem, 90vw)";
        max-height: 40vh;
        display: flex;
        flex-direction: column;
        gap: .35rem;
        padding: .5rem .6rem;
        border-radius: .4rem;
        background: #141414;
        border: solid .0625rem rgba(255, 255, 255, 0.18);
        min-height: 6rem;
        overflow: hidden;
        z-index: 20;
    }

    .msgQueue.msgQueue-embedded .msgQueuePanel {
        position: static;
        left: auto;
        right: auto;
        top: auto;
        bottom: auto;
        width: 100%;
        max-height: 35vh;
    }

    .msgQueue.msgQueue-embedded .msgQueuePanel.is-collapsed {
        width: 100%;
    }

    .msgQueuePanel.is-dragging {
        cursor: pointer;
        opacity: 0.95;
    }

    .msgQueuePanel.is-collapsed {
        width: auto;
        max-height: none;
        min-height: auto;
        padding: 0.25rem;
    }

    .msgQueuePanel.is-collapsed #msgQueueBody,
    .msgQueuePanel.is-collapsed .special,
    .msgQueuePanel.is-collapsed .zero {
        display: none;
    }
        
    #msgQueueHeader {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: .75rem;
        cursor: pointer;

        .special {
            cursor: pointer;
        }
        
        h2 {
            border-bottom: none;
            margin: 0;
        }
        
        span {
            font-size: 1rem;
            margin-left: 0;
        }
    }

    .msgQueueToggle {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 2rem;
        height: 2rem;
        padding: 0;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        background: rgba(12, 12, 12, 0.9);
        color: #f8f8f8;
        cursor: pointer;
    }

    .msgQueueToggle:hover {
        background: rgba(32, 32, 32, 0.95);
    }

    .msgQueueToggle svg {
        width: 1.25rem;
        height: 1.25rem;
    }

    #msgQueueFilters {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: .75rem;
        border-bottom: none;
        padding: 0;
        font-size: .875rem;

        span {
            cursor: pointer;
        }

        span:not(:last-child) {
            margin-right: 0;
        }
    }

    #msgQueueLog {
        flex: 1 1 auto;
        min-height: 0;
        overflow-y: auto;
    }

    #buildQueue,
    #msgQueueLog {
        scrollbar-width: none;
        -ms-overflow-style: none;

        &::-webkit-scrollbar {
            width: 0;
            height: 0;
        }
    }
    
    #pausequeue,
    #pauserqueue {
        margin-left: 1rem;
    }

    .bldQueue,
    .bldQueue.right {
        padding-top: .25rem;

        h2 {
            border-bottom: solid .0625rem;
        }

        li {
            display: inline-block;
            height: 1rem;
            padding: 0 .25rem 0 0;
        }

        li:not(:last-child) .queued:after {
            content: " -> "
        }

        li:not(:last-child) .qany:after {
            content: ", "
        }
    }

    .resQueue {
        h2 {
            border-bottom: solid .0625rem;
        }
        
        h2,
        .buildList {
            margin-left: 2rem;
            margin-top: 0;
        }
        
        .buildList {
            li {
                display: inline-block;
                height: 1rem;
                padding: 0 .25rem 0 0;
            }

            li:not(:last-child) .queued:after {
                content: " -> "
            }

            li:not(:last-child) .qany:after {
                content: ", "
            }
        }
    }

    .resTabs>section {
        .sticky();
        height: ~"calc(100vh - 10rem)";
    }

#civilSplitMain .resTabs,
#civilSplitMain .resTabs > section,
#civilSplitMain .resTabs > .tab-content,
#civilSplitMain .resTabs > .tab-content > .tab-item,
#civilSplitMain .resTabs > .tabs {
    overflow: visible !important;
    scrollbar-width: none !important;
    -ms-overflow-style: none;
}

#civilSplitMain .resTabs::-webkit-scrollbar,
#civilSplitMain .resTabs > section::-webkit-scrollbar,
#civilSplitMain .resTabs > .tab-content::-webkit-scrollbar,
    #civilSplitMain .resTabs > .tab-content > .tab-item::-webkit-scrollbar,
    #civilSplitMain .resTabs > .tabs::-webkit-scrollbar {
        width: 0 !important;
        height: 0 !important;
    }

    .govTabs2>section {
        height: ~"calc(100vh - 15rem)";
    }

    .resources {
        margin-top: 0;
        padding-right: .75rem;
        box-sizing: border-box;
        height: ~"calc(100vh - 5rem)";
        font-size: .9rem;

        @media only screen and (max-width: 88.5rem) {
            height: ~"calc(100vh - 16.5rem)";
        }

        @media only screen and (max-width: 48rem) {
            display: relative;
        }

        .resource {
            display: flex;
            cursor: default;
            align-items: center;

            div {
                flex: 1 1 auto;
                display: flex;
                justify-content: flex-start;
                gap: .25rem;
                min-width: 0;
                align-items: center;
            }

            > :nth-child(2) {
                text-align: center;
                flex: 0 0 1.25rem;
                width: auto;
            }

            .interact {
                cursor: pointer;
            }

            > .diff {
                text-align: right;
                flex: 0 1 4.5rem;
                min-width: 3.5rem;
                width: auto;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .craftable {
                flex: 0 1 7rem;
                min-width: 5rem;
                width: auto;
                text-align: right;

                >span {
                    display: inline;
                    margin-left: .25rem;
                }
            }

            .res {
                flex: 1 1 auto;
                min-width: 0;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }

            .count {
                white-space: nowrap;
                flex-shrink: 0;
                margin-left: auto;
            }
        }

        .resource-market-row {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: .35rem;
            margin-top: -0.1rem;
            font-size: .7rem;
            padding-left: 0.9rem;
            white-space: nowrap;
        }

        .resource-market-qty {
            display: inline-flex;
            align-items: center;
            gap: .15rem;
            margin: 0;
            font-variant-numeric: tabular-nums;
        }

        .resource-market-qty.field:not(:last-child) {
            margin-bottom: 0;
        }

        .resource-market-qty-label {
            opacity: 0.75;
            font-size: .65rem;
            line-height: 1rem;
        }

        .resource-market-qty .button {
            height: 1rem;
            min-width: 1rem;
            padding: 0 .25rem;
            font-size: .65rem;
            line-height: 1rem;
        }

        .resource-market-qty .b-numberinput {
            width: 2.75rem;
        }

        .resource-market-qty .b-numberinput input {
            height: 1rem;
            padding: 0 .2rem;
            font-size: .65rem;
        }

        .resource-market-order {
            display: inline-flex;
            align-items: center;
            gap: .2rem;
        }

        .resource-market-order .label {
            font-size: .65rem;
            line-height: 1rem;
        }

        .resource-market-order .value {
            border: solid .0625rem rgba(255, 255, 255, 0.35);
            border-radius: .35rem;
            padding: 0 .25rem;
            line-height: 1rem;
            cursor: pointer;
        }

        .resource-market-routes {
            display: inline-flex;
            align-items: center;
            gap: .2rem;
        }

        .resource-market-routes .current {
            min-width: 2.25rem;
            font-size: .75rem;
            line-height: 1rem;
            padding: 0 .125rem;
        }

        .resource-market-routes .add,
        .resource-market-routes .sub {
            margin: 0;
            padding: 0 .25rem;
            line-height: 1rem;
        }

        .resource-market-routes .zero {
            margin-left: .25rem;
            font-size: .65rem;
        }

        .resource-job-controls {
            display: inline-flex;
            align-items: center;
            flex-wrap: wrap;
            gap: .35rem;
            margin-left: .4rem;
            flex: 0 0 auto;
            font-size: .65rem;
            line-height: 1;
            white-space: nowrap;
        }

        .resource-job-controls.resource-job-controls-top {
            margin: 0 0 .3rem;
            padding: .2rem .35rem;
            border-radius: .35rem;
            border: 1px solid rgba(255, 255, 255, 0.12);
            background: rgba(0, 0, 0, 0.25);
            white-space: normal;
        }

        .resource-job-control {
            display: inline-flex;
            align-items: center;
            gap: .25rem;
            padding: .05rem .35rem;
            border-radius: .35rem;
            border: 1px solid rgba(255, 255, 255, 0.12);
            background: rgba(0, 0, 0, 0.35);
        }

        .resource-job-control .label {
            opacity: 0.8;
        }

        .resource-job-control .value {
            font-variant-numeric: tabular-nums;
        }

        .resource-job-control .value.max {
            opacity: 0.7;
        }

        .resource-job-control .job-avatar-control {
            width: 1.1rem;
            height: 1.1rem;
            min-width: 1.1rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: .25rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            font-size: .65rem;
            cursor: pointer;
            user-select: none;
            line-height: 1;
        }

        .resource-job-control .job-avatar-control.avatar-control-sub {
            color: #f14668;
        }

        .resource-job-control .job-avatar-control.avatar-control-add {
            color: #48c774;
        }

        .resource-job-control .job-avatar-control.avatar-control-default {
            color: #f5c542;
        }

        .resource-job-control .job-avatar-control.avatar-control-default.is-default {
            background: #f5c542;
            border-color: #f5c542;
            color: #1a1a1a;
        }

        .resource.evolution-progress {
            align-items: stretch;
            display: flex;
            flex-direction: column;
            gap: 0.15rem;
        }

        .resource.evolution-progress .evolution-progress-text {
            display: flex;
            display: flex;
            align-items: center;
            gap: .35rem;
            min-width: 0;
            font-size: .85rem;
        }

        .resource.evolution-progress .evolution-progress-bar {
            position: relative;
            height: 0.28rem;
            width: 100%;
            max-width: none;
            align-self: stretch;
            border-radius: 0.35rem;
            overflow: hidden;
            background-color: rgba(255, 255, 255, 0.12);
            box-shadow: inset 0 0 0 1px rgba(155, 231, 165, 0.95);
        }

        .resource.evolution-progress .evolution-progress-bar::before {
            content: "";
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            width: calc(100% * var(--percent-full));
            border-radius: inherit;
            background-color: #2ecc71;
            transition: width 0.2s ease;
            z-index: 0;
        }

        .resource.evolution-progress.evolution-progress-full .evolution-progress-bar::before {
            background-color: #9be7a5;
        }

        .resource.evolution-progress .evolution-progress-text .res-label {
            flex: 1 1 auto;
            min-width: 0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .resource.evolution-progress .evolution-progress-text .count {
            margin-left: auto;
        }

        .resource.evolution-progress .evolution-progress-text .count,
        .resource.evolution-progress .evolution-progress-text .diff {
            white-space: nowrap;
        }

        .resource.evolution-progress .evolution-progress-text .count .max,
        .resource.evolution-progress .evolution-progress-text .diff {
            color: #f5c542;
        }

        #resFood .res {
            display: inline-flex;
            align-items: center;
        }

        #resFood .res-icon {
            display: inline-flex;
            width: 1.1rem;
            height: 1.1rem;
        }

        #resFood .res-icon svg {
            width: 100%;
            height: 100%;
        }

        #resMoney .res-icon-money {
            display: inline-flex;
            width: 1.1rem;
            height: 1.1rem;
            color: #f5c542;
        }

        #resMoney .res-icon-money svg {
            width: 100%;
            height: 100%;
        }

        #resMoney .count .max,
        #resMoney .diff {
            color: #f5c542;
        }

    }

    body.hide-resources-panel #resources {
        display: none !important;
    }

    #resources.resources-panel-hidden {
        display: none !important;
    }

    .leftColumn #resources {
        flex: 1 1 auto;
        min-height: 0;
        height: auto;
    }

    #resources:not(.resources-top):not(.resources-camp):not(.resources-civics) {
        display: flex;
        flex-direction: column;
        gap: 0.2rem;
    }

    #resources:not(.resources-floating):not(.resources-top):not(.resources-camp):not(.resources-civics) {
        padding: 0.45rem 0.75rem 0.6rem;
        border-radius: 0.4rem;
        background: rgba(0, 0, 0, 0.35);
        border: 1px solid rgba(255, 255, 255, 0.12);
        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.25);
    }

    #resources:not(.resources-top):not(.resources-camp):not(.resources-civics) > h2,
    #resources:not(.resources-top):not(.resources-camp):not(.resources-civics) > .resources-floating-header {
        grid-column: 1 / -1;
    }

    #resources:not(.resources-top):not(.resources-camp):not(.resources-civics) .resource {
        width: 100%;
    }

    .evolution-resources {
        height: auto;
        margin: .25rem 0 .5rem;
        padding-right: 0;
    }

    .evolution-resources .resource.evolution-progress + .resource.evolution-progress {
        margin-top: 0.4rem;
    }

    .evolution-resources-title {
        margin: 0 0 .35rem;
        font-weight: 700;
        letter-spacing: .04em;
        cursor: default;
    }

    .evolving {
        margin-top: 1rem;
        width: 100%;
        max-width: 100%;
        position: relative;

        .progress {
            position: absolute;
            width: 1px;
            height: 1px;
            opacity: 0;
            pointer-events: none;
        }
    }

    .evolving::before {
        content: "";
        display: block;
        width: 100%;
        height: 2px;
        margin: 0 0 0.6rem;
        background: linear-gradient(90deg, transparent, #f7c943 15%, #ffd37a 50%, #f7c943 85%, transparent);
        box-shadow: 0 0 6px rgba(247, 201, 67, 0.55);
    }

    .evolving-frame {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 2.75rem;
        width: 100%;
        padding: 0 1rem;
        background: linear-gradient(135deg, rgba(4, 18, 30, 0.95), rgba(6, 30, 46, 0.9));
        border: 2px solid rgba(60, 210, 255, 0.9);
        box-shadow:
            0 0 12px rgba(30, 200, 255, 0.45),
            inset 0 0 12px rgba(0, 0, 0, 0.7);
        clip-path: polygon(0.9rem 0, calc(100% - 0.9rem) 0, 100% 0.9rem, 100% calc(100% - 0.9rem), calc(100% - 0.9rem) 100%, 0.9rem 100%, 0 calc(100% - 0.9rem), 0 0.9rem);
        overflow: hidden;
    }

    .evolving-frame::before {
        content: "";
        position: absolute;
        inset: 0.2rem;
        border: 1px solid rgba(255, 170, 60, 0.5);
        box-shadow: 0 0 8px rgba(255, 170, 60, 0.25);
        clip-path: polygon(0.7rem 0, calc(100% - 0.7rem) 0, 100% 0.7rem, 100% calc(100% - 0.7rem), calc(100% - 0.7rem) 100%, 0.7rem 100%, 0 calc(100% - 0.7rem), 0 0.7rem);
        z-index: 2;
        pointer-events: auto;
        cursor: pointer;
    }

    .evolving-fill {
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        z-index: 0;
        width: ~"calc(var(--evo-progress) * 100%)";
        background: linear-gradient(90deg, rgba(15, 190, 255, 0.95), rgba(10, 235, 215, 0.9) 60%, rgba(255, 178, 70, 0.9));
        box-shadow:
            0 0 10px rgba(45, 210, 255, 0.75),
            0 0 16px rgba(255, 176, 70, 0.35);
        clip-path: polygon(0.9rem 0, 100% 0, 100% 100%, 0.9rem 100%, 0 50%);
        transition: width 0.2s ease-out;
    }

    .evolving-grid {
        position: absolute;
        inset: 0;
        z-index: 1;
        background:
            repeating-linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0, rgba(255, 255, 255, 0.08) 6px, transparent 6px, transparent 12px),
            linear-gradient(90deg, rgba(0, 230, 255, 0.12), rgba(255, 170, 60, 0.08));
        opacity: 0.35;
        pointer-events: auto;
        cursor: pointer;
    }

    .evolving-label {
        position: relative;
        z-index: 3;
        display: flex;
        flex-direction: column;
        align-items: center;
        color: #e6fbff;
    }

    .evolving-title {
        font-weight: 700;
        font-size: 0.95rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        text-shadow:
            0 1px 0 rgba(6, 20, 30, 0.9),
            0 2px 0 rgba(3, 10, 18, 0.9),
            0 0 8px rgba(70, 220, 255, 0.6),
            0 0 12px rgba(255, 170, 60, 0.35);
    }

    .evolving-step-wrap {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        gap: 0.4rem;
        margin-top: 0.35rem;
    }

    .evolving-step-image {
        position: relative;
        width: 2.9rem;
        height: 2.9rem;
        max-width: 100%;
        border-radius: 50%;
        overflow: hidden;
        cursor: default;
        user-select: none;
        box-shadow:
            0 0 10px rgba(60, 255, 170, 0.45),
            inset 0 0 6px rgba(0, 0, 0, 0.6);
        border: 2px solid rgba(60, 255, 170, 0.75);
    }

    .evolving-step-image img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .evolving-step-image::after {
        content: "\2714";
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.6rem;
        color: #4cff9a;
        text-shadow: 0 0 12px rgba(60, 255, 170, 0.8);
        background: rgba(0, 0, 0, 0.35);
        border-radius: 50%;
        opacity: 0;
        transition: opacity 0.15s ease;
    }

    .evolving-step-image:hover::after {
        opacity: 1;
    }

    .content {
        .settings {
            margin-left: 1rem;
            height: ~"calc(100vh - 6.5rem)";
        }

        .settings-modal {
            position: fixed;
            inset: 0;
            z-index: 100010;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .settings-modal-backdrop {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.55);
            pointer-events: auto;
        }

        .settings-modal-panel {
            position: relative;
            z-index: 1;
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
            padding: 1rem 1.25rem;
            border-radius: .5rem;
            background: rgba(0, 0, 0, 0.85);
            border: solid .0625rem rgba(255, 255, 255, 0.12);
            pointer-events: auto;
        }

        .settings-modal-panel .settings {
            margin: 0;
            height: auto;
        }

        .settings-modal-close {
            position: absolute;
            top: .5rem;
            right: .5rem;
        }

        .tab-content {
            padding: 0 .25rem 0 0;
        }

        >.tab-content {
            padding: 0 .25rem 0 1rem;
        }

        .tab-item {
            padding: 0 0 0 1rem;
        }

        .tabs {
            ul {
                margin-top: .5rem;
            }
        }

        .settings-tab-trigger {
            display: inline-block;
            cursor: pointer;
        }

        #oldTech,
        #techCompleted {
            margin-bottom: 4rem;
        }

        #tech .tech-title-new,
        #tech .tech-title-completed {
            font-weight: 700;
            text-shadow: none;
        }

        #tech .tech-title-new {
            color: #c0c0c0;
        }

        #tech .tech-title-completed {
            color: #4fa3ff;
        }

        .civic-military-panel {
            margin-top: 1rem;
            position: relative;
            max-width: ~"min(22rem, 90vw)";
        }

        .civic-military-panel.civic-military-floating {
            position: fixed;
            right: .5rem;
            top: 12rem;
            margin-top: 0;
            width: ~"min(22rem, 90vw)";
            max-height: 70vh;
            padding: .5rem .6rem;
            border-radius: .4rem;
            background: rgba(0, 0, 0, 0.45);
            border: solid .0625rem rgba(255, 255, 255, 0.08);
            overflow-y: auto;
            z-index: 20;
        }

        .civic-military-panel.civic-military-floating.is-dragging {
            cursor: move;
            opacity: 0.95;
        }

        .civic-military-header {
            display: flex;
            align-items: center;
            gap: .5rem;
            padding: .35rem .5rem;
            margin: -0.5rem -0.6rem .35rem;
            background: rgba(0, 0, 0, 0.55);
            border-bottom: solid .0625rem rgba(255, 255, 255, 0.08);
            cursor: move;
            user-select: none;
            touch-action: none;
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .civic-military-panel .civic-section-title {
            font-weight: 700;
            margin: 0;
        }

        .civic-military-panel #militaryFloatingHeader {
            display: none;
        }

        .civic-military-content {
            margin-top: 0.5rem;
        }

        .mtab {
            height: ~"calc(100vh - 10rem)";
        }

        .action {
            display: inline-block;
            position: relative;

            .aTitle {
                overflow-wrap: break-word;
                white-space: normal;
                line-height: 1rem;
            }

            a.button,
            .oldTech {
                width: 12.625rem;
                margin: .375rem .375rem 0 0;

                span.count {
                    position: absolute;
                    top: 0;
                    right: 0;
                    display: inline-block;
                    height: 1.0625rem;
                    line-height: .875rem;
                    padding: 0 .25rem;
                    border-radius: 0 .25rem 0 .4375rem;
                    overflow: hidden;
                }
            }

            .oldTech {
                cursor: default;
                display: inline-flex;
                margin: 0 1rem 0 0;
            }

            #oldTech .oldTech,
            #techCompleted .oldTech {
                width: 5.5rem;
                height: 5.5rem;
                min-width: 5.5rem;
                min-height: 5.5rem;
                border-radius: 50%;
            }

            #techCompleted .tech {
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            #techCompleted .tech > div:not(.action) {
                flex: 0 0 100%;
            }

            #techCompleted .tech > .action {
                flex: 0 0 calc(33.333% - 0.5rem);
                margin: 0;
                display: flex;
                justify-content: center;
            }

            #oldTech #tech-club .oldTech,
            #oldTech #tech-bone_tools .oldTech,
            #oldTech #tech-sundial .oldTech,
            #techCompleted #tech-club .oldTech,
            #techCompleted #tech-bone_tools .oldTech,
            #techCompleted #tech-sundial .oldTech {
                position: relative;
                justify-content: center;
                align-items: center;
                min-height: 4.5rem;
                border: 2px solid #00b7ff;
                box-shadow: 0 0 0 2px rgba(0, 183, 255, 0.35);
                border-radius: 9999px;
                background: transparent no-repeat center;
                background-size: cover;
                background-position: center;
            }

            #oldTech #tech-club .oldTech,
            #techCompleted #tech-club .oldTech {
                background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/club.webp);
            }

            #oldTech #tech-bone_tools .oldTech,
            #techCompleted #tech-bone_tools .oldTech {
                background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/bone-tools.webp);
            }

            #oldTech #tech-sundial .oldTech,
            #techCompleted #tech-sundial .oldTech {
                background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/research/sundial.webp);
            }

            #oldTech #tech-club .oldTech .aTitle,
            #oldTech #tech-bone_tools .oldTech .aTitle,
            #oldTech #tech-sundial .oldTech .aTitle,
            #techCompleted #tech-club .oldTech .aTitle,
            #techCompleted #tech-bone_tools .oldTech .aTitle,
            #techCompleted #tech-sundial .oldTech .aTitle {
                color: transparent;
                text-shadow: none;
            }

            #oldTech .oldTech:hover .aTitle,
            #oldTech .oldTech:focus-visible .aTitle,
            #techCompleted .oldTech:hover .aTitle,
            #techCompleted .oldTech:focus-visible .aTitle {
                color: #f8f8f8;
                text-shadow: 0 0 4px rgba(0, 0, 0, 0.85);
            }

            #oldTech #tech-club .oldTech::after,
            #techCompleted #tech-club .oldTech::after {
                content: "";
                position: absolute;
                top: 0.25rem;
                right: 0.35rem;
                color: #2ecc71;
                font-size: 0.8rem;
                line-height: 1;
                text-shadow: 0 0 2px rgba(0, 0, 0, 0.6);
            }

            div.special,
            span.on,
            span.off {
                position: absolute;
                cursor: pointer;
                display: block;
                height: 1.0625rem;
                line-height: .8125rem;
                padding: 0 .25rem;
                overflow: hidden;
            }

            div.special {
                height: 1.125rem;
                line-height: .9375rem;
                top: .5rem;
                left: 0;
                border-radius: .25rem 0 .4375rem 0;
                width: 1.1875rem;

                svg {
                    position: relative;
                    left: -.125rem;
                }
            }

            span.on {
                bottom: 0;
                right: .375rem;
                border-radius: .4375rem 0 .25rem 0;

                .flair {
                    position: relative;
                    left: .25rem;
                    top: 0;
                }
            }

            span.off {
                bottom: 0;
                left: 0;
                border-radius: 0 .4375rem 0 .25rem;

                .flair {
                    position: relative;
                    left: .125rem;
                    top: 0;
                }
            }

            div.repair {
                position: absolute;
                bottom: 0;
                left: 0;
                width: 100%;
                height: .25rem;

                .progress {
                    height: .25rem;
                    background: transparent;
                }
            }

            .flair {
                position: absolute;
                right: .625rem;
                top: .5rem;
                height: .5rem;
                line-height: .5rem;
                margin: 0;
                padding: 0;
            }

            .flair:nth-of-type(2) {
                right: .625rem;
                top: 1.1875rem;
            }

            .flair:nth-of-type(3) {
                right: .625rem;
                top: 1.875rem;
            }

            .flair:nth-of-type(4) {
                right: 1.3125rem;
                top: .5rem;
            }

            .flair:nth-of-type(5) {
                right: 1.3125rem;
                top: 1.1875rem;
            }

            .flair:nth-of-type(6) {
                right: 1.3125rem;
                top: 1.875rem;
            }
        }

        .action.disabled {
            display: none;
        }

        .enemyFortress {
            display: inline-block;
            position: relative;
            min-width: 17.375rem;
            height: 3.125rem;
            margin: .375rem .375rem 0 0;
            border-radius: .25rem;

            .fortRow {
                > span {
                    display: inline-block;
                }
                :first-child {
                    margin-left: 0.5rem;
                    margin-right: 0;
                    float: left;
                }
                :last-child {
                    margin-left: 0.25rem;
                    margin-right: 0.5rem;
                    float: right;
                }
            }

            .second {
                line-height: 2rem;
                a.button {
                    height: 1.5rem;
                    margin-top: 0.25rem;
                    padding-left: 0.25rem;
                    padding-right: 0.25rem;
                    min-width: 4.5rem;
                }
            }
        }

        .geck {
            width: 100%;
            text-align: center;
        }

        .challenge {
            width: 100%;
            .actionWidth();
            text-align: center;

            .simButton {
                margin-top: 0.5rem;
            }
        }

        .divider {
            width: 100%;
            text-align: center;
            border-bottom: .0625rem solid;
            margin: .625rem 0 .625rem;

            h2 {
                position: relative;
                bottom: -.5rem;
                padding: 0 .625rem;
            }
        }
    }

    #topResourcesMount {
        display: none;
    }

    #topResourcesMount.top-resources-inline {
        display: block;
        position: static;
        margin-bottom: .5rem;
    }

    #topResourcesMount.top-resources-inline #resources {
        height: auto;
        max-height: none;
        padding-right: 0;
    }

    #topResourcesMount.top-resources-floating {
        position: fixed;
        right: .5rem;
        top: 2.6rem;
        z-index: 20;
        padding: .35rem .5rem;
        border-radius: .4rem;
        background: rgba(0, 0, 0, 0.45);
        border: solid .0625rem rgba(255, 255, 255, 0.08);
        max-width: 95vw;
        max-height: 100vh;
        overflow: hidden;
        display: block;
    }

    #topResourcesMount.top-resources-floating.is-dragging {
        cursor: pointer;
        opacity: 0.95;
    }

    #topResourcesHeader {
        display: flex;
        align-items: center;
        gap: .5rem;
        padding: .35rem .5rem;
        margin: -0.35rem -0.5rem .35rem;
        background: rgba(0, 0, 0, 0.55);
        border-bottom: solid .0625rem rgba(255, 255, 255, 0.08);
        cursor: move;
        user-select: none;
        touch-action: none;
        position: sticky;
        top: 0;
        z-index: 1;
    }

    #topResourcesMount.top-resources-floating .resources.resources-top {
        height: auto;
        max-height: 100vh;
        margin: 0;
        padding: 0;
        display: block;
        overflow-x: hidden;
        overflow-y: auto;
    }

    #topResourcesMount.top-resources-floating .resources.resources-top .resource {
        width: 100%;
        padding: .1rem 0;
    }

    #moneyFloating {
        position: fixed;
        right: .5rem;
        top: 5rem;
        z-index: 12;
        padding: .25rem .5rem;
        border-radius: .4rem;
        background: rgba(0, 0, 0, 0.45);
        border: solid .0625rem rgba(255, 255, 255, 0.08);
        cursor: move;
        touch-action: none;
    }

    #moneyFloating .resource {
        margin: 0;
    }

    #knowledgeFloating {
        position: fixed;
        right: .5rem;
        top: 6.6rem;
        z-index: 12;
        padding: .25rem .5rem;
        border-radius: .4rem;
        background: rgba(0, 0, 0, 0.45);
        border: solid .0625rem rgba(255, 255, 255, 0.08);
        cursor: move;
        touch-action: none;
    }

    #knowledgeFloating .resource {
        margin: 0;
    }

    #resourcePanelFloating {
        position: fixed;
        left: 1rem;
        right: auto;
        top: 7.5rem;
        width: ~"min(48rem, 92vw)";
        height: 70vh;
        display: flex;
        flex-direction: column;
        padding: .5rem .6rem .6rem;
        border-radius: .5rem;
        background: #141414;
        border: solid .0625rem rgba(255, 255, 255, 0.18);
        overflow: hidden;
        z-index: 100001;
        pointer-events: auto;
    }

    #resourcePanelFloating .resource-panel-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: .5rem;
        padding: .35rem .5rem;
        margin: -0.5rem -0.6rem .5rem;
        background: #1b1b1b;
        border-bottom: solid .0625rem rgba(255, 255, 255, 0.18);
        cursor: move;
        user-select: none;
        touch-action: none;
    }

    #resourcePanelFloating .resource-panel-close {
        border: solid .0625rem rgba(255, 255, 255, 0.25);
        background: transparent;
        color: #f7f7f7;
        padding: .1rem .4rem;
        border-radius: .3rem;
        line-height: 1;
        cursor: pointer;
        font-size: .9rem;
    }

    #resourcePanelFloating .resource-panel-close:hover {
        background: rgba(255, 255, 255, 0.08);
    }

    #resourcePanelFloating.is-dragging {
        opacity: 0.95;
        cursor: move;
    }

    #resourcePanelFloating .resource-panel-body {
        flex: 1 1 auto;
        min-height: 0;
        display: flex;
        flex-direction: column;
    }

    #resourcePanelFloating .resTabs {
        display: flex;
        flex-direction: column;
        min-height: 0;
        flex: 1 1 auto;
        height: 100%;
    }

    #resourcePanelFloating .resTabs>.tabs {
        margin-left: 0;
    }

    #resourcePanelFloating .resTabs>section {
        position: static;
        top: auto;
        bottom: auto;
        height: 100% !important;
        flex: 1 1 auto;
        overflow-y: auto;
        overflow-x: hidden;
        min-height: 0;
    }

    #resourcePanelFloatingToggle {
        position: fixed;
        left: 1rem;
        top: 7.5rem;
        z-index: 100002;
        width: 2.25rem;
        height: 2.25rem;
        padding: 0;
        border-radius: 999px;
        border: solid .0625rem #f5c542;
        background: #f5c542;
        color: #1a1a1a;
        font-weight: 700;
        box-shadow: 0 0 .5rem rgba(245, 197, 66, 0.55);
        cursor: pointer;
        user-select: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }

    #resourcePanelFloatingToggle:hover {
        background: #ffd45c;
    }

#resources-panel-toggle {
    position: fixed;
    left: 1rem;
    top: 7.5rem;
    z-index: 100002;
    width: 2.25rem;
    height: 2.25rem;
    padding: 0;
    border-radius: 999px;
    border: solid .0625rem rgba(245, 197, 66, 0.75);
    background: rgba(0, 0, 0, 0.35);
    color: #f5c542;
    font-weight: 700;
    box-shadow: 0 0 .45rem rgba(245, 197, 66, 0.35);
    cursor: pointer;
    user-select: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.08s ease, box-shadow 0.08s ease, filter 0.08s ease, background-color 0.12s ease, border-color 0.12s ease, color 0.12s ease;
}

#resources-panel-toggle:hover {
    background: #ffd45c;
    border-color: #ffd45c;
    color: #1a1a1a;
}

#resources-panel-toggle.is-active {
    background: #f5c542;
    border-color: #f5c542;
    color: #1a1a1a;
    box-shadow: 0 0 .5rem rgba(245, 197, 66, 0.55);
}

#resources-panel-toggle svg {
    width: 1.2rem;
    height: 1.2rem;
}

#resources-panel-toggle:active {
    transform: translateY(1px) scale(0.95);
    box-shadow: 0 0 .3rem rgba(245, 197, 66, 0.55);
    filter: brightness(0.95);
}

#resourcePanelFloatingToggle svg {
    width: 1.25rem;
    height: 1.25rem;
}

#resourcePanelFloatingToggle.is-dragging {
    opacity: 0.9;
}

#militaryTabFloatingToggle {
    position: fixed;
    left: 1rem;
    top: 12rem;
    z-index: 100002;
    width: 2.25rem;
    height: 2.25rem;
    padding: 0;
    border-radius: 999px;
    border: solid 0.0625rem #f5c542;
    background: #f5c542;
    color: #1a1a1a;
    font-weight: 700;
    box-shadow: 0 0 0.5rem rgba(245, 197, 66, 0.55);
    cursor: pointer;
    user-select: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.08s ease, box-shadow 0.08s ease, filter 0.08s ease;
}

#militaryTabFloatingToggle:hover {
    background: #ffd45c;
    border-color: #ffd45c;
}

#militaryTabFloatingToggle svg {
    width: 1.2rem;
    height: 1.2rem;
}

#militaryTabFloatingToggle:active {
    transform: translateY(1px) scale(0.95);
    box-shadow: 0 0 0.3rem rgba(245, 197, 66, 0.55);
    filter: brightness(0.95);
}

#militaryTabFloatingToggle.is-dragging {
    opacity: 0.9;
}

#governmentFloatingToggle {
    position: fixed;
    left: 1rem;
    top: 12rem;
    z-index: 100002;
    width: 2.25rem;
    height: 2.25rem;
    padding: 0;
    border-radius: 999px;
    border: solid 0.0625rem #f5c542;
    background: #f5c542;
    color: #1a1a1a;
    font-weight: 700;
    box-shadow: 0 0 0.5rem rgba(245, 197, 66, 0.55);
    cursor: pointer;
    user-select: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.08s ease, box-shadow 0.08s ease, filter 0.08s ease;
}

#governmentFloatingToggle:hover {
    background: #ffd45c;
    border-color: #ffd45c;
}

#governmentFloatingToggle svg {
    width: 1.2rem;
    height: 1.2rem;
}

#governmentFloatingToggle:active {
    transform: translateY(1px) scale(0.95);
    box-shadow: 0 0 0.3rem rgba(245, 197, 66, 0.55);
    filter: brightness(0.95);
}

#governmentFloatingToggle.is-dragging {
    opacity: 0.9;
}

#militaryFloatingPanel {
    position: relative;
}

#militaryFloatingPanel.military-floating {
    position: fixed;
    left: 1rem;
    top: 6rem;
    width: ~"min(56rem, 95vw)";
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    padding: .5rem .6rem .6rem;
    border-radius: .5rem;
    background: #141414;
    border: solid .0625rem rgba(255, 255, 255, 0.18);
    overflow: hidden;
    z-index: 100001;
    pointer-events: auto;
}

#militaryFloatingHeader {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: .5rem;
    padding: .35rem .5rem;
    margin: -0.5rem -0.6rem .5rem;
    background: #1b1b1b;
    border-bottom: solid .0625rem rgba(255, 255, 255, 0.18);
    cursor: move;
    user-select: none;
    touch-action: none;
}

#militaryFloatingPanel.military-floating.is-dragging {
    opacity: 0.95;
    cursor: move;
}

#militaryFloatingContent {
    flex: 1 1 auto;
    min-height: 0;
    overflow-y: auto;
    overflow-x: hidden;
}

#governmentFloatingPanel {
    position: relative;
    width: 100%;
    max-width: 100%;
}

#governmentFloatingPanel.government-floating {
    position: fixed;
    left: .5rem;
    top: 6.5rem;
    width: ~"min(30rem, 95vw)";
    max-width: ~"min(30rem, 95vw)";
    max-height: 70vh;
    padding: .5rem .6rem;
    border-radius: .4rem;
    background: rgba(0, 0, 0, 0.45);
    border: solid .0625rem rgba(255, 255, 255, 0.08);
    overflow-y: auto;
    z-index: 100001;
}

#governmentFloatingPanel.government-floating.is-dragging {
    cursor: move;
    opacity: 0.95;
}

#governmentFloatingPanel.government-floating #government {
    margin-top: 0;
}

#governmentFloatingHeader {
    display: flex;
    align-items: center;
    gap: .5rem;
    padding: .35rem .5rem;
    margin: -0.5rem -0.6rem .35rem;
    background: rgba(0, 0, 0, 0.55);
    border-bottom: solid .0625rem rgba(255, 255, 255, 0.08);
    cursor: move;
    user-select: none;
    touch-action: none;
    position: sticky;
    top: 0;
    z-index: 1;
}

.race.pinguicula-portrait-host {
    position: relative;
    margin: 0;
    width: auto;
    height: 0;
    padding: 0;

    > .name,
    > .morale-contain,
    > .power {
        display: none;
    }

    .race-portrait {
        display: block;
        width: 100%;
        max-height: 8rem;
        margin-top: 0.5rem;
        border-radius: 0.5rem;
        object-fit: cover;
    }

    .race-portrait-wrap {
        position: relative;
        width: 6.5rem;
        height: 6.5rem;
        margin: 0.5rem auto 0;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .race-portrait-wrap .race-portrait-round {
        margin: 0;
    }

    .race-portrait-title {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0.35rem;
        text-align: center;
        color: #f8f8f8;
        font-weight: 700;
        font-size: 0.9rem;
        text-shadow: 0 0 4px rgba(0, 0, 0, 0.85);
        pointer-events: auto;
        cursor: pointer;
    }

    .pinguicula-portrait-panel {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.35rem;
    }

    .pinguicula-name {
        font-weight: 700;
        text-align: center;
        color: #f8f8f8;
        text-shadow: 0 0 4px rgba(0, 0, 0, 0.85);
    }

    .pinguicula-portrait-panel.pinguicula-portrait-floating {
        position: fixed;
        left: .5rem;
        top: 5rem;
        z-index: 15;
        cursor: move;
        touch-action: none;
    }

    .pinguicula-portrait-panel.pinguicula-portrait-floating.is-dragging {
        opacity: 0.95;
    }

    .race-population {
        display: flex;
        justify-content: center;
        margin-top: 0.35rem;
    }

    .race-population .resource {
        flex: 0 0 auto;
    }

    .race-population .resource > div {
        flex: 0 0 auto;
        padding: 0.1rem 0.45rem;
        border-radius: 999px;
        background: rgba(0, 0, 0, 0.65);
    }

    .race-population .res,
    .race-population .count {
        color: #f8f8f8;
        font-size: 0.8rem;
    }

    .race-population .count {
        margin-left: 0;
    }

    .race-portrait-round {
        width: 6.5rem;
        height: 6.5rem;
        max-width: 6.5rem;
        max-height: 6.5rem;
        border-radius: 50%;
    }
}

body.left-column-floating .main .leftColumn {
    position: fixed;
    left: 1rem;
    top: 4.5rem;
    bottom: 1rem;
    width: 18rem;
    max-height: none;
    height: auto;
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
    overflow-x: hidden;
    z-index: 100002;
    background: rgba(0, 0, 0, 0.55);
    border: solid .0625rem rgba(255, 255, 255, 0.12);
    border-radius: .5rem;
    padding: .5rem;
}

body.race-protoplasm .main .leftColumn {
    flex: 0 0 0;
    max-width: 0;
    width: 0;
    padding: 0;
    border: 0;
    margin: 0;
    background: transparent;
}

body.race-protoplasm .main .leftColumn #race,
body.race-protoplasm .main .leftColumn #resources,
body.race-protoplasm .main .leftColumn #buildQueue {
    display: none;
}

body.left-column-collapsed .leftColumn {
    display: none;
}

body.left-column-collapsed .main > .columns {
    flex-wrap: wrap;
}

body.left-column-collapsed #mainColumn {
    flex: 0 0 100%;
    max-width: 100%;
    width: 100%;
}

body.left-column-collapsed #queueColumn {
    width: 100%;
}

#researchFloatingToggle {
    position: fixed;
    left: 1rem;
    top: 12rem;
    z-index: 100002;
    width: 2.25rem;
    height: 2.25rem;
    padding: 0;
    border-radius: 999px;
    border: solid 0.0625rem #f5c542;
    background: #f5c542;
    color: #1a1a1a;
    font-weight: 700;
    box-shadow: 0 0 0.5rem rgba(245, 197, 66, 0.55);
    cursor: pointer;
    user-select: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.08s ease, box-shadow 0.08s ease, filter 0.08s ease;
}

#researchFloatingToggle:hover {
    background: #ffd45c;
    border-color: #ffd45c;
}

#researchFloatingToggle svg {
    width: 1.2rem;
    height: 1.2rem;
}

#researchFloatingToggle .research-badge {
    position: absolute;
    top: -0.35rem;
    right: -0.35rem;
    min-width: 1.1rem;
    height: 1.1rem;
    padding: 0 0.25rem;
    border-radius: 999px;
    background: #dbeafe;
    color: #1d4ed8;
    border: 0.0625rem solid #60a5fa;
    font-size: 0.65rem;
    line-height: 1.1rem;
    font-weight: 700;
    text-align: center;
    box-shadow: 0 0 0.35rem rgba(37, 99, 235, 0.3);
    display: none;
    pointer-events: none;
}

#researchFloatingToggle.has-research-badge .research-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

#researchFloatingToggle:active {
    transform: translateY(1px) scale(0.95);
    box-shadow: 0 0 0.3rem rgba(245, 197, 66, 0.55);
    filter: brightness(0.95);
}

#researchFloatingToggle.is-dragging {
    opacity: 0.9;
}

#researchFloatingPanel {
    position: relative;
}

#researchFloatingPanel.research-floating {
    position: fixed;
    left: 1rem;
    top: 12rem;
    width: ~"min(46rem, 92vw)";
    max-height: 70vh;
    display: flex;
    flex-direction: column;
    padding: .5rem .6rem .6rem;
    border-radius: .5rem;
    background-color: #141414;
    background-image: url('/photo/environment/science.webp');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    border: solid .0625rem rgba(255, 255, 255, 0.18);
    overflow: hidden;
    z-index: 100001;
    pointer-events: auto;
}

#researchFloatingPanel.main {
    margin: 0;
    overflow: hidden;
}

body.research-floating-open #civilTripleResearch,
body.research-floating-open #mTabResearch {
    display: none;
}

#civilTripleResearch,
#civilTripleCivic {
    display: none;
}

#civilTripleCity {
    width: 100%;
    flex: 0 0 100%;
    max-width: 100%;
}

#researchFloatingHeader {
    display: flex;
    align-items: center;
    gap: .5rem;
    padding: .35rem .5rem;
    margin: -0.5rem -0.6rem .5rem;
    background: #1b1b1b;
    border-bottom: solid .0625rem rgba(255, 255, 255, 0.18);
    cursor: move;
    user-select: none;
    touch-action: none;
}

#researchFloatingPanel .research-floating-close {
    margin-left: auto;
    border: solid .0625rem rgba(255, 255, 255, 0.25);
    background: transparent;
    color: #f7f7f7;
    padding: .1rem .4rem;
    border-radius: .3rem;
    line-height: 1;
    cursor: pointer;
    font-size: .9rem;
}

#researchFloatingPanel .research-floating-close:hover {
    background: rgba(255, 255, 255, 0.08);
}

#researchFloatingContent {
    flex: 1 1 auto;
    min-height: 0;
    overflow-y: auto;
    overflow-x: hidden;
}

#smelterFloatingToggle {
    position: fixed;
    left: 1rem;
    top: 14rem;
    z-index: 100002;
    width: 2.25rem;
    height: 2.25rem;
    padding: 0;
    border-radius: 999px;
    border: solid 0.0625rem #f5c542;
    background: #f5c542;
    color: #1a1a1a;
    font-weight: 700;
    box-shadow: 0 0 0.5rem rgba(245, 197, 66, 0.55);
    cursor: pointer;
    user-select: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.08s ease, box-shadow 0.08s ease, filter 0.08s ease;
}

#smelterFloatingToggle:hover {
    background: #ffd45c;
    border-color: #ffd45c;
}

#smelterFloatingToggle svg {
    width: 1.2rem;
    height: 1.2rem;
}

#smelterFloatingToggle:active {
    transform: translateY(1px) scale(0.95);
    box-shadow: 0 0 0.3rem rgba(245, 197, 66, 0.55);
    filter: brightness(0.95);
}

#smelterFloatingToggle.is-dragging {
    opacity: 0.9;
}

#smelterFloatingPanel {
    position: relative;
}

#smelterFloatingPanel.smelter-floating {
    position: fixed;
    left: 1rem;
    top: 14rem;
    width: fit-content;
    max-width: 92vw;
    max-height: 70vh;
    display: flex;
    flex-direction: column;
    padding: 0;
    border-radius: .5rem;
    background: transparent;
    border: solid .0625rem rgba(255, 255, 255, 0.18);
    overflow: hidden;
    z-index: 100001;
    pointer-events: auto;
}

#smelterFloatingHeader {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 0.5rem;
    padding: 0;
    margin: 0;
    background: transparent;
    border: none;
    cursor: move;
    user-select: none;
    touch-action: none;
}

#smelterFloatingHeader .name {
    display: none;
}

#smelterFloatingPanel.smelter-floating.is-dragging {
    opacity: 0.95;
    cursor: move;
}

#smelterFloatingContent {
    flex: 1 1 auto;
    min-height: 0;
    overflow-y: auto;
    overflow-x: hidden;
}

#smelterFloatingInner {
    background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/industrial-park/smelter/smelter.webp) no-repeat center;
    background-size: cover;
}

    #resources.resources-floating {
        position: fixed;
        right: .5rem;
        top: 2.4rem;
        width: ~"min(34rem, 85vw)";
        max-height: 100vh;
        height: auto;
        display: block;
        padding: .5rem .6rem;
        border-radius: .4rem;
        background: rgba(12, 12, 12, 0.78);
        border: solid .09375rem rgba(245, 197, 66, 0.35);
        box-shadow: 0 0.6rem 1.2rem rgba(0, 0, 0, 0.55), 0 0 0 1px rgba(245, 197, 66, 0.15);
        overflow-y: auto;
        overflow-x: hidden;
        z-index: 20;
        cursor: move;
    }

    #resources .resources-floating-header {
        display: none;
        align-items: center;
        justify-content: space-between;
        gap: .5rem;
        padding: .35rem .5rem;
        margin: -0.5rem -0.6rem .35rem;
        background: rgba(0, 0, 0, 0.55);
        border-bottom: solid .0625rem rgba(255, 255, 255, 0.08);
        cursor: move;
        touch-action: none;
        user-select: none;
        position: sticky;
        top: 0;
        z-index: 1;
    }

    #resources .resources-trade-summary {
        display: inline-flex;
        align-items: center;
        gap: .35rem;
        padding: .1rem .45rem;
        border-radius: 999px;
        border: solid .0625rem rgba(255, 255, 255, 0.12);
        background: rgba(0, 0, 0, 0.35);
        font-size: 0.7rem;
        line-height: 1;
        white-space: nowrap;
    }

    #resources .resources-trade-summary .value {
        color: #f8f8f8;
    }

    #resources .resources-population-header {
        display: inline-flex;
        align-items: center;
        gap: .25rem;
        padding: .1rem .45rem;
        border-radius: 999px;
        border: solid .0625rem rgba(255, 255, 255, 0.12);
        background: rgba(0, 0, 0, 0.35);
        font-size: 0.7rem;
        line-height: 1;
        white-space: nowrap;
        margin-left: auto;
        margin-right: auto;
    }

    #resources .resources-population-header .label {
        opacity: 0.75;
        font-size: 0.65rem;
    }

    #resources .resources-population-header .value {
        color: #f8f8f8;
        font-variant-numeric: tabular-nums;
    }

    #resources #resourcesTradeSummary {
        margin-left: auto;
    }

    #resources.resources-floating .resources-floating-header {
        display: flex;
    }

    #resources.resources-camp .resources-floating-header {
        display: flex;
        margin: -0.25rem -0.5rem 0.35rem;
    }

    #resources.resources-draggable .resources-floating-header {
        display: flex;
        margin: -0.25rem -0.5rem 0.35rem;
    }

    #resources.resources-fixed {
        cursor: default;
    }

    #resources.resources-fixed .resources-floating-header {
        cursor: default;
    }

    #resources:not(.resources-civics) .resource.resource-population {
        display: none;
    }

    #resources.resources-floating.is-dragging {
        opacity: 0.95;
        cursor: move;
    }

    #resources.resources-floating .hide-outskirts-resource:not([style*="display:none"]):not([style*="display: none"]),
    #resources.resources-floating .hide-left-resource:not([style*="display:none"]):not([style*="display: none"]) {
        display: flex !important;
    }

    #resources.resources-floating .hide-left-numbers .count,
    #resources.resources-floating .hide-left-numbers .diff {
        display: inline-flex;
    }

    #resources.resources-floating .resource.showBar {
        background-image: none;
    }

    #resources.resources-floating .resource.showBar::after {
        display: none;
    }

    .jobList {
        max-width: 19rem;
    }

    #jobs,
    #job-resources,
    #residential-jobs,
    #industrial-jobs {
        display: flex;
        flex-wrap: wrap;
        gap: 0.25rem;
        width: 100%;
        align-items: flex-start;
    }

    #job-resources {
        display: block;
        width: 100%;
    }

    #job-resources .job-resource-wrap {
        display: none;
    }

    #civ-unemployed,
    #civ-farmer,
    #civ-lumberjack,
    #civ-miner,
    #civ-coal_miner,
    #civ-cement_worker,
    #civ-entertainer,
    #civ-professor,
    #civ-scientist,
    #civ-banker {
        display: none !important;
    }

    #foundry .job:not(.foundry-header),
    #industrial-foundry .job:not(.foundry-header) {
        display: none !important;
    }

    #outskirts-resource-stack .count,
    #outskirts-resource-stack .diff,
    #outskirts-resource-stack .resource > :nth-child(2),
    #outskirts-resource-stack .resource > :nth-child(3),
    #outskirts-lumber-stack .count,
    #outskirts-lumber-stack .diff,
    #outskirts-lumber-stack .resource > :nth-child(2),
    #outskirts-lumber-stack .resource > :nth-child(3),
    #military-resource-stack .count,
    #military-resource-stack .diff,
    #military-resource-stack .resource > :nth-child(2),
    #military-resource-stack .resource > :nth-child(3),
    #industrial-resource-stack .count,
    #industrial-resource-stack .diff,
    #industrial-resource-stack .resource > :nth-child(2),
    #industrial-resource-stack .resource > :nth-child(3),
    #trade-resource-stack .count,
    #trade-resource-stack .diff,
    #trade-resource-stack .resource > :nth-child(2),
    #trade-resource-stack .resource > :nth-child(3),
    #science-resource-stack .count,
    #science-resource-stack .diff,
    #science-resource-stack .resource > :nth-child(2),
    #science-resource-stack .resource > :nth-child(3),
    #residential-resource-stack .count,
    #residential-resource-stack .diff,
    #residential-resource-stack .resource > :nth-child(2),
    #residential-resource-stack .resource > :nth-child(3),
    #commercial-resource-stack .count,
    #commercial-resource-stack .diff,
    #commercial-resource-stack .resource > :nth-child(2),
    #commercial-resource-stack .resource > :nth-child(3) {
        display: none;
    }

    #industrial-resource-stack .res {
        display: none;
    }

    #outskirts-resource-stack .resource,
    #outskirts-lumber-stack .resource,
    #military-resource-stack .resource,
    #industrial-resource-stack .resource,
    #trade-resource-stack .resource,
    #science-resource-stack .resource,
    #residential-resource-stack .resource,
    #commercial-resource-stack .resource {
        background: none !important;
        padding: 0 !important;
        border-radius: 0 !important;
    }

    #outskirts-resource-stack .resource > div,
    #outskirts-lumber-stack .resource > div,
    #military-resource-stack .resource > div,
    #industrial-resource-stack .resource > div,
    #trade-resource-stack .resource > div,
    #science-resource-stack .resource > div,
    #residential-resource-stack .resource > div,
    #commercial-resource-stack .resource > div {
        gap: .25rem;
        flex: 1 1 auto;
    }

    #city-dist-outskirts .outskirts-resource {
        background: none !important;
        padding: 0 !important;
        border-radius: 0 !important;
    }

    #city-dist-outskirts .outskirts-resource > div {
        width: auto !important;
        justify-content: flex-start !important;
    }

    .job {
        margin-left: .5rem;
        display: flex;
        min-width: 18rem;
        align-items: center;
        flex: 0 0 100%;
        width: 100%;
        gap: 0.5rem;

        .controls {
            margin-bottom: 1px;

            .sub {
                border-right: 0;
            }
        }

        .job_label {
            cursor: default;
            display: flex;
            align-items: center;

            span {
                display: inline-block;
            }

            :first-child {
                margin-right: .5rem;
                margin-bottom: 0;
                width: 10rem;
                font-size: 1rem;
                font-weight: normal;
                display: inline-block;
            }

            :nth-child(2) {
                min-width: 4.5rem;
                text-align: center;
            }

            .count {
                >span {
                    margin-left: 1rem;
                    width: 1rem;
                }

                svg {
                    width: 1rem;
                }
            }
        }

        .job-resource-wrap {
            margin-left: auto;
            display: flex;
            flex-direction: column;
            align-items: stretch;
            gap: 0.2rem;
            min-width: 7.5rem;
        }

        .job-resource {
            display: flex;
            flex-direction: column;
            gap: 0.05rem;
            min-height: 1.35rem;
            padding: 0.2rem 0.4rem;
            font-size: 0.75rem;
            white-space: nowrap;
            border: 1px solid var(--resource-border, #888);
            border-radius: 0.4rem;
            position: relative;
            overflow: hidden;
            color: #f7f4ee;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.55);
            background: rgba(0, 0, 0, 0.6);
        }

        .job-resource-line {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.25rem;
        }

        .job-resource-name {
            font-weight: 600;
        }

        .job-resource-count {
            font-variant-numeric: tabular-nums;
        }

        .job-resource-rate {
            font-size: 0.7rem;
            opacity: 0.9;
        }

        .job-resource-farmer {
            --resource-border: #8b5a2b;
        }

        .job-resource-lumberjack {
            --resource-border: #2e9b4f;
        }

        .job_label.job-avatar-label {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            text-align: left;
            gap: 0.35rem;
            position: relative;

            h3 {
                margin: 0;
                width: auto;
            }

            > :first-child {
                margin-right: 0;
                width: auto;
            }

            > :nth-child(2) {
                min-width: 0;
                text-align: left;
            }

            .job-avatar-stack {
                margin-top: 0.35rem;
                display: flex;
                flex-direction: row;
                align-items: center;
                gap: 0.2rem;
                padding: 0.3rem 0.35rem;
                border-radius: 0.5rem;
                background: rgba(8, 8, 8, 0.85);
                border: 1px solid rgba(212, 175, 55, 0.9);
                box-shadow: 0 0 4px rgba(0, 0, 0, 0.6);
                position: relative;
                box-sizing: border-box;
                transform: translate(var(--stack-offset-x, 0px), var(--stack-offset-y, 0px));
            }

            #civ-unemployed & .job-avatar-stack {
                position: absolute;
                right: calc(100% + 0.35rem);
                top: 50%;
                margin-top: 0;
                transform: translate(0, -50%) translate(var(--stack-offset-x, 0px), var(--stack-offset-y, 0px));
            }

            .job-avatar-stack.is-dragging {
                cursor: move;
            }

            .job-avatar-stack-item {
                min-width: 1.6rem;
                text-align: center;
                font-size: 0.75rem;
                line-height: 1;
                color: #f6e7b6;
                user-select: none;
            }

            .job-avatar-stack .job-avatar-control {
                position: static;
                top: auto;
                left: auto;
                right: auto;
                width: auto;
                height: auto;
                min-width: 0;
                min-height: 0;
                max-width: none;
                max-height: none;
                margin: 0;
                padding: 0;
                font-size: 1.1rem;
                line-height: 1;
                text-indent: 0;
                background: transparent;
                border: none;
                box-shadow: none;
            }

            .job-avatar-stack .job-avatar-control::before,
            .job-avatar-stack .job-avatar-control::after {
                content: none;
            }

            .job-avatar-stack .job-avatar-max {
                font-size: 0.85rem;
            }

            .job-avatar-resizer {
                position: absolute;
                right: 0.15rem;
                bottom: 0.15rem;
                width: 0.5rem;
                height: 0.5rem;
                border-right: 2px solid rgba(246, 231, 182, 0.85);
                border-bottom: 2px solid rgba(246, 231, 182, 0.85);
                cursor: se-resize;
                opacity: 0.85;
            }

            .count {
                position: absolute;
                left: 0.4rem;
                bottom: 0.45rem;
                margin: 0;
                min-width: 1.45rem;
                height: 1.45rem;
                padding: 0 0.3rem;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                border-radius: 999px;
                background: rgba(8, 8, 8, 0.85);
                border: 1px solid rgba(212, 175, 55, 0.9);
                box-shadow: 0 0 4px rgba(0, 0, 0, 0.6);
                color: #f6e7b6;
                font-size: 0.7rem;
                line-height: 1;
                transform: translate(0, 0) translate(var(--count-offset-x, 0px), var(--count-offset-y, 0px));
                cursor: default;
                touch-action: auto;
                user-select: none;
                z-index: 2;
            }

            .count.count-max {
                left: auto;
                right: 0.4rem;
                transform: translate(0, 0) translate(var(--count-max-offset-x, 0px), var(--count-max-offset-y, 0px));
                opacity: 0.85;
            }

            .count.is-draggable {
                cursor: move;
                touch-action: none;
            }

            .job-avatar-control {
                position: absolute;
                top: -0.6rem;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                width: 1.45rem;
                height: 1.45rem;
                min-width: 1.45rem;
                min-height: 1.45rem;
                max-width: 1.45rem;
                max-height: 1.45rem;
                box-sizing: border-box;
                margin: 0;
                font-size: 0.95rem;
                line-height: 1;
                font-family: 'Lato', sans-serif;
                font-variant-emoji: text;
                overflow: hidden;
                aspect-ratio: 1 / 1;
                padding: 0;
                color: #f6e7b6;
                cursor: pointer;
                transition: transform 120ms ease, box-shadow 120ms ease, filter 120ms ease;
                text-shadow: 0 0 4px rgba(0, 0, 0, 0.6);
                background: rgba(8, 8, 8, 0.85);
                border: 1px solid rgba(212, 175, 55, 0.9);
                border-radius: 999px;
                text-indent: 0;
                z-index: 1;
            }

            .job-avatar-control::before,
            .job-avatar-control::after {
                content: none;
            }

            .job-avatar-control:active {
                transform: scale(0.9);
                box-shadow: 0 0 6px rgba(255, 255, 255, 0.25);
                filter: brightness(1.05);
            }

            .job-avatar-control.avatar-control-sub {
                left: -0.6rem;
                right: auto;
                color: #ff8a8a;
                border-color: rgba(255, 138, 138, 0.95);
            }

            .job-avatar-control.avatar-control-add {
                right: -0.6rem;
                left: auto;
                color: #7ce7a1;
                border-color: rgba(124, 231, 161, 0.95);
            }

            .job-avatar-control.avatar-control-default {
                right: -0.6rem;
                left: auto;
                top: 50%;
                bottom: auto;
                color: #f6e7b6;
                border-color: rgba(246, 231, 182, 0.85);
                opacity: 0.35;
                transform: translate(0, -50%);
            }

            .job-avatar-control.avatar-control-default.is-default {
                opacity: 1;
                color: #ffe28a;
                border-color: rgba(255, 226, 138, 0.95);
            }

            .job-avatar-control.avatar-control-default:active {
                transform: translate(0, -50%) scale(0.9);
            }

            h3 a {
                display: inline-block;
                width: 4.25rem;
                height: 4.25rem;
                position: relative;
                border-radius: 9999px;
                border: 2px solid #00b7ff;
                box-shadow: 0 0 0 2px rgba(0, 183, 255, 0.35);
                background-repeat: no-repeat;
                background-position: center 20%;
                background-size: 170%;
                text-indent: -9999px;
                overflow: visible;
            }

            h3 a:hover::after,
            h3 a:focus-visible::after {
                content: attr(data-job-name);
                position: absolute;
                left: 50%;
                bottom: -1.25rem;
                transform: translateX(-50%);
                background: rgba(0, 0, 0, 0.8);
                color: #f8f8f8;
                padding: 0.1rem 0.4rem;
                border-radius: 0.25rem;
                font-size: 0.75rem;
                line-height: 1.1;
                white-space: nowrap;
                text-indent: 0;
                z-index: 2;
            }
        }

        &.job-avatar {
            flex: 0 0 100%;
            max-width: 100%;
            min-width: 0;
            margin-left: 0;
            justify-content: flex-start;
            gap: 0.5rem;
        }

        .job_label.job-avatar-unemployed h3 a {
            background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/government/unemployed.webp);
        }

        #civ-unemployed .job_label.job-avatar-label .count {
            left: -0.75rem;
            bottom: -0.7rem;
        }

        #civ-unemployed .job_label.job-avatar-label .count.count-max {
            right: -0.75rem;
            bottom: -0.7rem;
        }

        .job_label.job-avatar-farmer h3 a {
            background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/government/farmer.webp);
        }

        .job_label.job-avatar-lumberjack h3 a {
            background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/government/lumberjack.webp);
        }

        .job_label.job-avatar-miner h3 a {
            background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/government/miner.webp);
        }

        .job_label.job-avatar-professor h3 a {
            background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/government/professor.webp);
        }

        .job_label.job-avatar-cement_worker h3 a {
            background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/government/cement-worker.webp);
        }

        .job_label.job-avatar-entertainer h3 a {
            background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/government/entertainer.webp);
        }

        .job_label.job-avatar-banker h3 a {
            background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/government/banker.webp);
        }

        .job_label.craftsman-avatar-plywood h3 a {
            background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/government/resource/plywood.webp);
        }

        .job_label.craftsman-avatar-brick h3 a {
            background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/government/resource/brick.webp);
        }

        .job_label.craftsman-avatar-wrought-iron h3 a {
            background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/government/resource/wrought-iron.webp);
        }

        .job_label.craftsman-avatar .count {
            left: -0.45rem;
            bottom: -0.45rem;
        }

        .job_label.craftsman-avatar .count.count-max {
            right: -0.2rem;
            left: auto;
            bottom: -0.45rem;
        }
    }

    .sshifter {
        margin-left: 1rem;
        button {
            height: 1.5rem;
            margin-left: .25rem;
        }
    }

    .foundry {
        margin-top: 1rem;
    }

    #foundry,
    #industrial-foundry {
        display: flex;
        flex-wrap: wrap;
        gap: 0.35rem 0.5rem;
    }

    #foundry > .job,
    #industrial-foundry > .job {
        margin-left: 0;
    }

    #foundry > .job.foundry-header,
    #industrial-foundry > .job.foundry-header {
        flex: 0 0 100%;
        max-width: 100%;
        width: 100%;
    }

    #foundry > .job.craftsman-avatar-job,
    #industrial-foundry > .job.craftsman-avatar-job {
        flex: 0 0 ~"calc((100% - 1.5rem) / 4)";
        max-width: ~"calc((100% - 1.5rem) / 4)";
        width: ~"calc((100% - 1.5rem) / 4)";
        min-width: 0;
    }

    #civics {
        padding: 0.5rem;
        display: grid;
        grid-template-columns: minmax(9rem, 14rem) minmax(0, 1fr);
        column-gap: 0.75rem;
        align-items: start;
    }

    #civics > .jobList {
        width: 100%;
        max-width: none;
        justify-self: start;
        margin-left: 0;
        margin-right: auto;
        text-align: left;
    }

    #civics > #r_civics {
        min-width: 0;
    }

    #civics > .jobList #jobs {
        justify-content: flex-start;
        text-align: left;
    }

    #civics > .jobList #job-resources {
        justify-content: flex-start;
        text-align: left;
        margin-bottom: 0.35rem;
    }

    #civics > .jobList #job-army {
        width: 100%;
        margin-top: 0.5rem;
    }

    #job-army .army-panel {
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: 0.9rem;
        padding: 1.5rem 1.6rem 1.7rem;
        background: rgba(0, 0, 0, 0.35);
        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.25);
    }

    #job-army .army-panel-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
        margin-bottom: 0.7rem;
    }

    #job-army .army-scene {
        position: relative;
        height: 15rem;
        border-radius: 0.7rem;
        background: rgba(10, 10, 10, 0.5);
        border: 1px dashed rgba(255, 255, 255, 0.15);
        overflow: hidden;
    }

    #job-army .army-unit-layer {
        position: absolute;
        inset: 0;
        pointer-events: auto;
    }

    #job-army .army-idle-sprite {
        position: absolute;
        left: 50%;
        top: 60%;
        width: 15rem;
        height: 15rem;
        transform: translate(-50%, -50%);
        display: block;
        filter: drop-shadow(0 0 3px rgba(245, 197, 66, 0.5));
        pointer-events: none;
        user-select: none;
    }

    #job-army .army-unit-static {
        position: absolute;
        left: 50%;
        top: 60%;
        width: 15rem;
        height: 15rem;
        transform: translate(-50%, -50%);
        background-image: url(/photo/active-4/active-b/26.webp);
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center;
        filter: drop-shadow(0 0 3px rgba(245, 197, 66, 0.5));
        pointer-events: none;
    }

    #job-army.army-static .army-unit {
        display: none !important;
    }

    #job-army .army-barracks {
        position: absolute;
        left: 1.7rem;
        bottom: 1.2rem;
        width: 6.4rem;
        height: 4.2rem;
        background: #3a2a1a;
        border: 1px solid rgba(139, 90, 43, 0.9);
        border-radius: 0.6rem;
        box-shadow: 0 0 4px rgba(0, 0, 0, 0.4);
    }

    #job-army .army-barracks::before {
        content: "";
        position: absolute;
        left: 0.6rem;
        right: 0.6rem;
        top: -1.8rem;
        height: 1.8rem;
        background: #4b341f;
        border-radius: 0.6rem 0.6rem 0 0;
        border: 1px solid rgba(139, 90, 43, 0.9);
        border-bottom: none;
    }

    #job-army .army-gate {
        position: absolute;
        right: 1.7rem;
        bottom: 1.2rem;
        width: 5.6rem;
        height: 5.6rem;
        background: #1b1b1b;
        border: 1px solid rgba(150, 150, 150, 0.5);
        border-radius: 2.8rem 2.8rem 0.7rem 0.7rem;
        box-shadow: 0 0 4px rgba(0, 0, 0, 0.45);
    }

    #job-army .army-gate::after {
        content: "";
        position: absolute;
        left: 1.4rem;
        right: 1.4rem;
        bottom: 0;
        top: 2rem;
        background: #0c0c0c;
        border-radius: 2rem 2rem 0.5rem 0.5rem;
    }

    #job-army .army-unit {
        position: absolute;
        width: 15rem;
        height: 15rem;
        background-image: url(/photo/active-4/active-b/26.webp);
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center;
        image-rendering: auto;
        filter: drop-shadow(0 0 3px rgba(245, 197, 66, 0.5));
        transform: translate(-50%, -50%);
        pointer-events: auto;
        cursor: grab;
        animation: none;
    }

    #job-army .army-unit.army-unit-runner {
        background-image: url(/photo/active-4/active-b/26.webp);
    }

    #job-army .army-unit .army-unit-frame,
    #job-army .army-unit .army-unit-frame-rev,
    #job-army .army-unit .army-unit-idle-frame,
    #job-army .army-unit .army-unit-idle-loop-frame {
        position: absolute;
        left: 50%;
        top: 50%;
        width: 100%;
        height: 100%;
        transform: translate(-50%, -50%);
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center;
        opacity: 0;
        pointer-events: none;
    }

    #job-army .army-unit .army-unit-idle-alt {
        position: absolute;
        left: 50%;
        top: 50%;
        width: 100%;
        height: 100%;
        transform: translate(-50%, -50%);
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center;
        opacity: 0;
        pointer-events: none;
        z-index: 2;
    }

    #job-army .army-unit.is-idle-alt .army-unit-idle-alt {
        opacity: 1;
    }

    #job-army .army-unit.is-animating .army-unit-idle-alt {
        opacity: 0;
    }

    #job-army .army-unit.is-dragging {
        cursor: grabbing;
    }

    #job-army .army-unit.is-animating {
        background-image: none;
    }

    #job-army .army-unit.is-animating .army-unit-frame,
    #job-army .army-unit.is-animating .army-unit-frame-rev {
        animation: army-unit-frame 0.055s step-end 1;
    }

    /* Static garrison: disable idle/alt/runner frame animations */
    #job-army.army-static .army-unit .army-unit-frame,
    #job-army.army-static .army-unit .army-unit-frame-rev,
    #job-army.army-static .army-unit .army-unit-idle-frame,
    #job-army.army-static .army-unit .army-unit-idle-loop-frame,
    #job-army.army-static .army-unit .army-unit-idle-alt {
        animation: none !important;
        opacity: 0 !important;
        display: none !important;
    }

    #job-army .army-unit .army-unit-frame.frame-01 {
        background-image: url(/photo/active/active-2/6-6.webp);
        animation-delay: 0s;
    }

    #job-army .army-unit .army-unit-frame.frame-02 {
        background-image: url(/photo/active/active-2/7-7.webp);
        animation-delay: 0.055s;
    }

    #job-army .army-unit .army-unit-frame.frame-03 {
        background-image: url(/photo/active/active-2/8-8.webp);
        animation-delay: 0.11s;
    }

    #job-army .army-unit .army-unit-frame.frame-04 {
        background-image: url(/photo/active/active-2/9-9.webp);
        animation-delay: 0.165s;
    }

    #job-army .army-unit .army-unit-frame.frame-05 {
        background-image: url(/photo/active/active-2/10-10.webp);
        animation-delay: 0.22s;
    }

    #job-army .army-unit .army-unit-frame.frame-06 {
        background-image: url(/photo/active/active-2/11-11.webp);
        animation-delay: 0.275s;
    }

    #job-army .army-unit .army-unit-frame.frame-07 {
        background-image: url(/photo/active/active-2/12-12.webp);
        animation-delay: 0.33s;
    }

    #job-army .army-unit .army-unit-frame.frame-08 {
        background-image: url(/photo/active/active-2/13-13.webp);
        animation-delay: 0.385s;
    }

    #job-army .army-unit .army-unit-frame.frame-09 {
        background-image: url(/photo/active/active-2/14-14.webp);
        animation-delay: 0.44s;
    }

    #job-army .army-unit .army-unit-frame.frame-10 {
        background-image: url(/photo/active/active-2/15-15.webp);
        animation-delay: 0.495s;
    }

    #job-army .army-unit .army-unit-frame.frame-11 {
        background-image: url(/photo/active/active-2/16-16.webp);
        animation-delay: 0.55s;
    }

    #job-army .army-unit .army-unit-frame.frame-12 {
        background-image: url(/photo/active/active-2/17-17.webp);
        animation-delay: 0.605s;
    }

    #job-army .army-unit .army-unit-frame.frame-13 {
        background-image: url(/photo/active/active-2/18-18.webp);
        animation-delay: 0.66s;
    }

    #job-army .army-unit .army-unit-frame.frame-14 {
        background-image: url(/photo/active/active-2/19-19.webp);
        animation-delay: 0.715s;
    }

    #job-army .army-unit .army-unit-frame.frame-15 {
        background-image: url(/photo/active/active-2/20-20.webp);
        animation-delay: 0.77s;
    }

    #job-army .army-unit .army-unit-frame-rev.rev-01 {
        background-image: url(/photo/active/active-2/20-20.webp);
        animation-delay: 0.825s;
    }

    #job-army .army-unit .army-unit-frame-rev.rev-02 {
        background-image: url(/photo/active/active-2/19-19.webp);
        animation-delay: 0.88s;
    }

    #job-army .army-unit .army-unit-frame-rev.rev-03 {
        background-image: url(/photo/active/active-2/18-18.webp);
        animation-delay: 0.935s;
    }

    #job-army .army-unit .army-unit-frame-rev.rev-04 {
        background-image: url(/photo/active/active-2/17-17.webp);
        animation-delay: 0.99s;
    }

    #job-army .army-unit .army-unit-frame-rev.rev-05 {
        background-image: url(/photo/active/active-2/16-16.webp);
        animation-delay: 1.045s;
    }

    #job-army .army-unit .army-unit-frame-rev.rev-06 {
        background-image: url(/photo/active/active-2/15-15.webp);
        animation-delay: 1.1s;
    }

    #job-army .army-unit .army-unit-frame-rev.rev-07 {
        background-image: url(/photo/active/active-2/14-14.webp);
        animation-delay: 1.155s;
    }

    #job-army .army-unit .army-unit-frame-rev.rev-08 {
        background-image: url(/photo/active/active-2/13-13.webp);
        animation-delay: 1.21s;
    }

    #job-army .army-unit .army-unit-frame-rev.rev-09 {
        background-image: url(/photo/active/active-2/12-12.webp);
        animation-delay: 1.265s;
    }

    #job-army .army-unit .army-unit-frame-rev.rev-10 {
        background-image: url(/photo/active/active-2/11-11.webp);
        animation-delay: 1.32s;
    }

    #job-army .army-unit .army-unit-frame-rev.rev-11 {
        background-image: url(/photo/active/active-2/10-10.webp);
        animation-delay: 1.375s;
    }

    #job-army .army-unit .army-unit-frame-rev.rev-12 {
        background-image: url(/photo/active/active-2/9-9.webp);
        animation-delay: 1.43s;
    }

    #job-army .army-unit .army-unit-frame-rev.rev-13 {
        background-image: url(/photo/active/active-2/8-8.webp);
        animation-delay: 1.485s;
    }

    #job-army .army-unit .army-unit-frame-rev.rev-14 {
        background-image: url(/photo/active/active-2/7-7.webp);
        animation-delay: 1.54s;
    }

    #job-army .army-unit .army-unit-frame-rev.rev-15 {
        background-image: url(/photo/active/active-2/6-6.webp);
        animation-delay: 1.595s;
    }

    #job-army .army-unit.idle-intro:not(.is-animating) .army-unit-idle-frame {
        animation: army-unit-idle 2.4s step-end 1;
    }

    #job-army .army-unit.idle-loop-rev:not(.is-animating) .army-unit-idle-loop-frame {
        animation: army-unit-idle 2.4s step-end infinite;
    }

    #job-army .army-unit.is-idle-alt .army-unit-idle-frame,
    #job-army .army-unit.is-idle-alt .army-unit-idle-loop-frame {
        animation: none;
        opacity: 0;
    }

    #job-army .army-unit.is-animating .army-unit-idle-frame,
    #job-army .army-unit.is-animating .army-unit-idle-loop-frame {
        animation: none;
        opacity: 0;
    }

    #job-army .army-unit .army-unit-idle-frame.intro-01 {
        background-image: url(/photo/active-4/active-b/26.webp);
        animation-delay: 0s;
    }

    #job-army .army-unit .army-unit-idle-frame.intro-02 {
        background-image: url(/photo/active-4/active-b/27.webp);
        animation-delay: 0.2s;
    }

    #job-army .army-unit .army-unit-idle-frame.intro-03 {
        background-image: url(/photo/active-4/active-b/28.webp);
        animation-delay: 0.4s;
    }

    #job-army .army-unit .army-unit-idle-frame.intro-04 {
        background-image: url(/photo/active-4/active-b/29.webp);
        animation-delay: 0.6s;
    }

    #job-army .army-unit .army-unit-idle-frame.intro-05 {
        background-image: url(/photo/active-4/active-b/30.webp);
        animation-delay: 0.8s;
    }

    #job-army .army-unit .army-unit-idle-frame.intro-06 {
        background-image: url(/photo/active-4/active-b/31.webp);
        animation-delay: 1s;
    }

    #job-army .army-unit .army-unit-idle-frame.intro-07 {
        background-image: url(/photo/active-4/active-b/32.webp);
        animation-delay: 1.2s;
    }

    #job-army .army-unit .army-unit-idle-frame.intro-08 {
        background-image: url(/photo/active-4/active-b/33.webp);
        animation-delay: 1.4s;
    }

    #job-army .army-unit .army-unit-idle-frame.intro-09 {
        background-image: url(/photo/active-4/active-b/34.webp);
        animation-delay: 1.6s;
    }

    #job-army .army-unit .army-unit-idle-frame.intro-10 {
        background-image: url(/photo/active-4/active-b/35.webp);
        animation-delay: 1.8s;
    }

    #job-army .army-unit .army-unit-idle-frame.intro-11 {
        background-image: url(/photo/active-4/active-b/36.webp);
        animation-delay: 2s;
    }

    #job-army .army-unit .army-unit-idle-frame.intro-12 {
        background-image: url(/photo/active-4/active-b/37.webp);
        animation-delay: 2.2s;
    }

    #job-army .army-unit .army-unit-idle-loop-frame.loop-01 {
        background-image: url(/photo/active-4/active-b/37.webp);
        animation-delay: 0s;
    }

    #job-army .army-unit .army-unit-idle-loop-frame.loop-02 {
        background-image: url(/photo/active-4/active-b/36.webp);
        animation-delay: 0.2s;
    }

    #job-army .army-unit .army-unit-idle-loop-frame.loop-03 {
        background-image: url(/photo/active-4/active-b/35.webp);
        animation-delay: 0.4s;
    }

    #job-army .army-unit .army-unit-idle-loop-frame.loop-04 {
        background-image: url(/photo/active-4/active-b/34.webp);
        animation-delay: 0.6s;
    }

    #job-army .army-unit .army-unit-idle-loop-frame.loop-05 {
        background-image: url(/photo/active-4/active-b/33.webp);
        animation-delay: 0.8s;
    }

    #job-army .army-unit .army-unit-idle-loop-frame.loop-06 {
        background-image: url(/photo/active-4/active-b/32.webp);
        animation-delay: 1s;
    }

    #job-army .army-unit .army-unit-idle-loop-frame.loop-07 {
        background-image: url(/photo/active-4/active-b/31.webp);
        animation-delay: 1.2s;
    }

    #job-army .army-unit .army-unit-idle-loop-frame.loop-08 {
        background-image: url(/photo/active-4/active-b/30.webp);
        animation-delay: 1.4s;
    }

    #job-army .army-unit .army-unit-idle-loop-frame.loop-09 {
        background-image: url(/photo/active-4/active-b/29.webp);
        animation-delay: 1.6s;
    }

    #job-army .army-unit .army-unit-idle-loop-frame.loop-10 {
        background-image: url(/photo/active-4/active-b/28.webp);
        animation-delay: 1.8s;
    }

    #job-army .army-unit .army-unit-idle-loop-frame.loop-11 {
        background-image: url(/photo/active-4/active-b/27.webp);
        animation-delay: 2s;
    }

    #job-army .army-unit .army-unit-idle-loop-frame.loop-12 {
        background-image: url(/photo/active-4/active-b/26.webp);
        animation-delay: 2.2s;
    }

    @keyframes army-unit-idle {
        0% {
            opacity: 1;
        }
        8.3% {
            opacity: 1;
        }
        8.31% {
            opacity: 0;
        }
        100% {
            opacity: 0;
        }
    }
    @keyframes army-unit-frame {
        from {
            opacity: 1;
        }
        to {
            opacity: 0;
        }
    }

    #job-army .army-unit.army-unit-exit {
        opacity: 0;
        transition: opacity 0.2s ease;
    }

    @media (prefers-reduced-motion: reduce) {
        #job-army .army-unit.is-animating {
            background-image: url(/photo/active-4/active-b/26.webp);
        }

        #job-army .army-unit.army-unit-runner {
            background-image: url(/photo/active-4/active-b/26.webp);
        }

        #job-army .army-unit .army-unit-frame,
        #job-army .army-unit .army-unit-frame-rev,
        #job-army .army-unit .army-unit-idle-frame,
        #job-army .army-unit .army-unit-idle-loop-frame {
            animation: none;
            opacity: 0;
        }
    }

#cityDistrictGrid .city-army-scene .army-unit {
        position: absolute;
        width: 15rem;
        height: 15rem;
        background-image: url(/photo/active-4/active-b/26.webp);
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center;
        image-rendering: auto;
        filter: drop-shadow(0 0 3px rgba(245, 197, 66, 0.5));
        transform: translate(-50%, -50%);
        pointer-events: auto;
        cursor: grab;
        animation: none;
    }

    #cityDistrictGrid .city-army-scene .army-unit.army-unit-runner {
        background-image: url(/photo/active-4/active-b/26.webp);
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame,
    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev,
    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-frame,
    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-loop-frame {
        position: absolute;
        left: 50%;
        top: 50%;
        width: 100%;
        height: 100%;
        transform: translate(-50%, -50%);
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center;
        opacity: 0;
        pointer-events: none;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-alt {
        position: absolute;
        left: 50%;
        top: 50%;
        width: 100%;
        height: 100%;
        transform: translate(-50%, -50%);
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center;
        opacity: 0;
        pointer-events: none;
        z-index: 2;
    }

    #cityDistrictGrid .city-army-scene .army-unit.is-idle-alt .army-unit-idle-alt {
        opacity: 1;
    }

    #cityDistrictGrid .city-army-scene .army-unit.is-animating .army-unit-idle-alt {
        opacity: 0;
    }

    #cityDistrictGrid .city-army-scene .army-unit.is-dragging {
        cursor: grabbing;
    }

    #cityDistrictGrid .city-army-scene .army-unit.is-animating {
        background-image: none;
    }

    #cityDistrictGrid .city-army-scene .army-unit.is-animating .army-unit-frame,
    #cityDistrictGrid .city-army-scene .army-unit.is-animating .army-unit-frame-rev {
        animation: army-unit-frame 0.055s step-end 1;
    }

    /* Static garrison: disable idle/alt/runner frame animations */
    #cityDistrictGrid .city-army-scene.army-static .army-unit .army-unit-frame,
    #cityDistrictGrid .city-army-scene.army-static .army-unit .army-unit-frame-rev,
    #cityDistrictGrid .city-army-scene.army-static .army-unit .army-unit-idle-frame,
    #cityDistrictGrid .city-army-scene.army-static .army-unit .army-unit-idle-loop-frame,
    #cityDistrictGrid .city-army-scene.army-static .army-unit .army-unit-idle-alt {
        animation: none !important;
        opacity: 0 !important;
        display: none !important;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame.frame-01 {
        background-image: url(/photo/active/active-2/6-6.webp);
        animation-delay: 0s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame.frame-02 {
        background-image: url(/photo/active/active-2/7-7.webp);
        animation-delay: 0.055s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame.frame-03 {
        background-image: url(/photo/active/active-2/8-8.webp);
        animation-delay: 0.11s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame.frame-04 {
        background-image: url(/photo/active/active-2/9-9.webp);
        animation-delay: 0.165s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame.frame-05 {
        background-image: url(/photo/active/active-2/10-10.webp);
        animation-delay: 0.22s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame.frame-06 {
        background-image: url(/photo/active/active-2/11-11.webp);
        animation-delay: 0.275s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame.frame-07 {
        background-image: url(/photo/active/active-2/12-12.webp);
        animation-delay: 0.33s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame.frame-08 {
        background-image: url(/photo/active/active-2/13-13.webp);
        animation-delay: 0.385s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame.frame-09 {
        background-image: url(/photo/active/active-2/14-14.webp);
        animation-delay: 0.44s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame.frame-10 {
        background-image: url(/photo/active/active-2/15-15.webp);
        animation-delay: 0.495s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame.frame-11 {
        background-image: url(/photo/active/active-2/16-16.webp);
        animation-delay: 0.55s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame.frame-12 {
        background-image: url(/photo/active/active-2/17-17.webp);
        animation-delay: 0.605s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame.frame-13 {
        background-image: url(/photo/active/active-2/18-18.webp);
        animation-delay: 0.66s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame.frame-14 {
        background-image: url(/photo/active/active-2/19-19.webp);
        animation-delay: 0.715s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame.frame-15 {
        background-image: url(/photo/active/active-2/20-20.webp);
        animation-delay: 0.77s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev.rev-01 {
        background-image: url(/photo/active/active-2/20-20.webp);
        animation-delay: 0.825s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev.rev-02 {
        background-image: url(/photo/active/active-2/19-19.webp);
        animation-delay: 0.88s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev.rev-03 {
        background-image: url(/photo/active/active-2/18-18.webp);
        animation-delay: 0.935s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev.rev-04 {
        background-image: url(/photo/active/active-2/17-17.webp);
        animation-delay: 0.99s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev.rev-05 {
        background-image: url(/photo/active/active-2/16-16.webp);
        animation-delay: 1.045s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev.rev-06 {
        background-image: url(/photo/active/active-2/15-15.webp);
        animation-delay: 1.1s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev.rev-07 {
        background-image: url(/photo/active/active-2/14-14.webp);
        animation-delay: 1.155s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev.rev-08 {
        background-image: url(/photo/active/active-2/13-13.webp);
        animation-delay: 1.21s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev.rev-09 {
        background-image: url(/photo/active/active-2/12-12.webp);
        animation-delay: 1.265s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev.rev-10 {
        background-image: url(/photo/active/active-2/11-11.webp);
        animation-delay: 1.32s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev.rev-11 {
        background-image: url(/photo/active/active-2/10-10.webp);
        animation-delay: 1.375s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev.rev-12 {
        background-image: url(/photo/active/active-2/9-9.webp);
        animation-delay: 1.43s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev.rev-13 {
        background-image: url(/photo/active/active-2/8-8.webp);
        animation-delay: 1.485s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev.rev-14 {
        background-image: url(/photo/active/active-2/7-7.webp);
        animation-delay: 1.54s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev.rev-15 {
        background-image: url(/photo/active/active-2/6-6.webp);
        animation-delay: 1.595s;
    }

    #cityDistrictGrid .city-army-scene .army-unit.idle-intro:not(.is-animating) .army-unit-idle-frame {
        animation: army-unit-idle 2.4s step-end 1;
    }

    #cityDistrictGrid .city-army-scene .army-unit.idle-loop-rev:not(.is-animating) .army-unit-idle-loop-frame {
        animation: army-unit-idle 2.4s step-end infinite;
    }

    #cityDistrictGrid .city-army-scene .army-unit.is-idle-alt .army-unit-idle-frame,
    #cityDistrictGrid .city-army-scene .army-unit.is-idle-alt .army-unit-idle-loop-frame {
        animation: none;
        opacity: 0;
    }

    #cityDistrictGrid .city-army-scene .army-unit.is-animating .army-unit-idle-frame,
    #cityDistrictGrid .city-army-scene .army-unit.is-animating .army-unit-idle-loop-frame {
        animation: none;
        opacity: 0;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-frame.intro-01 {
        background-image: url(/photo/active-4/active-b/26.webp);
        animation-delay: 0s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-frame.intro-02 {
        background-image: url(/photo/active-4/active-b/27.webp);
        animation-delay: 0.2s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-frame.intro-03 {
        background-image: url(/photo/active-4/active-b/28.webp);
        animation-delay: 0.4s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-frame.intro-04 {
        background-image: url(/photo/active-4/active-b/29.webp);
        animation-delay: 0.6s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-frame.intro-05 {
        background-image: url(/photo/active-4/active-b/30.webp);
        animation-delay: 0.8s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-frame.intro-06 {
        background-image: url(/photo/active-4/active-b/31.webp);
        animation-delay: 1s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-frame.intro-07 {
        background-image: url(/photo/active-4/active-b/32.webp);
        animation-delay: 1.2s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-frame.intro-08 {
        background-image: url(/photo/active-4/active-b/33.webp);
        animation-delay: 1.4s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-frame.intro-09 {
        background-image: url(/photo/active-4/active-b/34.webp);
        animation-delay: 1.6s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-frame.intro-10 {
        background-image: url(/photo/active-4/active-b/35.webp);
        animation-delay: 1.8s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-frame.intro-11 {
        background-image: url(/photo/active-4/active-b/36.webp);
        animation-delay: 2s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-frame.intro-12 {
        background-image: url(/photo/active-4/active-b/37.webp);
        animation-delay: 2.2s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-loop-frame.loop-01 {
        background-image: url(/photo/active-4/active-b/37.webp);
        animation-delay: 0s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-loop-frame.loop-02 {
        background-image: url(/photo/active-4/active-b/36.webp);
        animation-delay: 0.2s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-loop-frame.loop-03 {
        background-image: url(/photo/active-4/active-b/35.webp);
        animation-delay: 0.4s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-loop-frame.loop-04 {
        background-image: url(/photo/active-4/active-b/34.webp);
        animation-delay: 0.6s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-loop-frame.loop-05 {
        background-image: url(/photo/active-4/active-b/33.webp);
        animation-delay: 0.8s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-loop-frame.loop-06 {
        background-image: url(/photo/active-4/active-b/32.webp);
        animation-delay: 1s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-loop-frame.loop-07 {
        background-image: url(/photo/active-4/active-b/31.webp);
        animation-delay: 1.2s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-loop-frame.loop-08 {
        background-image: url(/photo/active-4/active-b/30.webp);
        animation-delay: 1.4s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-loop-frame.loop-09 {
        background-image: url(/photo/active-4/active-b/29.webp);
        animation-delay: 1.6s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-loop-frame.loop-10 {
        background-image: url(/photo/active-4/active-b/28.webp);
        animation-delay: 1.8s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-loop-frame.loop-11 {
        background-image: url(/photo/active-4/active-b/27.webp);
        animation-delay: 2s;
    }

    #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-loop-frame.loop-12 {
        background-image: url(/photo/active-4/active-b/26.webp);
        animation-delay: 2.2s;
    }

    @keyframes army-unit-idle {
        0% {
            opacity: 1;
        }
        8.3% {
            opacity: 1;
        }
        8.31% {
            opacity: 0;
        }
        100% {
            opacity: 0;
        }
    }
    @keyframes army-unit-frame {
        from {
            opacity: 1;
        }
        to {
            opacity: 0;
        }
    }

    #cityDistrictGrid .city-army-scene .army-unit.army-unit-exit {
        opacity: 0;
        transition: opacity 0.2s ease;
    }

    @media (prefers-reduced-motion: reduce) {
        #cityDistrictGrid .city-army-scene .army-unit.is-animating {
            background-image: url(/photo/active-4/active-b/26.webp);
        }

        #cityDistrictGrid .city-army-scene .army-unit.army-unit-runner {
            background-image: url(/photo/active-4/active-b/26.webp);
        }

        #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame,
        #cityDistrictGrid .city-army-scene .army-unit .army-unit-frame-rev,
        #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-frame,
        #cityDistrictGrid .city-army-scene .army-unit .army-unit-idle-loop-frame {
            animation: none;
            opacity: 0;
        }
    }

    #civics > .jobList #job-resources .job-resource-wrap {
        margin-left: 0;
    }

    #civics > .jobList #job-resources #resources.resources-civics {
        margin-top: 0;
        padding-right: 0;
        height: auto;
        max-height: none;
        overflow: visible;
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 0.35rem 0.6rem;
    }

    #civics > .jobList #job-resources #resources.resources-civics .resources-floating-header {
        display: none;
    }

    #civics > .jobList #job-resources #resources.resources-civics .resource {
        width: 100%;
        margin: 0;
        padding: 0.2rem 0.45rem;
        border-radius: 0.55rem;
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(12, 12, 12, 0.55);
        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.25);
    }

    #civics > .jobList #job-resources #resources.resources-civics .resource.showBar {
        background-image: none;
    }

    #civics > .jobList #job-resources #resources.resources-civics .resource.showBar::after {
        display: none;
    }

    #civics > .jobList #job-resources #resources.resources-civics #resMoney.resource.showBar::after {
        display: block;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        height: auto;
        width: 100%;
        border-radius: 0.55rem;
        transform: none;
        z-index: 0;
    }

    #civics > .jobList #job-resources #resources.resources-civics #resMoney.resource.showBar > div {
        position: relative;
        z-index: 1;
    }

    #civics > .jobList #job-resources #resources.resources-civics #resMoney.resource.showBar > .diff {
        position: relative;
        z-index: 1;
        color: #fff;
    }

    #civics > .jobList #jobs > .job.job-avatar {
        flex: 0 0 ~"calc((100% - 0.75rem) / 4)";
        width: ~"calc((100% - 0.75rem) / 4)";
        max-width: ~"calc((100% - 0.75rem) / 4)";
        min-width: 0;
        order: 1;
        display: grid;
        grid-template-columns: minmax(0, 1fr);
        grid-auto-rows: max-content;
        align-items: start;
        justify-items: start;
        gap: 0.25rem;
    }

    #civics > .jobList #jobs > .job.job-avatar.job-resource-inline {
        flex-direction: row;
        align-items: center;
        gap: 0.35rem;
    }

    #civics > .jobList #jobs > .job:not(.job-avatar) {
        order: 3;
    }

    #civics > .jobList #jobs > .job.job-avatar:not(.job-resource-inline) .job-resource-wrap {
        margin-left: 0;
        margin-top: 0.25rem;
        width: 100%;
        align-self: stretch;
        grid-column: 1 / -1;
    }

    #civics > .jobList #jobs > .job.job-avatar.job-resource-inline .job-resource-wrap {
        margin-left: 0;
        margin-top: 0;
        width: auto;
        min-width: 0;
        flex: 1 1 auto;
        align-self: center;
    }

    #civics.civics-single-column {
        grid-template-columns: 1fr;
    }

    #civics.civics-single-column > #r_civics {
        display: none;
    }

    #civics .jobList #governmentFloatingPanel {
        margin-top: 1rem;
        width: 100%;
        max-width: 100%;
    }

    .civics {
        padding-top: 0;
        padding-bottom: 0;

        .revolution {
            margin-left: .375rem;
        }
    }

    .government {
        margin-bottom: 0;

        .header {
            margin-bottom: .5rem;
        }

        .govType {
            margin-bottom: .25rem;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;

            > div:first-child {
                margin-right: .5rem;
            }

            button {
                margin-top: .25rem;
                height: 1.75rem;
                line-height: 1.75rem;
                padding: 0 .5rem;
            }
        }

        .taxRate {
            height: 1.25rem;
            display: flex;

            :first-child {
                cursor: default;
                display: inline-block;
                line-height: 1.25rem;
            }
        }

        .foreign {
            margin-bottom: 1rem;

            .gaction {
                display: inline-block;
                width: 8rem;
            }

            .gaction.attack {
                display: inline-flex;
                align-items: center;
                justify-content: center;
            }

            .gaction.attack svg {
                width: 1.1rem;
                height: 1.1rem;
            }

            .glabel {
                display: inline-block;
                width: 9rem;
            }

            .glevel {
                display: inline-block;
                width: 8rem;
            }

            button {
                margin-top: .25rem;
                height: 1.75rem;
                line-height: 1.75rem;
                padding: 0 .5rem;
            }
        }
    }

    #governmentFloatingPanel {
        position: relative;
        width: 100%;
        max-width: 100%;
    }

    #governmentFloatingPanel.government-floating {
        position: fixed;
        left: .5rem;
        top: 6.5rem;
        width: ~"min(30rem, 95vw)";
        max-width: ~"min(30rem, 95vw)";
        max-height: 70vh;
        padding: .5rem .6rem;
        border-radius: .4rem;
        background: rgba(0, 0, 0, 0.45);
        border: solid .0625rem rgba(255, 255, 255, 0.08);
        overflow-y: auto;
        z-index: 20;
    }

    #governmentFloatingPanel.government-floating.is-dragging {
        cursor: move;
        opacity: 0.95;
    }

    #governmentFloatingPanel.government-floating #government {
        margin-top: 0;
    }

    #governmentFloatingHeader {
        display: flex;
        align-items: center;
        gap: .5rem;
        padding: .35rem .5rem;
        margin: -0.5rem -0.6rem .35rem;
        background: rgba(0, 0, 0, 0.55);
        border-bottom: solid .0625rem rgba(255, 255, 255, 0.08);
        cursor: move;
        user-select: none;
        touch-action: none;
        position: sticky;
        top: 0;
        z-index: 1;
    }

    .fort {
        width: 100%;
        min-height: 1rem;
        margin: .25rem 0;
        padding: .25rem 0;
        border-top: 1px solid;
        border-bottom: 1px solid;

        .current {
            position: relative;
            bottom: .0625rem;
        }

        >div {
            margin-top: .25rem;
        }

        >div:first-child {
            margin-top: 0;

            span:nth-child(1) {
                margin-right: .5rem;
            }
        }

        .defense {
            margin-right: .5rem;
        }

        .training {
            span {
                display: inline-block;
            }

            progress {
                display: inline-block;
                width: 90%;
            }
        }

        .patrol {
            position: relative;
            top: 4px;
            left: 4px;
        }

        .merctip {
            margin-top: .25rem;
        }

        .observe,
        .merc {
            height: 1.25rem;
            margin-left: .25rem;
            line-height: 0rem;
        }

        .training .observe {
            bottom: .25rem;
        }

        .bunks {
            margin: 0.25rem 0 0.125rem;
        }
    }

    .garrison {
        .header {
            margin-bottom: .5rem;
        }

        .bunks {
            margin: .75rem .75rem 0;
        }

        .bunk {
            >div {
                padding-bottom: 0;
            }

            .hire {
                padding-left: 0;
                margin-top: 1rem;
            }

            margin-bottom: 0;
            margin-right: 0.5rem;
        }

        .barracks {
            margin-bottom: .25rem;
        }

        .training {
            >span {
                display: inline-block;
            }

            >progress {
                display: inline-block;
                width: ~"calc(100% - 4rem)";
            }

            margin-bottom: .75rem;
        }

        button {
            height: 2rem;
            line-height: 1rem;
        }

        button.first {
            margin-right: .5rem;
        }

        .war {
            padding-right: 0;
            margin: .75rem .75rem 0;

            .tactics {
                margin: .5rem 0;
                height: 1.25rem;
                display: flex;

                > :first-child {
                    display: inline-block;
                    line-height: 1.125rem;
                    width: 4.75rem;
                }
            }
        }

        .launch {
            min-width: 10rem;
            margin-top: .75rem;
            margin-right: .5rem;
            text-align: center;

            .campaign {
                width: 10rem;
                white-space: normal;
                margin-top: .5rem;
                display: inline-flex;
                align-items: center;
                justify-content: center;
            }

            .campaign-launch-icon {
                display: inline-flex;
                align-items: center;
                justify-content: center;
            }

            .campaign-launch-icon svg {
                width: 1.1rem;
                height: 1.1rem;
            }

        }
    }

    #c_garrison.garrison {
        margin-top: .25rem;

        > div:nth-child(2){
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }
    }

    .armHead {
        >span {
            margin-left: 1rem;
        }
    }

    .fleet {
        display: flex;
        flex-wrap: wrap;
        width: 100%;
        min-height: 1rem;
        margin: .25rem 0;
        padding: .25rem 0;
        border-top: 1px solid;
        border-bottom: 1px solid;

        .area {
            width: 8rem;

            > span {
                display: inline-block;
                min-width: 8rem;
                white-space: nowrap;
            }

            .ship {
                text-align: center;

                .current {
                    min-width: 2.5rem;
                    width: 2.5rem;
                    font-size: 1rem;
                }
            }
        }
    }

    .pirate {
        margin-right: .75rem;
        margin-left: .75rem;
    }

    .militaryTab,
    .civic-military-content {
        .garrison {
            .battle {
                margin-bottom: .5rem;

                .war,
                .launch {
                    margin: .25rem 0 0 .75rem;
                }
            }

            .columns {
                flex-wrap: wrap;
            }
        }
    }

    .militaryTab,
    .mechTab {
        margin-left: 1rem;
    }

    #hellTabs>section {
        height: 100vh;
    }
    
    .hellReports {
        display: flex;
        justify-content: space-between;
        
        > div {
            height: ~"calc(100vh - 10rem)";
        }

        .reportList {
            top: 0;
            width: 25%;
            box-sizing: border-box;
            border-right: .0625rem solid;
            margin-right: 1rem;
        }

        .reportDisplay {
            width: 75%;
            font-size: .9rem;

            span:not(:last-child) {
                margin-right: .5rem;
            }
            
            p {
                margin-bottom: 0;
            }
            
            .reportStats {
                padding-bottom: .5rem;
                border-bottom: .0625rem solid;
                margin-bottom: .5rem;
                
                h2 {
                    margin-top: 0;
                }
                
                h2:not(:last-child) {
                    margin-right: 1rem;
                }
            }

        }

        .right {
            margin-left: .5rem;
            padding-left: .5rem;
            border-left: .0625rem solid;
        }
    }
    
    .hellAnalysis {
        display: flex;
        justify-content: space-between;
        width: 100%;
        
        .analysisColumn {
            width: 50%;
            margin: 0 10px;
        }
            
        .analysisColumn:not(:last-child) {
            border-right: .0625rem solid;
        }
        
        h2:not(:first-child) {
            margin: 0 0 0 1rem;
        }
    }
    
    #hellAnalysis {
        height: ~"calc(100vh - 10rem)";
        
        > div:not(:last-child) {
            margin-bottom: .5rem;
            border-bottom: .0625rem solid;
            padding-bottom: .5rem;
        }
    }
    
    .graphingArea {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-evenly;
        width: 100%;
    }
    
    .graphContainer {
        width: 45%;
    }
    
    .graphControls {
        div {
            display: flex;
            justify-content: space-between;
            
            h2 {
                margin: 0;
            }
        }
        
        .graphTitle {
            justify-content: center;
        }
    }
    
    .graph {
        margin: 1%;
        padding: 3%;
        border: .0625rem solid;
    }
    
    .mechAssembly {
        padding-bottom: .5rem;
        margin-bottom: .5rem;
        border-bottom: .0625rem solid;

        .button {
            height: 2rem;
        }

        .bayOptions {
            margin-top: .5rem;

            .dropdown {
                margin: 0 .5rem .25rem 0;
            }
        }

        .mechAssemble {
            margin: 1rem 0 0 0;
        }

        .checkbox {
            margin-left: .5rem;
            bottom: -.25rem
        }
    }

    .mechList {
        .mechRow {
            .gearList {
                display: inline-flex;
                &.titan {
                    display: inline-grid;
                }
                > div {
                    margin: 0 .125rem;
                }
            }
        }
    }

    .gFort {
        padding-top: .5rem;
        border-bottom: 0;
        margin-top: .5rem;

        .pad {
            margin-right: .25rem;
        }
    }

    .mad {
        margin-top: 1rem;
        max-width: 28rem;
        padding: 1rem;
        border: .0625rem solid #fff;
        border-radius: .5rem;
        background: repeating-linear-gradient(45deg,
                #fbfd84,
                #fbfd84 10px,
                #000000 10px,
                #000000 20px);

        .warn {
            background: #000;
            color: #fff;
            border-radius: .5rem;
            padding: .25rem;
            font-size: .75rem;
            text-align: center;
            margin-bottom: .25rem;
        }

        .defcon {
            display: inline-block;
            width: 50%;
            text-align: center;
        }
    }

    .armed .mad {
        border-color: #8f0000;
        background: repeating-linear-gradient(45deg,
                #8f0000,
                #8f0000 10px,
                #000000 10px,
                #000000 20px);
    }

    .pad {
        margin-left: 1rem;
    }

    .market-header {
        padding-bottom: .5rem;
        margin: .5rem 1rem;

        .trade {
            position: relative;
            bottom: -0.125rem;
            margin-left: 1rem;
        }

        .b-numberinput {
            width: 100%;
        }

        .market {
            margin-left: 1rem;
            margin-right: 1rem;

            .button {
                height: 1.6875rem;
            }

            input {
                height: 1.6875rem;
            }
        }

        .help {
            margin-left: 1rem;
        }
    }

    .galaxyTrade {
        margin-right: 0;
    }

    .trade-header {
        margin: .5rem 0;
        justify-content: center;
    }

    .tradeOffer();

    .setting {
        margin: 0 .25rem .5rem 0;
    }

    .importExport,
    .stringPack {
        margin-top: 1rem;
    }
    
    #customFile,
    #stringPackFile {
        margin-top: .75rem;
    }

    .reset {
        margin-top: 3rem;

        .notification {
            margin-top: .5rem;
        }
    }

    .cstat {
        margin-top: 1rem;
    }

    #achievePanel>div {
        width: 100%;
    }

    .achievement {
        position: relative;
        border: .0625rem solid;
        padding: .125rem;
        margin: .125rem 0;
        width: 100%;

        span {
            display: inline-block;
            > span.row {
                display: block;
            }
        }

        > :first-child {
            margin-left: .5rem;
            width: 100%;
        }

        > :nth-child(2),
        > div.perk {
            margin-left: .5rem;
        }

        .flair {
            display: block;
            position: absolute;
            right: .1875rem;
            top: .1875rem;
            height: .5rem;
            line-height: .5rem;
            margin: 0;
            padding: 0;
        }

        .flair:nth-of-type(2) {
            right: .1875rem;
            top: 1.375rem;
        }

        .flair:nth-of-type(3) {
            right: 1.3125rem;
            top: .1875rem;
        }

        .flair:nth-of-type(4) {
            right: 1.3125rem;
            top: 1.375rem;
        }

        .flair:nth-of-type(5) {
            right: 2.4375rem;
            top: .1875rem;
        }

        .flair:nth-of-type(6) {
            right: 2.4375rem;
            top: 1.375rem;
        }

        .star1,
        .star2,
        .star3,
        .star4,
        .star5 {
            width: 1rem;
        }
    }

    .governor {
        &.candidates {
            display: table;
            width: 100%;
        }
        .appoint {
            display: table-row;
            > span {
                display: table-cell;
            }
            &.header > span {
                padding-bottom: .5rem;
            }
            button {
                height: 1.5rem;
                margin-bottom: .25rem;
            }
        }
    }

    .govOffice {
        .head {
            display: flex;
            justify-content: space-between;
            align-items: center;
            .fire button {
                display: block;
                line-height: 1rem;
                padding: 0 .5rem;
            }
        }

        .tConfig {
            margin-top: .5rem;
        }
        
        .spyopConfig {
            margin-left: 0;
            
            li {
                cursor: pointer;
                display: inline-block;
                height: 1rem;
                padding: 0 .25rem 0 0;
            }
            
            li:not(:last-child):after {
                content: " -> "
            }
        }

        .options {
            margin-top: 1rem;
            .storage {
                display: flex;
                clear: right;
                > div {
                    width: 50%;
                }
                .control {
                    margin-right: 1rem;
                    input {
                        height: 1.5rem;
                    }
                }
            }
            .hRow {
                > :first-child,
                > :nth-child(2) {
                    display: inline-block;
                }
                > :nth-child(2) {
                    float: right;
                }
            }
            .bal_storage {
                display: inline-flex;
                flex-wrap: wrap;
                .ccmOption {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    position: relative;
                    width: 50%;
                    > span {
                        display: inline-block;
                        width: 7.5rem;
                        overflow-wrap: anywhere;
                        line-height: 1rem;
                    }
                    .field-body {
                        .field {
                            display: flex;
                            flex-wrap: wrap;
                            width: 5rem;
                        }
                        .control {
                            width: .5625rem;
                            margin-right: 1rem;
                            label {
                                height: 1.5rem;
                                padding: 0 .75rem;
                            }
                        }
                    }
                }
                .ccmOption:not(.m) {
                    .field-body {
                        .b3 label {
                            border-top-left-radius: 4px;
                            border-bottom-left-radius: 4px;
                        }
                        .b5 label {
                            border-top-right-radius: 4px;
                            border-bottom-right-radius: 4px;
                        }
                    }
                }
                .ccmOption.m {
                    height: 2.125rem;
                    line-height: 2.125rem;
                    .field-body {
                        .control {
                            label {
                                height: 1rem;
                                font-size: 0.75rem;
                            }
                        }
                        .b1 label {
                            border-bottom-left-radius: 0;
                        }
                        .b3 label {
                            border-top-right-radius: 4px;
                        }
                        .b4 label {
                            border-bottom-left-radius: 4px;
                        }
                        .b6 label {
                            border-top-right-radius: 0;
                        }
                    }
                }
            }
            .trash .has-addons {
                display: initial;
                .trashButton {
                    cursor: pointer;
                }
            }
        }
    }

    #perksPanel .achievement {
        margin: .25rem 0;
    }

    .space,
    .city,
    .tech {
        margin-top: .625rem;
    }

    #cityDistrictGrid {
        display: grid;
        grid-template-columns: repeat(8, 96px);
        grid-template-rows: 96px;
        grid-auto-rows: 96px;
        gap: 1rem;
        align-items: start;
        justify-content: start;
        align-content: start;
        position: relative;
        padding: 1rem;
        border-radius: 0.75rem;
        background:
            linear-gradient(rgba(10, 10, 10, 0.3), rgba(10, 10, 10, 0.3)),
            radial-gradient(circle at 20% 20%, rgba(120, 110, 80, 0.15), rgba(20, 18, 14, 0.4) 45%, rgba(10, 10, 10, 0.55) 100%);
        box-shadow: inset 0 0 18px rgba(0, 0, 0, 0.6);
        height: ~"clamp(640px, 71vh, 840px)";
        min-height: 0;
        --district-panel-width: ~"clamp(12.5rem, 22vw, 16.5rem)";
        --wood-collect-size: 7rem;
        --wood-collect-left: 10%;
        --wood-collect-top: 60%;
        --wood-collect-icon-size: 2.4rem;
        --food-collect-size: 5rem;
        --food-collect-left: 35%;
        --food-collect-top: 76%;
    }

    #cityDistrictGrid.district-panel-open {
        padding-right: ~"calc(var(--district-panel-width) + 1.5rem)";
    }

    #cityDistrictGrid::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/env/ok-env.webp?v=tree20s8) no-repeat center / cover;
        pointer-events: none;
        z-index: 0;
    }

    #cityOverlayLayer {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 1;
    }

    #cityDistrictGrid .city-bg-prop,
    #cityOverlayLayer .city-bg-prop {
        position: absolute;
        top: 3rem;
        left: 52%;
        width: 10rem;
        height: 10rem;
        background: transparent no-repeat center / contain;
        cursor: grab;
        pointer-events: auto;
        user-select: none;
        touch-action: none;
        z-index: 2;
        filter: drop-shadow(0 0 6px rgba(0, 0, 0, 0.35));
    }

    #cityDistrictGrid .city-bg-prop.is-dragging,
    #cityOverlayLayer .city-bg-prop.is-dragging {
        cursor: grabbing;
    }

    #cityDistrictGrid .city-bg-prop-jun-ying {
        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/env/jun-ying.webp);
    }

    #cityDistrictGrid .city-bg-prop-wood-collect-hit,
    #cityOverlayLayer .city-bg-prop-wood-collect-hit {
        position: absolute;
        width: var(--wood-collect-size);
        height: var(--wood-collect-size);
        left: ~"calc(var(--wood-collect-left) - (var(--wood-collect-size) * 0.5))";
        top: var(--wood-collect-top);
        cursor: pointer;
        pointer-events: auto;
        background: transparent;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        z-index: 2;
    }

    #cityDistrictGrid .city-bg-prop-food-collect-hit,
    #cityOverlayLayer .city-bg-prop-food-collect-hit {
        position: absolute;
        width: var(--food-collect-size);
        height: var(--food-collect-size);
        left: ~"calc(var(--food-collect-left) - (var(--food-collect-size) * 0.5))";
        top: var(--food-collect-top);
        cursor: pointer;
        pointer-events: auto;
        background: transparent;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        z-index: 2;
    }

    #cityDistrictGrid .city-map-debug-layer {
        position: absolute;
        inset: 0;
        z-index: 6;
        pointer-events: none;
    }

    #cityDistrictGrid.map-debug-enabled .city-map-debug-layer {
        pointer-events: auto;
    }

    #cityDistrictGrid .city-map-debug-box {
        position: absolute;
        border: 2px dashed rgba(255, 220, 120, 0.95);
        background: rgba(255, 220, 120, 0.12);
        box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.35) inset;
        display: none;
    }

    #cityDistrictGrid .city-map-debug-label {
        position: absolute;
        max-width: 16rem;
        background: rgba(0, 0, 0, 0.72);
        color: #fff;
        font-size: 0.75rem;
        line-height: 1.2;
        padding: 0.35rem 0.45rem;
        border-radius: 0.35rem;
        white-space: pre-line;
        display: none;
        pointer-events: auto;
    }

    #cityDistrictGrid .city-map-debug-toggle {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        z-index: 7;
        border: 1px solid rgba(255, 255, 255, 0.6);
        border-radius: 999px;
        padding: 0.2rem 0.65rem;
        font-size: 0.75rem;
        line-height: 1.1;
        background: rgba(0, 0, 0, 0.6);
        color: #fff;
        cursor: pointer;
        pointer-events: auto;
    }

    #cityDistrictGrid .city-map-debug-toggle.is-active {
        background: rgba(255, 220, 120, 0.9);
        color: #2a1a00;
        border-color: rgba(255, 220, 120, 0.95);
        box-shadow: 0 0 6px rgba(255, 220, 120, 0.6);
    }


    #cityDistrictGrid .city-bg-prop-wood-collect-hit .wood-collect-icon,
    #cityOverlayLayer .city-bg-prop-wood-collect-hit .wood-collect-icon {
        width: var(--wood-collect-icon-size);
        height: var(--wood-collect-icon-size);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        color: rgba(255, 214, 92, 0.95);
        filter: drop-shadow(0 0 6px rgba(255, 196, 60, 0.75))
            drop-shadow(0 0 12px rgba(255, 196, 60, 0.45));
        transition: transform 0.12s ease, opacity 0.12s ease;
        pointer-events: none;
    }

    #cityDistrictGrid .city-bg-prop-wood-collect-hit .wood-collect-icon svg,
    #cityOverlayLayer .city-bg-prop-wood-collect-hit .wood-collect-icon svg {
        width: 100%;
        height: 100%;
        display: block;
    }

    #cityDistrictGrid .city-bg-prop-wood-collect-hit.is-clicked .wood-collect-icon,
    #cityOverlayLayer .city-bg-prop-wood-collect-hit.is-clicked .wood-collect-icon {
        transform: scale(0.92);
        opacity: 0.85;
    }

    #cityDistrictGrid .city-bg-prop-wood-collect-hit::before,
    #cityOverlayLayer .city-bg-prop-wood-collect-hit::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/1.tree.webp?v=tree30) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(255, 210, 90, 0.9))
            drop-shadow(0 0 22px rgba(255, 170, 40, 0.7));
        animation: wood-collect-glow 2.2s ease-in-out infinite;
        transition: transform 0.12s ease;
    }

    #cityDistrictGrid .city-bg-prop-wood-collect-hit.is-clicked::before,
    #cityOverlayLayer .city-bg-prop-wood-collect-hit.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-archite-tree {
        top: 60%;
        left: 10%;
        width: 7rem;
        height: 7rem;
        background-position: center bottom;
        z-index: 3;
        transform-origin: top left;
    }

    #cityDistrictGrid .city-bg-prop-archite-tree .city-bg-prop-inner {
        width: 100%;
        height: 100%;
        background: transparent no-repeat center bottom / contain;
        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/1.tree.webp);
        animation: wood-collect-glow 2.2s ease-in-out infinite;
        filter: drop-shadow(0 0 10px rgba(255, 210, 90, 0.9))
            drop-shadow(0 0 22px rgba(255, 170, 40, 0.7));
        transition: transform 0.12s ease;
        pointer-events: none;
    }

    #cityDistrictGrid .city-bg-prop-archite-tree.is-clicked .city-bg-prop-inner {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-amber-collect {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-amber-collect .city-bg-prop-inner {
        width: 100%;
        height: 100%;
        background: transparent no-repeat center / contain;
        background-image: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/2-hupo.webp);
        filter: drop-shadow(0 0 8px rgba(255, 205, 120, 0.65))
            drop-shadow(0 0 16px rgba(255, 160, 70, 0.45));
        transition: transform 0.12s ease;
        pointer-events: none;
    }

    #cityDistrictGrid .city-bg-prop-amber-collect.is-clicked .city-bg-prop-inner {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-grove-build {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-grove-build::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/4shucong.webp?v=grove1) no-repeat center / contain;
        filter: drop-shadow(0 0 10px rgba(140, 240, 120, 0.9))
            drop-shadow(0 0 20px rgba(100, 200, 70, 0.7));
        opacity: 0.9;
        pointer-events: none;
        transform-origin: center;
        animation: grove-glow 1.8s ease-in-out infinite;
        transition: transform 0.12s ease, opacity 0.12s ease;
    }

    #cityDistrictGrid .city-bg-prop-grove-build::after,
    #cityDistrictGrid .city-bg-prop-farm-build::after,
    #cityDistrictGrid .city-bg-prop-lumberyard::after,
    #cityDistrictGrid .city-bg-prop-sawmill::after,
    #cityDistrictGrid .city-bg-prop-cottage::after,
    #cityDistrictGrid .city-bg-prop-coal-mine::after,
    #cityDistrictGrid .city-bg-prop-storage-yard::after,
    #cityDistrictGrid .city-bg-prop-smelter::after,
    #cityDistrictGrid .city-bg-prop-shed::after,
    #cityDistrictGrid .city-bg-prop-university::after,
    #cityDistrictGrid .city-bg-prop-garrison::after,
    #cityDistrictGrid .city-bg-prop-silo::after,
    #cityDistrictGrid .city-bg-prop-bank::after,
    #cityDistrictGrid .city-bg-prop-mine::after,
    #cityDistrictGrid .city-bg-prop-cement::after,
    #cityDistrictGrid .city-bg-prop-foundry::after,
    #cityDistrictGrid .city-bg-prop-library::after,
    #cityDistrictGrid .city-bg-prop-amphitheatre::after {
        content: attr(data-label);
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%) scale(0.98);
        padding: 0.1rem 0.4rem;
        border-radius: 0.45rem;
        background: rgba(12, 34, 18, 0.85);
        color: #e8ffe8;
        font-size: 0.65rem;
        font-weight: 700;
        line-height: 1.2;
        white-space: nowrap;
        border: 1px solid rgba(140, 240, 120, 0.75);
        box-shadow: 0 0 6px rgba(120, 220, 80, 0.55);
        text-shadow: 0 0 4px rgba(0, 0, 0, 0.6);
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.12s ease, transform 0.12s ease;
        z-index: 2;
    }


    #cityDistrictGrid .city-bg-prop-grove-build:hover::after,
    #cityDistrictGrid .city-bg-prop-farm-build:hover::after,
    #cityDistrictGrid .city-bg-prop-lumberyard:hover::after,
    #cityDistrictGrid .city-bg-prop-sawmill:hover::after,
    #cityDistrictGrid .city-bg-prop-cottage:hover::after,
    #cityDistrictGrid .city-bg-prop-coal-mine:hover::after,
    #cityDistrictGrid .city-bg-prop-storage-yard:hover::after,
    #cityDistrictGrid .city-bg-prop-smelter:hover::after,
    #cityDistrictGrid .city-bg-prop-shed:hover::after,
    #cityDistrictGrid .city-bg-prop-university:hover::after,
    #cityDistrictGrid .city-bg-prop-garrison:hover::after,
    #cityDistrictGrid .city-bg-prop-silo:hover::after,
    #cityDistrictGrid .city-bg-prop-bank:hover::after,
    #cityDistrictGrid .city-bg-prop-mine:hover::after,
    #cityDistrictGrid .city-bg-prop-cement:hover::after,
    #cityDistrictGrid .city-bg-prop-foundry:hover::after,
    #cityDistrictGrid .city-bg-prop-library:hover::after,
    #cityDistrictGrid .city-bg-prop-amphitheatre:hover::after {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }

    #cityDistrictGrid .city-bg-prop-grove-build,
    #cityDistrictGrid .city-bg-prop-farm-build,
    #cityDistrictGrid .city-bg-prop-lumberyard,
    #cityDistrictGrid .city-bg-prop-sawmill,
    #cityDistrictGrid .city-bg-prop-cottage,
    #cityDistrictGrid .city-bg-prop-coal-mine,
    #cityDistrictGrid .city-bg-prop-storage-yard,
    #cityDistrictGrid .city-bg-prop-smelter,
    #cityDistrictGrid .city-bg-prop-shed,
    #cityDistrictGrid .city-bg-prop-university,
    #cityDistrictGrid .city-bg-prop-garrison,
    #cityDistrictGrid .city-bg-prop-silo,
    #cityDistrictGrid .city-bg-prop-bank,
    #cityDistrictGrid .city-bg-prop-mine,
    #cityDistrictGrid .city-bg-prop-cement,
    #cityDistrictGrid .city-bg-prop-foundry,
    #cityDistrictGrid .city-bg-prop-library,
    #cityDistrictGrid .city-bg-prop-amphitheatre {
        --city-prop-hit-inset: 12%;
    }

    #cityDistrictGrid .city-bg-prop-grove-build .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-farm-build .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-lumberyard .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-sawmill .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-cottage .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-coal-mine .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-storage-yard .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-smelter .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-shed .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-university .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-garrison .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-silo .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-bank .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-mine .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-cement .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-foundry .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-library .city-bg-prop-inner,
    #cityDistrictGrid .city-bg-prop-amphitheatre .city-bg-prop-inner {
        position: absolute;
        inset: var(--city-prop-hit-inset);
        background: transparent;
        pointer-events: auto;
    }

    #cityDistrictGrid .city-bg-prop-grove-build .city-bg-prop-inner {
        background: transparent;
        transition: transform 0.12s ease;
    }

    #cityDistrictGrid .city-bg-prop-grove-build.is-clicked .city-bg-prop-inner {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-grove-build.is-clicked::before {
        transform: scale(0.92);
        opacity: 0.8;
    }

    #cityDistrictGrid .city-bg-prop-grove-build .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-farm-build .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-lumberyard .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-sawmill .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-cottage .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-coal-mine .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-storage-yard .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-smelter .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-shed .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-university .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-garrison .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-silo .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-bank .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-mine .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-cement .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-foundry .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-library .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-amphitheatre .city-bg-prop-count {
        position: absolute;
        left: 50%;
        top: -0.55rem;
        transform: translateX(-50%);
        padding: 0.05rem 0.35rem;
        border-radius: 999px;
        background: rgba(12, 34, 18, 0.8);
        color: #e8ffe8;
        font-size: 0.65rem;
        font-weight: 700;
        line-height: 1.2;
        border: 1px solid rgba(140, 240, 120, 0.85);
        box-shadow: 0 0 8px rgba(120, 220, 80, 0.65);
        text-shadow: 0 0 4px rgba(0, 0, 0, 0.6);
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.15s ease, transform 0.15s ease;
        z-index: 1;
    }

    #cityDistrictGrid .city-bg-prop-grove-build.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-farm-build.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-lumberyard.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-sawmill.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-cottage.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-coal-mine.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-storage-yard.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-smelter.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-shed.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-university.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-garrison.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-silo.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-bank.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-mine.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-cement.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-foundry.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-library.has-count .city-bg-prop-count,
    #cityDistrictGrid .city-bg-prop-amphitheatre.has-count .city-bg-prop-count {
        opacity: 1;
        transform: translateX(-50%) translateY(-2px);
    }

    #cityDistrictGrid .city-bg-prop-lumberyard .city-bg-prop-count {
        top: 50%;
        transform: translate(-50%, -50%);
    }

    #cityDistrictGrid .city-bg-prop-lumberyard.has-count .city-bg-prop-count {
        transform: translate(-50%, -50%);
    }

    #cityDistrictGrid .city-bg-prop-farm-build {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-farm-build::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/5-nongchang.webp?v=farm1) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 8px rgba(255, 214, 92, 0.9))
            drop-shadow(0 0 18px rgba(255, 170, 40, 0.7));
        transition: transform 0.12s ease;
        animation: farm-glow 1.8s ease-in-out infinite;
    }

    #cityDistrictGrid .city-bg-prop-farm-build.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-lumberyard {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-lumberyard::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/famuchang.webp?v=famuchang2) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(90, 220, 120, 0.9))
            drop-shadow(0 0 22px rgba(60, 180, 90, 0.7));
        transition: transform 0.12s ease;
        animation: none;
    }

    #cityDistrictGrid .city-bg-prop-lumberyard.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-sawmill {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-sawmill::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/8-famuchang.webp?v=sawmill1) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(90, 220, 120, 0.9))
            drop-shadow(0 0 22px rgba(60, 180, 90, 0.7));
        transition: transform 0.12s ease;
        animation: lumberyard-glow 1.8s ease-in-out infinite;
    }

    #cityDistrictGrid .city-bg-prop-sawmill.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-cottage {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-cottage::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/maowu.webp?v=maowu1) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(255, 220, 90, 0.9))
            drop-shadow(0 0 22px rgba(220, 180, 40, 0.7));
        transition: transform 0.12s ease;
        animation: none;
    }

    #cityDistrictGrid .city-bg-prop-cottage.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-coal-mine {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-coal-mine::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/meikuang.webp?v=meikuang1) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(10, 10, 10, 0.9))
            drop-shadow(0 0 22px rgba(0, 0, 0, 0.85));
        transition: transform 0.12s ease;
        animation: none;
    }

    #cityDistrictGrid .city-bg-prop-coal-mine.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-storage-yard {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-storage-yard::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/huochang.webp?v=huochang1) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(120, 80, 40, 0.9))
            drop-shadow(0 0 22px rgba(90, 60, 30, 0.75));
        transition: transform 0.12s ease;
        animation: none;
    }

    #cityDistrictGrid .city-bg-prop-storage-yard.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-smelter {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-smelter::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/yelianchang.webp?v=yelianchang1) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(184, 115, 51, 0.9))
            drop-shadow(0 0 22px rgba(150, 90, 45, 0.7));
        transition: transform 0.12s ease;
        animation: none;
    }

    #cityDistrictGrid .city-bg-prop-smelter .smelter-gear {
        position: absolute;
        left: 50%;
        top: -0.6rem;
        width: 1.2rem;
        height: 1.2rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        transform: translate(1.1rem, -50%);
        pointer-events: auto;
        cursor: pointer;
        filter: drop-shadow(0 0 4px rgba(184, 115, 51, 0.55))
            drop-shadow(0 0 8px rgba(150, 90, 45, 0.45));
        opacity: 0.95;
        z-index: 2;
    }

    #cityDistrictGrid .city-bg-prop-smelter .smelter-gear svg {
        width: 100%;
        height: 100%;
        display: block;
    }

    #cityDistrictGrid .city-bg-prop-smelter .smelter-gear .gear {
        fill: #d18b39;
    }

    #cityDistrictGrid .city-bg-prop-smelter.is-clicked .smelter-gear {
        transform: translate(1.1rem, -50%) scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-smelter.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-shed {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-shed::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/6-wopeng.webp?v=wopeng1) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 8px rgba(140, 100, 60, 0.9))
            drop-shadow(0 0 18px rgba(110, 75, 45, 0.7));
        transition: transform 0.12s ease;
        animation: shed-glow 1.8s ease-in-out infinite;
    }

    #cityDistrictGrid .city-bg-prop-shed.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-university {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-university::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/7-daxue.webp?v=daxue1) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(90, 160, 255, 0.9))
            drop-shadow(0 0 22px rgba(60, 120, 220, 0.7));
        transition: transform 0.12s ease;
        animation: university-glow 1.8s ease-in-out infinite;
    }

    #cityDistrictGrid .city-bg-prop-university.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-garrison {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-garrison::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/9-junying.webp?v=junying1) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(255, 90, 90, 0.9))
            drop-shadow(0 0 22px rgba(200, 50, 50, 0.7));
        transition: transform 0.12s ease;
        animation: garrison-glow 1.8s ease-in-out infinite;
    }

    #cityDistrictGrid .city-bg-prop-garrison.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-silo {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-silo::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/10-liangcang.webp?v=liangcang1) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(255, 220, 90, 0.9))
            drop-shadow(0 0 22px rgba(220, 180, 40, 0.7));
        transition: transform 0.12s ease;
        animation: silo-glow 1.8s ease-in-out infinite;
    }

    #cityDistrictGrid .city-bg-prop-silo.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-bank {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-bank::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/11-bank.webp?v=bank1) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(255, 210, 90, 0.9))
            drop-shadow(0 0 22px rgba(220, 170, 40, 0.7));
        transition: transform 0.12s ease;
        animation: bank-glow 1.8s ease-in-out infinite;
    }

    #cityDistrictGrid .city-bg-prop-bank.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-mine {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-mine::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/12-kuangjing2.webp?v=mine1) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(220, 220, 220, 0.9))
            drop-shadow(0 0 22px rgba(180, 180, 180, 0.7));
        transition: transform 0.12s ease;
        animation: mine-glow 1.8s ease-in-out infinite;
    }

    #cityDistrictGrid .city-bg-prop-mine.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-cement {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-cement::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/13-shuinichang.webp?v=cement1) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(220, 220, 220, 0.9))
            drop-shadow(0 0 22px rgba(180, 180, 180, 0.7));
        transition: transform 0.12s ease;
        animation: cement-glow 1.8s ease-in-out infinite;
    }

    #cityDistrictGrid .city-bg-prop-cement.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-foundry {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-foundry::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/14-zhuzaochang-2.webp?v=foundry2) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(184, 115, 51, 0.9))
            drop-shadow(0 0 22px rgba(150, 90, 45, 0.7));
        transition: transform 0.12s ease;
        animation: foundry-glow 1.8s ease-in-out infinite;
    }

    #cityDistrictGrid .city-bg-prop-foundry.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-library {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-library::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/15-library.webp?v=library1) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(184, 115, 51, 0.9))
            drop-shadow(0 0 22px rgba(150, 90, 45, 0.7));
        transition: transform 0.12s ease;
        animation: library-glow 1.8s ease-in-out infinite;
    }

    #cityDistrictGrid .city-bg-prop-library.is-clicked::before {
        transform: scale(0.92);
    }

    #cityDistrictGrid .city-bg-prop-amphitheatre {
        position: absolute;
        z-index: 3;
        cursor: pointer;
        pointer-events: auto;
        user-select: none;
        -webkit-user-drag: none;
        touch-action: manipulation;
        transform-origin: center;
    }

    #cityDistrictGrid .city-bg-prop-amphitheatre::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/17-circle-juchang-1.webp?v=amphitheatre2) no-repeat center / contain;
        pointer-events: none;
        filter: drop-shadow(0 0 10px rgba(170, 120, 255, 0.9))
            drop-shadow(0 0 22px rgba(120, 80, 220, 0.7));
        transition: transform 0.12s ease;
        animation: none;
    }

    #cityDistrictGrid .city-bg-prop-amphitheatre.is-clicked::before {
        transform: scale(0.92);
    }

    @keyframes farm-glow {
        0%, 100% {
            filter: drop-shadow(0 0 8px rgba(255, 214, 92, 0.9))
                drop-shadow(0 0 18px rgba(255, 170, 40, 0.7));
        }
        50% {
            filter: drop-shadow(0 0 5px rgba(255, 214, 92, 0.7))
                drop-shadow(0 0 12px rgba(255, 170, 40, 0.5));
        }
    }


    @keyframes wood-collect-glow {
        0%, 100% {
            filter: drop-shadow(0 0 8px rgba(255, 210, 90, 0.8))
                drop-shadow(0 0 18px rgba(255, 170, 40, 0.6));
        }
        50% {
            filter: drop-shadow(0 0 4px rgba(255, 210, 90, 0.5))
                drop-shadow(0 0 10px rgba(255, 170, 40, 0.35));
        }
    }

    @keyframes grove-glow {
        0%, 100% {
            opacity: 0.9;
            filter: drop-shadow(0 0 10px rgba(140, 240, 120, 0.9))
                drop-shadow(0 0 20px rgba(100, 200, 70, 0.7));
        }
        50% {
            opacity: 0.6;
            filter: drop-shadow(0 0 6px rgba(120, 220, 80, 0.7))
                drop-shadow(0 0 12px rgba(90, 180, 60, 0.5));
        }
    }

    @keyframes lumberyard-glow {
        0%, 100% {
            filter: drop-shadow(0 0 10px rgba(90, 220, 120, 0.9))
                drop-shadow(0 0 22px rgba(60, 180, 90, 0.7));
        }
        50% {
            filter: drop-shadow(0 0 6px rgba(90, 220, 120, 0.7))
                drop-shadow(0 0 14px rgba(60, 180, 90, 0.5));
        }
    }

    @keyframes shed-glow {
        0%, 100% {
            filter: drop-shadow(0 0 8px rgba(140, 100, 60, 0.9))
                drop-shadow(0 0 18px rgba(110, 75, 45, 0.7));
        }
        50% {
            filter: drop-shadow(0 0 4px rgba(140, 100, 60, 0.7))
                drop-shadow(0 0 10px rgba(110, 75, 45, 0.5));
        }
    }

    @keyframes university-glow {
        0%, 100% {
            filter: drop-shadow(0 0 10px rgba(90, 160, 255, 0.9))
                drop-shadow(0 0 22px rgba(60, 120, 220, 0.7));
        }
        50% {
            filter: drop-shadow(0 0 6px rgba(90, 160, 255, 0.7))
                drop-shadow(0 0 14px rgba(60, 120, 220, 0.5));
        }
    }

    @keyframes garrison-glow {
        0%, 100% {
            filter: drop-shadow(0 0 10px rgba(255, 90, 90, 0.9))
                drop-shadow(0 0 22px rgba(200, 50, 50, 0.7));
        }
        50% {
            filter: drop-shadow(0 0 6px rgba(255, 90, 90, 0.7))
                drop-shadow(0 0 14px rgba(200, 50, 50, 0.5));
        }
    }

    @keyframes silo-glow {
        0%, 100% {
            filter: drop-shadow(0 0 10px rgba(255, 220, 90, 0.9))
                drop-shadow(0 0 22px rgba(220, 180, 40, 0.7));
        }
        50% {
            filter: drop-shadow(0 0 6px rgba(255, 220, 90, 0.7))
                drop-shadow(0 0 14px rgba(220, 180, 40, 0.5));
        }
    }

    @keyframes bank-glow {
        0%, 100% {
            filter: drop-shadow(0 0 10px rgba(255, 210, 90, 0.9))
                drop-shadow(0 0 22px rgba(220, 170, 40, 0.7));
        }
        50% {
            filter: drop-shadow(0 0 6px rgba(255, 210, 90, 0.7))
                drop-shadow(0 0 14px rgba(220, 170, 40, 0.5));
        }
    }

    @keyframes mine-glow {
        0%, 100% {
            filter: drop-shadow(0 0 10px rgba(220, 220, 220, 0.9))
                drop-shadow(0 0 22px rgba(180, 180, 180, 0.7));
        }
        50% {
            filter: drop-shadow(0 0 6px rgba(220, 220, 220, 0.7))
                drop-shadow(0 0 14px rgba(180, 180, 180, 0.5));
        }
    }

    @keyframes cement-glow {
        0%, 100% {
            filter: drop-shadow(0 0 10px rgba(220, 220, 220, 0.9))
                drop-shadow(0 0 22px rgba(180, 180, 180, 0.7));
        }
        50% {
            filter: drop-shadow(0 0 6px rgba(220, 220, 220, 0.7))
                drop-shadow(0 0 14px rgba(180, 180, 180, 0.5));
        }
    }

    @keyframes foundry-glow {
        0%, 100% {
            filter: drop-shadow(0 0 10px rgba(184, 115, 51, 0.9))
                drop-shadow(0 0 22px rgba(150, 90, 45, 0.7));
        }
        50% {
            filter: drop-shadow(0 0 6px rgba(184, 115, 51, 0.7))
                drop-shadow(0 0 14px rgba(150, 90, 45, 0.5));
        }
    }

    @keyframes library-glow {
        0%, 100% {
            filter: drop-shadow(0 0 10px rgba(184, 115, 51, 0.9))
                drop-shadow(0 0 22px rgba(150, 90, 45, 0.7));
        }
        50% {
            filter: drop-shadow(0 0 6px rgba(184, 115, 51, 0.7))
                drop-shadow(0 0 14px rgba(150, 90, 45, 0.5));
        }
    }

    @keyframes amphitheatre-glow {
        0%, 100% {
            filter: drop-shadow(0 0 10px rgba(170, 120, 255, 0.9))
                drop-shadow(0 0 22px rgba(120, 80, 220, 0.7));
        }
        50% {
            filter: drop-shadow(0 0 6px rgba(170, 120, 255, 0.7))
                drop-shadow(0 0 14px rgba(120, 80, 220, 0.5));
        }
    }



    #cityDistrictGrid .wood-collect-fx {
        position: absolute;
        z-index: 4;
        pointer-events: none;
        color: #ffd25a;
        font-size: .85rem;
        font-weight: 700;
        text-shadow: 0 0 6px rgba(255, 170, 40, 0.7), 0 0 12px rgba(255, 120, 20, 0.45);
        animation: wood-collect-fx 0.8s ease-out forwards;
        transform: translate(-50%, -50%);
        user-select: none;
    }

    #cityDistrictGrid .food-collect-fx {
        position: absolute;
        z-index: 4;
        pointer-events: none;
        color: #7cff9a;
        font-size: .85rem;
        font-weight: 700;
        text-shadow: 0 0 6px rgba(80, 255, 140, 0.75), 0 0 12px rgba(40, 200, 110, 0.5);
        animation: wood-collect-fx 0.8s ease-out forwards;
        transform: translate(-50%, -50%);
        user-select: none;
    }

    #cityDistrictGrid .food-collect-press {
        position: absolute;
        z-index: 3;
        pointer-events: none;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/3-shiwu.webp) no-repeat center / contain;
        transform-origin: center;
        animation: food-collect-press 0.2s ease-out forwards;
    }

    #cityDistrictGrid .wood-collect-press {
        position: absolute;
        z-index: 3;
        pointer-events: none;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/archite/1.tree.webp?v=tree30) no-repeat center / contain;
        transform-origin: center;
        animation: food-collect-press 0.2s ease-out forwards;
    }

    @keyframes food-collect-press {
        0% {
            transform: scale(1);
            opacity: 0.9;
        }
        50% {
            transform: scale(0.92);
            opacity: 1;
        }
        100% {
            transform: scale(1);
            opacity: 0;
        }
    }

    @keyframes wood-collect-fx {
        0% {
            opacity: 0;
            transform: translate(-50%, -50%) translateY(6px) scale(0.9);
        }
        25% {
            opacity: 1;
        }
        100% {
            opacity: 0;
            transform: translate(-50%, -50%) translateY(-18px) scale(1.05);
        }
    }

    #cityDistrictGrid .city-army-scene {
        position: absolute;
        inset: 0;
        z-index: 3;
        pointer-events: none;
    }

    #cityDistrictGrid .city-army-scene .army-unit-layer {
        position: absolute;
        inset: 0;
        pointer-events: none;
    }

    #cityDistrictGrid .city-army-scene .army-idle-sprite {
        position: absolute;
        left: 50%;
        top: 60%;
        width: 15rem;
        height: 15rem;
        transform: translate(-50%, -50%);
        display: block;
        filter: drop-shadow(0 0 3px rgba(245, 197, 66, 0.5));
        pointer-events: none;
        user-select: none;
    }

    #cityDistrictGrid .city-army-scene .army-unit-static {
        position: absolute;
        left: 50%;
        top: 60%;
        width: 15rem;
        height: 15rem;
        transform: translate(-50%, -50%);
        background-image: url(/photo/active-4/active-b/26.webp);
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center;
        filter: drop-shadow(0 0 3px rgba(245, 197, 66, 0.5));
        pointer-events: none;
    }

    #cityDistrictGrid .city-army-scene .army-unit {
        position: absolute;
        width: 15rem;
        height: 15rem;
        background-image: url(/photo/active-4/active-b/26.webp);
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center;
        image-rendering: auto;
        filter: drop-shadow(0 0 3px rgba(245, 197, 66, 0.5));
        transform: translate(-50%, -50%);
        pointer-events: none;
        animation: none;
    }

    #cityDistrictGrid .city-army-scene .army-unit,
    #cityDistrictGrid .city-army-scene .army-unit-static,
    #cityDistrictGrid .city-army-scene .army-idle-sprite {
        width: 7.5rem;
        height: 7.5rem;
    }

    #cityDistrictGrid > .city {
        width: 100%;
        margin: 0;
        position: relative;
        z-index: 4;
        border-radius: 0.6rem;
        box-shadow: 0 0 0 2px rgba(215, 179, 90, 0.95), 0 0 12px rgba(215, 179, 90, 0.35);
    }

    #cityDistrictGrid > .city.city-district-window {
        cursor: default;
        box-shadow: 0 0 0 2px rgba(215, 179, 90, 0.95), 0 10px 22px rgba(0, 0, 0, 0.45);
        transform-origin: top center;
        order: 1;
    }

    #cityDistrictGrid > .city.city-district-window.is-dragging {
        z-index: 5;
    }

    #cityDistrictGrid > .city.city-district-window .name {
        cursor: move;
        user-select: none;
    }

    #cityDistrictGrid > .city.city-district-window.district-collapsed {
        display: none !important;
    }

    #cityDistrictGrid > .city.city-district-window.district-placeholder {
        visibility: hidden;
        pointer-events: none;
        box-shadow: none;
    }

    #cityDistrictGrid > .city.city-district-window:not(.district-collapsed) {
        position: absolute;
        right: 1rem;
        top: var(--district-panel-top, 1rem);
        width: var(--district-panel-width);
        max-width: ~"calc(100% - 2rem)";
        max-height: ~"calc(100% - var(--district-panel-top, 1rem) - 1rem)";
        z-index: 6;
        display: flex;
        flex-direction: column;
        align-items: stretch;
        flex-wrap: nowrap;
        gap: 0.6rem;
        overflow: auto;
    }

    #cityDistrictGrid > .city.city-district-window:not(.district-collapsed) .action {
        width: 100%;
        margin: 0;
        flex: 0 0 auto;
    }

    #cityDistrictGrid > .city.city-district-window:not(.district-collapsed) .action a.button,
    #cityDistrictGrid > .city.city-district-window:not(.district-collapsed) .action span.oldTech {
        width: 100%;
    }

    #cityDistrictGrid > .city.city-district-window.district-collapsed > :not(.district-toggle) {
        display: none !important;
    }

    #cityDistrictGrid > .city.city-district-window .district-toggle {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
    }

    #cityDistrictGrid > .city.city-district-window:not(.district-collapsed) .district-toggle {
        display: none;
    }

    #cityDistrictGrid > .city.city-district-window .district-backdrop {
        position: absolute;
        inset: 0;
        z-index: 0;
    }

    #cityDistrictGrid > .city.city-district-window.district-collapsed .district-backdrop {
        display: none;
    }

    #cityDistrictGrid > .city.city-district-window > .action,
    #cityDistrictGrid > .city.city-district-window > div,
    #cityDistrictGrid > .city.city-district-window .district-close {
        position: relative;
        z-index: 1;
    }

    #cityDistrictGrid > .city.city-district-window .district-toggle-button {
        width: 86px !important;
        height: 86px !important;
        min-width: 86px;
        min-height: 86px;
        max-width: 86px;
        max-height: 86px;
        border-radius: 50% !important;
        border: 3px solid rgba(255, 220, 130, 0.9);
        background: #1a1410;
        color: #f7d88a;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px 18px rgba(0, 0, 0, 0.6), 0 0 18px rgba(235, 200, 110, 0.45);
        cursor: pointer;
        padding: 0 !important;
        overflow: hidden;
        box-sizing: border-box;
        flex: 0 0 86px;
        aspect-ratio: 1 / 1;
        line-height: 0;
        font-size: 0;
        transform: none !important;
        clip-path: circle(50% at 50% 50%);
    }

    #cityDistrictGrid > .city.city-district-window .district-toggle-button:hover {
        box-shadow: 0 10px 22px rgba(0, 0, 0, 0.65), 0 0 22px rgba(255, 220, 130, 0.7);
        color: #ffe9b3;
    }

    #cityDistrictGrid > .city.city-district-window .district-toggle-icon {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        background-repeat: no-repeat;
        background-position: center;
        background-size: cover;
        display: block;
        clip-path: circle(50% at 50% 50%);
    }

    #city-dist-outskirts.district-collapsed .district-toggle-button,
    #city-dist-outskirts.district-collapsed .district-toggle-icon {
        width: 86px !important;
        height: 86px !important;
        border-radius: 50% !important;
        clip-path: circle(50% at 50% 50%);
    }

    #cityDistrictGrid > .city.city-district-window .district-close {
        position: absolute;
        right: 0.4rem;
        top: 0.4rem;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        border: 1px solid rgba(255, 255, 255, 0.35);
        background: rgba(0, 0, 0, 0.5);
        color: #fff;
        font-size: 16px;
        line-height: 22px;
        text-align: center;
        cursor: pointer;
        padding: 0;
    }

    #cityDistrictGrid > .city.city-district-window.district-collapsed .district-close {
        display: none;
    }

    #cityDistrictLinks {
        position: fixed;
        left: 0;
        top: 0;
        width: 100vw;
        height: 100vh;
        pointer-events: none;
        z-index: 100000;
    }

    #cityDistrictLinks .road-base {
        stroke: rgba(60, 40, 20, 0.75);
        stroke-width: 10;
        stroke-linecap: round;
        stroke-linejoin: round;
        filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.35));
        vector-effect: non-scaling-stroke;
    }

    #cityDistrictLinks .road-center {
        stroke: rgba(255, 238, 200, 0.9);
        stroke-width: 4;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-dasharray: 8 6;
        vector-effect: non-scaling-stroke;
    }

    #city-army-panel {
        width: 100%;
        max-width: 100%;
        display: none;
    }

    #city-army-panel #job-army {
        width: 100%;
        margin: 0;
    }

    #city-dist-outskirts {
        display: flex;
        position: relative;
        flex-wrap: wrap;
        align-items: flex-start;
        gap: 0.6rem;
        padding: 1.4rem 1.2rem 1.2rem;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/env/outskirts.webp) no-repeat center;
        background-size: cover;
        border-radius: 0.5rem;
        overflow: hidden;
        max-width: 100%;
    }

    #city-dist-outskirts.outskirts-free-resources {
        overflow: visible;
    }

    #city-dist-outskirts .action {
        flex: 0 0 calc(33.333% - 0.6rem);
        margin: 0;
    }

    #city-dist-outskirts .action a.button,
    #city-dist-outskirts .action span.oldTech {
        width: 100%;
        margin: 0;
    }

    #city-dist-outskirts > div:not(.action):not(.resource):not(.outskirts-resource-stack) {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 0;
        margin: 0;
        padding: 0;
    }

    #city-dist-outskirts > .district-toggle {
        position: absolute;
        inset: 0;
        width: 100% !important;
        height: 100% !important;
    }

    #city-dist-outskirts .name {
        position: absolute;
        left: 0.5rem;
        top: 0.4rem;
        margin: 0;
        color: #f5e3a3;
        font-size: 1rem;
        font-weight: 700;
        text-shadow: 0 1px 0 #1a1a1a, 0 2px 0 #101010, 0 3px 4px rgba(0, 0, 0, 0.6), 0 0 6px rgba(0, 0, 0, 0.5);
        z-index: 2;
    }

    #city-dist-outskirts .outskirts-resources {
        position: absolute;
        right: 0.6rem;
        top: 0.35rem;
        z-index: 2;
        display: flex;
    }

    #city-dist-outskirts .outskirts-resources .resources.resources-camp {
        height: auto;
        max-height: none;
        padding: 0.25rem 0.5rem;
        margin: 0;
        padding-right: 0;
        background: rgba(0, 0, 0, 0.45);
        border: solid 0.0625rem rgba(255, 255, 255, 0.08);
        border-radius: 0.4rem;
        width: auto;
        overflow: visible;
        font-size: 0.85rem;
    }

    #city-dist-outskirts .outskirts-resources .resources.resources-camp.vscroll {
        overflow: visible;
        position: static;
        top: auto;
        bottom: auto;
    }

    #city-dist-outskirts .outskirts-resources .resources.resources-camp .resource {
        margin: 0;
    }

    #city-dist-outskirts .outskirts-resources .resources.resources-camp .hide-outskirts-resource {
        display: none;
    }

    #city-dist-outskirts .outskirts-resource-stack {
        flex: 0 0 100%;
        display: flex;
        flex-direction: column;
        gap: 0;
        width: calc(100% - 4.5rem);
        margin-left: 4.5rem;
        margin-top: 0;
    }

    #city-dist-outskirts .outskirts-resource {
        display: flex;
        width: 100%;
        margin: 0;
        background: rgba(0, 0, 0, 0.35);
        border-radius: 0.5rem;
        padding: 0.1rem 0.6rem;
    }

    #city-dist-outskirts .outskirts-resource > div {
        width: 70%;
        display: flex;
        justify-content: space-between;
    }

    #city-dist-outskirts .outskirts-resource > :nth-child(2) {
        text-align: center;
        width: 4%;
    }

    #city-dist-outskirts .outskirts-resource > :nth-child(3) {
        text-align: right;
        width: 26%;
    }

    #city-dist-residential {
        position: relative;
        padding: 2.2rem 1.2rem 1.2rem;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/env/residential-block.webp) no-repeat center;
        background-size: cover;
        border-radius: 0.5rem;
        overflow: hidden;
        max-width: 100%;
    }

    #city-dist-residential > div:not(.action) {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 0;
        margin: 0;
        padding: 0;
    }

    #city-dist-residential .name {
        position: absolute;
        left: 0.5rem;
        top: 0.4rem;
        margin: 0;
        color: #f5e3a3;
        font-size: 1rem;
        font-weight: 700;
        text-shadow: 0 1px 0 #1a1a1a, 0 2px 0 #101010, 0 3px 4px rgba(0, 0, 0, 0.6), 0 0 6px rgba(0, 0, 0, 0.5);
    }

    #city-dist-commercial {
        position: relative;
        padding: 2.2rem 1.2rem 1.2rem;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/env/commercial-district.webp) no-repeat center;
        background-size: cover;
        border-radius: 0.5rem;
        overflow: hidden;
        max-width: 100%;
    }

    #city-dist-commercial > div:not(.action) {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 0;
        margin: 0;
        padding: 0;
    }

    #city-dist-commercial .name {
        position: absolute;
        left: 0.5rem;
        top: 0.4rem;
        margin: 0;
        color: #f5e3a3;
        font-size: 1rem;
        font-weight: 700;
        text-shadow: 0 1px 0 #1a1a1a, 0 2px 0 #101010, 0 3px 4px rgba(0, 0, 0, 0.6), 0 0 6px rgba(0, 0, 0, 0.5);
    }

    #city-dist-science {
        position: relative;
        padding: 2.2rem 1.2rem 1.2rem;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/env/secience-sector.webp) no-repeat center;
        background-size: cover;
        border-radius: 0.5rem;
        overflow: hidden;
        max-width: 100%;
    }

    #city-dist-science > div:not(.action) {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 0;
        margin: 0;
        padding: 0;
    }

    #city-dist-science .name {
        position: absolute;
        left: 0.5rem;
        top: 0.4rem;
        margin: 0;
        color: #f5e3a3;
        font-size: 1rem;
        font-weight: 700;
        text-shadow: 0 1px 0 #1a1a1a, 0 2px 0 #101010, 0 3px 4px rgba(0, 0, 0, 0.6), 0 0 6px rgba(0, 0, 0, 0.5);
    }

    #city-dist-military {
        position: relative;
        padding: 2.2rem 1.2rem 1.2rem;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/env/military-complex.webp) no-repeat center;
        background-size: cover;
        border-radius: 0.5rem;
        overflow: hidden;
        max-width: 100%;
    }

    #city-dist-military > div:not(.action) {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 0;
        margin: 0;
        padding: 0;
    }

    #city-dist-military .name {
        position: absolute;
        left: 0.5rem;
        top: 0.4rem;
        margin: 0;
        color: #f5e3a3;
        font-size: 1rem;
        font-weight: 700;
        text-shadow: 0 1px 0 #1a1a1a, 0 2px 0 #101010, 0 3px 4px rgba(0, 0, 0, 0.6), 0 0 6px rgba(0, 0, 0, 0.5);
    }

    #city-dist-trade {
        position: relative;
        padding: 2.2rem 1.2rem 1.2rem;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/env/trade-district.webp) no-repeat center;
        background-size: cover;
        border-radius: 0.5rem;
        overflow: hidden;
        max-width: 100%;
    }

    #city-dist-trade > div:not(.action) {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 0;
        margin: 0;
        padding: 0;
    }

    #city-dist-trade .name {
        position: absolute;
        left: 0.5rem;
        top: 0.4rem;
        margin: 0;
        color: #f5e3a3;
        font-size: 1rem;
        font-weight: 700;
        text-shadow: 0 1px 0 #1a1a1a, 0 2px 0 #101010, 0 3px 4px rgba(0, 0, 0, 0.6), 0 0 6px rgba(0, 0, 0, 0.5);
    }

    #city-dist-industrial {
        position: relative;
        padding: 2.2rem 1.2rem 1.2rem;
        background: url(/photo/sexual-reproduction/multicellular/poikilohydric/pinguicla/env/industrial-park.webp) no-repeat center;
        background-size: cover;
        border-radius: 0.5rem;
        overflow: hidden;
        max-width: 100%;
    }

    #city-dist-industrial > div:not(.action) {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 0;
        margin: 0;
        padding: 0;
    }

    #city-dist-industrial .name {
        position: absolute;
        left: 0.5rem;
        top: 0.4rem;
        margin: 0;
        color: #f5e3a3;
        font-size: 1rem;
        font-weight: 700;
        text-shadow: 0 1px 0 #1a1a1a, 0 2px 0 #101010, 0 3px 4px rgba(0, 0, 0, 0.6), 0 0 6px rgba(0, 0, 0, 0.5);
    }

    .space:nth-child(2),
    .city:first-child,
    .tech:first-child {
        margin-top: 0;
    }

    .regionControl,
    .regionSupport {
        margin-left: .5rem;
    }

    .space {
        display: flex;
        .syndThreat {
            margin-left: 1rem;
        }
    }
}

.large_log .main .msgQueue {
    font-size: 1rem;
}

.large_all .main {
    .content {
        .action {
            a.button,
            span.oldTech {
                width: 11.75rem;
                margin: .25rem .25rem 0 0;
            }

            span.on {
                right: .25rem;
            }

            div.special {
                top: .25rem;
            }
        }
    }

    .msgQueue {
        font-size: 0.9rem;
    }
}

.graphCreator > div:not(:last-child) {
    margin-bottom: .5rem;
    border-bottom: .0625rem solid;
    padding-bottom: .5rem;
}

.pylon {
    .current {
        width: 5.25rem;
    }
}

.modalBody {
    .gap {
        margin: 0 .25rem .5rem;
    }

    &.max40 {
        max-width: 40rem;
    }

    .wrap {
        max-width: 25.5rem;
        margin: 0 auto;
    }
}

.popper {
    z-index: 100000;

    .craft-elm {
        white-space: nowrap;
    }

    .grad-from-left,
    .grad-from-left-warn,
    .grad-from-right {
        background-clip: text;
        background-size: 100%;
        -webkit-background-clip: text;
        -moz-background-clip: text;
        -webkit-text-fill-color: transparent; 
        -moz-text-fill-color: transparent;
    }
}

.storage-header {
    button {
        font-size: .875rem;
    }

    .crate {
        margin-left: 13rem;
    }

    .container {
        margin-left: 3rem;
    }

    margin-bottom: .25rem;
}

.market-item {
    margin: .125rem 0 0 1rem;
    display: flex;
    cursor: default;

    .res {
        display: inline-flex;
        cursor: default;
        margin-right: .5rem;
        width: 8rem;
    }

    .buy {
        display: inline-flex;
    }

    .sell {
        display: inline-flex;
        margin-left: .5rem;
    }

    .route {
        position: relative;
        bottom: 1px;
    }

    .order {
        .basic-button();
        min-width: 4.5rem;
    }

    .trade {
        margin-left: 1rem;
        min-width: 9.375rem;

        .current {
            width: 3rem;
        }

        .add,
        .sub {
            position: relative;
            top: .0625rem;
            padding: 0 .375rem;
            line-height: 1rem;
        }

        .mass {
            margin-left: 1rem;
        }
    }

    .crtTotal {
        margin-left: 11.5rem;
    }

    .cntTotal {
        margin-left: 2.0625rem;
    }

    .crtTotal,
    .cntTotal {
        span:nth-child(2) {
            display: inline-block;
            width: 6rem;
            text-align: center;
        }
    }

    .tradeTotal {
        margin-left: 23.25rem;
    }

    .tradeTotal.nt {
        margin-left: 11.5rem;
    }
}

.modal .action {
    &:extend(.main .content .action all);
}

.modal .actionSpace {
    .action a.button {
        margin: .25rem;
    }

    padding: .25rem;
    min-width: 38rem;
    border-radius: .5rem;
}

.sentience-selection {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    width: 100%;
    gap: 1.5rem;
}

.sentience-selection .button {
    margin: .25rem;
    background: #0c1c26 no-repeat center;
    background-size: cover;
    background-position: center;
    border: 2px solid #2ecc71;
    box-shadow: 0 0 0 2px rgba(46, 204, 113, 0.35);
    border-radius: 50% !important;
    clip-path: circle(50% at 50% 50%);
    width: 18rem;
    height: 18rem;
    min-width: 18rem;
    min-height: 18rem;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    color: #e7f7ff;
    font-weight: 600;
    text-shadow: 0 0 6px rgba(0, 0, 0, 0.65);
    transform-origin: center;
    transition: transform 0.08s ease, filter 0.08s ease;
    animation: sentience-pulse 2.8s ease-in-out infinite;
    position: relative;
}

.sentience-selection .button:hover,
.sentience-selection .button:focus-visible {
    filter: brightness(1.08);
    transform: scale(1.02);
    animation-play-state: paused;
}

.sentience-selection .button:active {
    transform: scale(0.98);
}

.sentience-selection .sentience-icon {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50% !important;
    clip-path: circle(50% at 50% 50%);
    transition: opacity 0.15s ease;
}

.sentience-selection .sentience-label {
    position: absolute;
    left: 0.6rem;
    right: 0.6rem;
    bottom: 0.6rem;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 0.2rem 0.4rem;
    border-radius: 0.4rem;
    background: rgba(0, 0, 0, 0.5);
    font-size: 0.95rem;
    line-height: 1.2;
    text-align: center;
    color: #f2fff8;
}

@keyframes unlock-progress-fill {
    from {
        width: 0%;
    }
    to {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .sentience-selection {
        gap: 0.75rem;
    }

    .sentience-selection .button {
        width: ~"min(12rem, 82vw)";
        height: ~"min(12rem, 82vw)";
        min-width: 0;
        min-height: 0;
    }

    .sentience-selection .sentience-label {
        display: inline-flex;
    }
}

@media (max-width: 768px) {
    #resources.resources-mobile-hidden {
        display: none !important;
    }
}

@keyframes sentience-pulse {
    0% {
        box-shadow: 0 0 0 2px rgba(46, 204, 113, 0.35), 0 0 0 0 rgba(46, 204, 113, 0.2);
    }
    60% {
        box-shadow: 0 0 0 2px rgba(46, 204, 113, 0.45), 0 0 24px 6px rgba(46, 204, 113, 0.35);
    }
    100% {
        box-shadow: 0 0 0 2px rgba(46, 204, 113, 0.35), 0 0 0 0 rgba(46, 204, 113, 0.2);
    }
}

.evo-step-tooltip-title {
    font-weight: 700;
    margin-bottom: 0.25rem;
}

.evo-step-tooltip-desc + .evo-step-tooltip-effect {
    margin-top: 0.25rem;
}

.modal {
    .modalBody {
        max-height: ~"calc(100vh - 5rem)";
    }
    
    .msgInput {
        .checkbox {
            margin: 0 3rem;
            
            .control-label {
                padding: 0;
            }
        }
    }
    
    .msgInputApply {
        margin-top: 1rem;
    }

    .modal-background {
        background-color: rgba(10,10,10,0);
    }

    .modal-content {
        box-shadow: 0px 0px 1rem black;
        border-radius: 1rem;
    }

    .genus_selection {
        > section {
            display: flex;
            flex-wrap: wrap;
            flex-direction: row;
            justify-content: space-between;
        }
    }
}

.main>div.popper,
body>div.popper,
body .modal>div.popper {
    margin-top: .125rem;
    text-align: center;
    padding: .5rem .75rem;
    max-width: 18rem;
    border-radius: .25rem;
    line-height: 1.3125rem;

    div.aTable {
        columns: 2;

        span {
            display: flex;
        }
    }

    &.breakdown {
        max-width: initial;
    }

    .modal_bd {
        display: table;
        width: 100%;

        :first-child {
            display: table-cell;
            text-align: left;
            padding-right: .5rem;
        }

        :nth-child(2) {
            display: table-cell;
            text-align: right;
        }

        &.sum {
            border-top: .0625rem solid;
        }
    }

    .resBreakdown .parent {
        display: flex;

        div.col {
            padding-left: .5rem;
            margin-left: .5rem;
            border-left: 1px solid;
        }
    }

    >.flair {
        margin-top: .5rem;
        font-size: .75rem;
        text-align: right;
        line-height: .75rem;
    }

    &.flair {
        padding-bottom: .25rem;
    }

    .flexAround {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
    }

    .example {
        text-align: left;
        white-space: pre;
    }

    .pGeoList {
        .pGeo {
            min-width: 49%;
        }
    }
}

.infoBox {
    max-width: 50rem;
    margin-bottom: .5rem;
    margin-right: .5rem;
    padding: .25rem .5rem;

    h2 {
        margin-bottom: .25rem;
        border-bottom: .0625rem solid;
    }

    div {
        margin-bottom: .5rem;
        clear: both;
    }

    .type {
        display: flex;
        justify-content: space-between;

        >span:nth-child(1) {
            display: block;
            text-align: left;
        }

        >span:nth-child(2) {
            display: block;
            text-align: right;
        }
    }

    .desc {
        text-align: left;
    }
    .condense {
        margin: 0;
    }
}

.main>div.popper.wide,
body>div.popper.wide,
body .modal>div.popper.wide {
    max-width: initial;
}

.arpa,
.resTabs {
    ul {
        margin-top: 0;
    }

    .tabs>ul {
        margin-left: 1rem;
    }

    .tabs {
        overflow-x: auto;
    }
}

#mainTabs,
#mainTabs > .tabs,
#mainTabs .tabs {
    width: 100%;
}

#mainTabs > ul,
#mainTabs .tabs > ul {
    width: 100%;
    margin-left: 0;
    padding-left: 0;
    padding-right: 0;
}

#mainTabs.evolution-stage .tabs > ul {
    justify-content: center;
}

#mainTabs .tabs > ul > li.main-tab-evolution > a {
    pointer-events: none;
    cursor: default;
}

#mainTabs > ul > li.main-tab-civil,
#mainTabs > ul > li.main-tab-civil > a,
#mainTabs > ul > li.main-tab-civil > a *,
#mainTabs .tabs > ul > li.main-tab-civil,
#mainTabs .tabs > ul > li.main-tab-civil > a,
#mainTabs .tabs > ul > li.main-tab-civil > a *,
#mainTabs .main-tab-civil,
#mainTabs .main-tab-civil * {
    cursor: default !important;
}

#mainTabs > ul > li.main-tab-civil.is-active > a,
#mainTabs > ul > li.main-tab-civil.is-active > a *,
#mainTabs .tabs > ul > li.main-tab-civil.is-active > a,
#mainTabs .tabs > ul > li.main-tab-civil.is-active > a * {
    pointer-events: none !important;
}

.civ-tier-popover {
    text-align: left;
}

.civ-tier-popover .civ-tier-desc {
    margin-top: 0.35rem;
    padding-top: 0.35rem;
    border-top: 0.0625rem solid rgba(0, 0, 0, 0.2);
}

#mainTabs.evolution-stage .tabs > ul > li.main-tab-civil > a {
    pointer-events: none;
    cursor: default;
}

#civilSplitMain .resTabs .tabs li.is-active,
#civilSplitMain .resTabs .tabs li.is-active > a,
#civilSplitMain .resTabs .tabs li.is-active > a * {
    cursor: default !important;
}

#civilSplitMain .resTabs .tabs li.is-active > a {
    pointer-events: none !important;
}

#civilSplitMain .resTabs,
#civilSplitMain .resTabs > .tabs,
#civilSplitMain .resTabs .tabs {
    width: 100%;
}

#civilSplitMain .resTabs > .tabs > ul,
#civilSplitMain .resTabs .tabs > ul {
    width: 100%;
    margin-left: 0;
}

.modalBox,
.industry {
    padding: 1rem;
    border-radius: 1rem;
    text-align: center;
    min-height: 9.5rem;

    p {
        margin-bottom: .5rem;
    }

    .market-item {
        display: block;
        margin-top: .5rem;
        padding-top: .5rem;
        margin-left: 0;
    }

    .crates {
        .crateHead {
            margin-bottom: .5rem;

            :first-child {
                margin-right: 1rem;
            }

            :last-child {
                margin-left: 1rem;
            }
        }

        button {
            font-size: .875rem;
            margin: 0 .25rem;
            height: 1.8rem;
        }
    }

    .divide {
        margin-top: .5rem;
        padding-top: .5rem;
    }

    .current {
        position: relative;
        bottom: .0625rem;
    }

    .smelting {
        margin: .5rem 0 .75rem;
        padding-top: .5rem;

        button {
            font-size: .875rem;
            margin: 0 .25rem;
            height: 1.8rem;
        }

        .button.steel {
            white-space: pre;
        }
    }

    .factory {
        :first-child {
            display: inline-block;
            width: 8rem;
            text-align: left;
        }
    }

    .crateModal {
        margin-bottom: 1.25rem;
    }

    .flexAround {
        margin-top: 0.25rem;
        display: flex;
        justify-content: space-evenly;
    }

    .flexWrap {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-evenly;
        > div {
            margin-bottom: .25rem;
        }
    }

    .fanatic section {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-evenly;
    }
}

button[disabled] {
    pointer-events: none;
    cursor: not-allowed;
}

span.inline {
    display: inline-block;
}

.modalBox {
    .tradeOffer();

    .market-item {
        display: flex;
        justify-content: center;
    }

    .trade-header {
        border-top: 0;
        padding-top: 0;
    }
}

.industryTab,
.psychicTab,
.supernaturalTab  {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
}

.industry {
    margin-bottom: .5rem;
    border-bottom: .0625rem solid;
    border-top: .0625rem solid;
    width: 27.5rem;

    .header {
        margin-bottom: .25rem;
        padding-bottom: .25rem;
        width: 100%;
    }

    .gap {
        margin-top: .5rem;
        width: 100%;
    }
}

.topBar,
.promoBar {
    display: inline-flex;
    height: 1.2rem;
    line-height: 1.2rem;
    width: 100%;
    position: fixed;
}

.topBar {
    top: 0;
    z-index: 10;

    .calendar {
        margin: 0 auto;

        .temp {
            margin-left: 0.125rem;
            font-size: 0.875rem;
        }

        .weather {
            font-size: 0.8125rem;
        }

        .moon {
            font-size: 0.875rem;
            color: #fff;
        }

        .wi-thermometer-exterior {
            color: #00d6b2;
        }

        .wi-thermometer {
            color: #f10202;
        }

        .wi-day-sunny,
        .wi-day-windy {
            color: #d0ff00;
        }

        .wi-cloud,
        .wi-cloudy-gusts {
            color: #9ea387;
        }

        .wi-rain,
        .wi-storm-showers {
            color: #00d6b2;
            position: relative;
            bottom: 0.125rem;
        }

        .wi-snow,
        .wi-snow-wind {
            color: #fff;
            position: relative;
            bottom: 0.125rem;
        }

        .atime {
            margin-left: 1rem;
        }

        .infoTimer {
            margin-right: 1rem;
        }

        .astro {
            font-size: 0.8125rem;
            margin-right: .25rem;
        }
    }

    .planetWrap {
        margin-left: 1rem;

        .universe,
        .simulation,
        .pet {
            border-left: 1px solid;
            margin-left: 0.75rem;
            padding-left: 0.75rem;
        }

        .pet {
            cursor: pointer;
        }
    }

    .planet.planet-image {
        display: inline-block;
        width: 2rem;
        height: 2rem;
        background: url('/photo/environment/planet.webp') no-repeat center;
        background-size: cover;
        border-radius: 50%;
        vertical-align: middle;
    }

    .planet.planet-image.planet-in-calendar {
        margin-right: .5rem;
        position: relative;
        top: -.35rem;
    }

    .flair {
        display: inline-block;
        text-align: left;

        svg {
            position: relative;
            top: .125rem;
            left: .25rem;
        }
    }

    .pet {
        .black {
            fill: #000000;
            filter: drop-shadow(0px 0px 2px #fff);
        }
        .black.stripe {
            fill: url(#PetGradient);
            #PetGradient {
                .stop1 { stop-color: #000; }
                .stop2 { stop-color: #4e4e4e; }
            }
        }
        .black.patched {
            fill: url(#PetGradient);
            #PetGradient {
                .stop1 { stop-color: #000; }
                .stop2 { stop-color: #424242; }
            }
        }
        .orange {
            fill: #e25f08;
            filter: drop-shadow(0px 0px 2px #000);
        }
        .orange.stripe {
            fill: url(#PetGradient);
            #PetGradient {
                .stop1 { stop-color: #e25f08; }
                .stop2 { stop-color: #ccb9ad; }
            }
        }
        .gray {
            fill: #575757;
            filter: drop-shadow(0px 0px 2px #000);
        }
        .gray.stripe {
            fill: url(#PetGradient);
            #PetGradient {
                .stop1 { stop-color: #575757; }
                .stop2 { stop-color: #202020; }
            }
        }
        .gray.patched {
            fill: url(#PetGradient);
            #PetGradient {
                .stop1 { stop-color: #575757; }
                .stop2 { stop-color: #665237; }
            }
        }
        .white {
            fill: #f0efef;
            filter: drop-shadow(0px 0px 2px #000);
        }
        .white.stripe {
            fill: url(#PetGradient);
            #PetGradient {
                .stop1 { stop-color: #f0efef; }
                .stop2 { stop-color: #f5dec4; }
            }
        }
        .white.patched {
            fill: url(#PetGradient);
            #PetGradient {
                .stop1 { stop-color: #f0efef; }
                .stop2 { stop-color: #b8ab9b; }
            }
        }
        .cream {
            fill: #bd8754;
            filter: drop-shadow(0px 0px 2px #000);
        }
        .cream.stripe {
            fill: url(#PetGradient);
            #PetGradient {
                .stop1 { stop-color: #bd8754; }
                .stop2 { stop-color: #f5dec4; }
            }
        }
        .brown {
            fill: #996f48;
            filter: drop-shadow(0px 0px 2px #000);
        }
        .brown.patched {
            fill: url(#PetGradient);
            #PetGradient {
                .stop1 { stop-color: #996f48; }
                .stop2 { stop-color: #af9a85; }
            }
        }
    }

    .version {
        margin-right: 1rem;
    }
}

.promoBar {
    bottom: 0;

    .left {
        display: inline-block;
        width: 15rem;
        margin-left: .25rem;
    }

    .right {
        position: absolute;
        display: inline-block;
        text-align: right;
        margin-right: 1rem;
        right: 0;

        span {
            margin: 0 .5rem;
        }

        .external-links {
            li {
                display: inline-block;
            }

            li+li:before {
                content: ' | ';
            }
        }
    }
}

.arpaProject {
    display: inline-block;
    border: solid .0625rem;
    padding: .5rem;
    width: 20rem;
    margin: 0 1rem 1rem 0;

    .head {
        margin-bottom: .25rem;
        padding-bottom: .5rem;
        border-bottom: solid .0625rem;

        >span {
            display: inline-block;
            width: 40%;
        }

        >span:first-child {
            display: inline-block;
            width: 60%;
        }

        .rank {
            text-align: right;
        }

        .pbar {
            position: relative;
            margin-top: .5rem;

            .progress {
                margin-bottom: 0;
            }

            .progress-value {
                position: absolute;
                display: block;
                top: -.1875rem;
                left: 49%;
            }
        }
    }

    .buy {
        text-align: center;

        .button {
            height: 1.5rem;
            width: 19%;
            line-height: .75rem;
        }

        :first-child {
            width: 24%;
        }
    }
}

.ShipYardTab {
    margin-left: 1rem;

    .button {
        height: 2rem;
    }

    .stats {
        display: flex;
        > div {
            margin-left: .5rem;
        }
    }

    .registry {
        line-height: 1.25rem;
        .nameplate {
            display: inline-block;
            width: 8rem;
            height: 1.25rem;
            input {
                height: 1.25rem;
            }
        }
    }
    
    #shipYardCosts {
        margin-left: .5rem;
    }

    .shipBayOptions {
        .dropdown  {
            margin-left: .5rem;
            margin-top: .25rem;
        }
    }

    #shipList {
        margin-top: .25rem;
        .shipRow {
            display: grid;
            padding-top: .25rem;
            margin-top: .25rem;
            margin-left: .5rem;
            border-top: 1px solid;
            grid-template-columns: auto 10rem;

            .name {
                display: inline-block;
                min-width: 5rem;
            }

            .row1,
            .row2,
            .row3 {
                grid-column-start: 1;
            }

            .location {
                grid-column-start: 2;
                grid-row-start: 1;
                grid-row-end: 3;
            }

            .pad {
                margin: 0 .5rem 0 0;
            }
        }

        .compact {
            button {
                height: 1rem;
            }
        }
    }

    .assemble {
        margin: 1rem 0 0 .5rem;
        line-height: 2rem;
        > span {
            margin-left: 1rem;
            > label.checkbox {
                margin-right: 0;
                top: .25rem;
            }
        }
    }

    .solarMap {
        float: right;
        margin-right: 1rem;
    }
}

.genome {
    margin-bottom: 1rem;

    .progress {
        margin-top: .25rem;
        margin-bottom: .5rem;
    }

    button {
        margin-left: .5rem;
    }

    button.seq {
        margin-left: 0;
    }
}

.geneticTraits {
    .trait.major {
        margin-top: .5rem;
    }

    .trait {
        .gene {
            min-width: 5rem;
            padding-bottom: .125rem;
        }
    }
    .trait.indent {
        margin-left: 4.5rem;
    }

    .traitListing {
        display: flex;
        flex-wrap: wrap;
        > .traitRow {
            width: 25rem;
        }
    }

    .traitRow {
        > span {
            vertical-align: middle;
        }

        .basic-button {
            height: 100%;
        }
    }
}

.main>div.popper.wide.w22,
body>div.popper.wide.w22,
body .modal>div.popper.wide.w22 {
    max-width: 22rem;
}

.main>div.popper.wide.w25,
body>div.popper.wide.w25,
body .modal>div.popper.wide.w25 {
    max-width: 25rem;
}

.main>div.popper.wide.w30,
body>div.popper.wide.w30,
body .modal>div.popper.wide.w30 {
    max-width: 30rem;
}

#trick6 {
    width: 4rem;
    text-align: center;
}

body.nuke {
    color: #000;
    transition: color 2s, text-shadow 3s;
    text-shadow: 0px -2px 4px #fff, 0px -2px 10px #FF3, 0px -10px 20px #F90, 0px -20px 40px #C33;
}

div.nuke,
div.mininuke {
    position: fixed;
    width: 100%;
    height: 100%;
    z-index: 10;
    top: 0;
    left: 0;
    transition: all 2s;
    opacity: 0;

    &.burn {
        opacity: 1;
    }

    &.burn::before {
        content: "";
        display: block;
        width: 10px;
        height: 10px;
        position: absolute;
        top: 60%;
        left: 30%;
        background: #000;
        border-radius: 50%;
    }

    &.burn.b::before {
        transition: width 3s, height 3s, top 3s, left 3s;
        background: #000;
        width: 180%;
        height: 180%;
        top: -30%;
        left: -30%;
        box-shadow: 0px -2px 4px #fff, 0px -2px 10px #FF3, 0px -10px 20px #F90, 0px -20px 40px #C33,
            inset 0px -20px 40px #fff, inset 0px -20px 100px #FF3, inset 0px -40px 200px #F90, inset 0px -80px 400px #C33;
    }
}

div.nuke {
    &.burn {
        background: #000;
    }
}

div.mininuke {
    position: absolute;
    overflow: hidden;

    &.burn.b::before {
        transition: width 2s, height 2s, top 2s, left 2s;
    }

    &.burn.c::before {
        visibility: hidden;
        opacity: 0;
        transition: visibility 0s 2s, opacity 2s linear;
    }
}

div.bigbang {
    position: fixed;
    width: 100%;
    height: 100%;
    z-index: 10;
    top: 0;
    left: 0;
    transition: all 1s;
    opacity: 0;

    &.burn {
        opacity: 1;
    }

    &.burn::before {
        content: "";
        display: block;
        width: 10px;
        height: 10px;
        position: absolute;
        top: 50%;
        left: 50%;
        background: #fff;
        border-radius: 50%;
    }

    &.burn.b::before {
        transition: width 2s, height 2s, top 2s, left 2s;
        background: #fff;
        width: 180%;
        height: 180%;
        top: -30%;
        left: -30%;
        box-shadow: 0px -2px 4px #fff, 0px -2px 10px #FF3, 0px -10px 20px #F90, 0px -20px 40px #C33,
            inset 0px -20px 40px #fff, inset 0px -20px 100px #FF3, inset 0px -40px 200px #F90, inset 0px -80px 400px #C33;
    }

    &.burn.c::before {
        transition: width 2s, height 2s, top 2s, left 2s, background-color 2s;
        background: #000;
        width: 180%;
        height: 180%;
        top: -30%;
        left: -30%;
        box-shadow: 0px -2px 4px #000, 0px -2px 10px #000, 0px -10px 20px #000, 0px -20px 40px #000,
            inset 0px -20px 40px #000, inset 0px -20px 100px #000, inset 0px -40px 200px #000, inset 0px -80px 400px #000;
    }
}

.earthquake {
    animation: 3.8s shake infinite alternate;
}

@keyframes shake {
    0% {
        transform: skewX(-1deg);
    }

    5% {
        transform: skewX(1deg);
    }

    10% {
        transform: skewX(-1deg);
    }

    15% {
        transform: skewX(1deg);
    }

    20% {
        transform: skewX(0deg);
    }

    100% {
        transform: skewX(0deg);
    }

    10%,
    90% {
        transform: translate3d(-1px, 0, 0);
    }

    20%,
    80% {
        transform: translate3d(2px, 0, 0);
    }

    30%,
    50%,
    70% {
        transform: translate3d(-4px, 0, 0);
    }

    40%,
    60% {
        transform: translate3d(4px, 0, 0);
    }
}

.celestialLab {

    .fields {
        margin-top: .5rem;

        .name {
            display: inline-block;
            width: 10rem;
            margin-right: 1rem;
        }

        .entity {
            display: inline-block;
            width: 20rem;
            margin-right: 1rem;
        }

        .control {
            margin: .25rem 0;
        }

        .help {
            margin-top: 0;
            position: absolute;
            right: 0.25rem;
            top: -1rem;
        }
    }

    .sequence {
        display: flex;
        margin-top: .5rem;

        .genus_selection {
            width: 10rem;

            section {
                margin-top: .5rem;
            }

            button {
                padding: 1rem 0.5rem;
            }
        }

        .trait_selection {
            margin-top: .5rem;
            display: flex;
            flex-wrap: wrap;
            >div {
                width: 11.5rem;
            }
        }
        .trait_selection.summary {
            >div {
                width: 23rem;
            }

            .field {
                display: flex;
                justify-content: space-between;
                padding-right: .5rem;

                .rc {
                    display: inline-block;
                    min-width: 7rem;
                    text-align: center;
                }
            }
        }

        .planet_selection {
            margin-left: 2rem;
            section {
                margin-top: .5rem;
                >div {
                    width: 11.5rem;
                }
            }
        }

        .res_selection {
            margin-left: 2rem;
            section {
                margin-top: .5rem;
                >div {
                    display: flex;
                    justify-content: space-between;
                    >div:first-child {
                        margin-right: 0.25rem; 
                    }
                }
            }
        }

        >div {
            .field:not(:last-child) {
                margin-bottom: 0;
            }
        }
    }

    .buttons {
        display: flex;
        justify-content: space-evenly;
    }

    .create {
        margin-top: 1rem;
        text-align: center;
    }

    .genus, .resetLab {
        margin-bottom: 0.75rem;
        text-align: center;
        > button {
            margin-top: 0.25rem;
            width: 8.5rem;
        }
    }
}

.listqueuestyle.bldQueue,
.listqueuestyle.bldQueue.right,
.listqueuestyle.resQueue,
.numberedlistqueuestyle.bldQueue,
.numberedlistqueuestyle.bldQueue.right,
.numberedlistqueuestyle.resQueue,
.bulletlistqueuestyle.bldQueue,
.bulletlistqueuestyle.bldQueue.right,
.bulletlistqueuestyle.resQueue {

    li {
        margin: 0.25rem 0;
        display: list-item;
    }

    li:not(:last-child) .queued:after {
        content: ""
    }
}

.numberedlistqueuestyle.bldQueue,
.numberedlistqueuestyle.bldQueue.right,
.numberedlistqueuestyle.resQueue {
    li {
        list-style-type: numeric;
        list-style-position: inside;
    }
}

.bulletlistqueuestyle.bldQueue,
.bulletlistqueuestyle.bldQueue.right,
.bulletlistqueuestyle.resQueue {
    li {
        list-style-type: disc;
        list-style-position: inside;
    }
}

.sticky {
    position: sticky;
    top: 1rem;
    bottom: 0;
    height: 100vh;
    overflow-y: auto;
    overflow-x: hidden;
    scrollbar-width: thin;
}

.vscroll {
    overflow-x: hidden;
    overflow-y: auto;
    scrollbar-width: thin;
    top: 1rem;
    bottom: 0;
}

.hscroll {
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
    scrollbar-width: thin;
}

#evolution {
    height: ~"calc(100vh - 6rem)";
    overflow-y: auto;
    overflow-x: hidden;
    scrollbar-width: none;
    -ms-overflow-style: none;

    &::-webkit-scrollbar {
        width: 0;
        height: 0;
    }
}

#evolution .evolution-divider {
    display: block;
    width: 100%;
    height: 0;
    border-top: 0.125rem solid #d4af37;
    margin: 0.75rem 0 0.5rem;
    opacity: 0.9;
}

.resTabs>section,
.resTabs>.tabs,
.bldQueue {
    scrollbar-width: thin;
}

.civicTabs > .tabs {
    display: none;
}

.military-tab-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    border-radius: 999px;
    background: #f5c542;
    border: solid .0625rem #f5c542;
    color: #1a1a1a;
    box-shadow: 0 0 .4rem rgba(245, 197, 66, 0.55);
}

.military-tab-button svg {
    width: 1.2rem;
    height: 1.2rem;
}

.tabs a:hover .military-tab-button {
    background: #ffd45c;
    border-color: #ffd45c;
}

.researchTabs > .tabs > ul {
    flex-direction: column;
    align-items: flex-start;
}

.researchTabs > .tabs > ul > li {
    margin-right: 0;
}

.researchTabs > .tabs {
    display: none;
}

.researchTabs > .tab-content > .tab-item {
    display: block !important;
    opacity: 1;
}

.researchTabs > .tab-content > .tab-item + .tab-item {
    margin-top: 1rem;
}

.modal .modal-content {
    width: initial;
    min-width: 42rem;

    .fuels {
        margin-top: .5rem;
    }

    .avail {
        span {
            margin: 0 2.5rem 0 2.125rem;
        }
    }
}

.popper {
    pointer-events: none;
    .touchButton {
        pointer-events: all;
        height: 1.25rem;
        margin-bottom: .25rem;
    }

    .soldierEvaluation {
        > div {
            display: flex;
            justify-content: space-between;
            :first-child {
                margin-right: 1rem;
            }
        }
        > div.head {
            display: block;
            text-align: center;
        }
    }
}
#powerStatus { white-space: nowrap; }

.pyro > .before, .pyro > .after {
    position: absolute;
    display: block;
    width: 5px;
    height: 5px;
    border-radius: 50%;
    box-shadow: 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff;
    -moz-animation: 1s bang ease-out infinite backwards, 1s gravity ease-in infinite backwards, 5s position linear infinite backwards;
    -webkit-animation: 1s bang ease-out infinite backwards, 1s gravity ease-in infinite backwards, 5s position linear infinite backwards;
    -o-animation: 1s bang ease-out infinite backwards, 1s gravity ease-in infinite backwards, 5s position linear infinite backwards;
    -ms-animation: 1s bang ease-out infinite backwards, 1s gravity ease-in infinite backwards, 5s position linear infinite backwards;
    animation: 1s bang ease-out infinite backwards, 1s gravity ease-in infinite backwards, 5s position linear infinite backwards;
}
  
.pyro > .after {
    -moz-animation-delay: 1.25s, 1.25s, 1.25s;
    -webkit-animation-delay: 1.25s, 1.25s, 1.25s;
    -o-animation-delay: 1.25s, 1.25s, 1.25s;
    -ms-animation-delay: 1.25s, 1.25s, 1.25s;
    animation-delay: 1.25s, 1.25s, 1.25s;
    -moz-animation-duration: 1.25s, 1.25s, 6.25s;
    -webkit-animation-duration: 1.25s, 1.25s, 6.25s;
    -o-animation-duration: 1.25s, 1.25s, 6.25s;
    -ms-animation-duration: 1.25s, 1.25s, 6.25s;
    animation-duration: 1.25s, 1.25s, 6.25s;
}
  
@keyframes bang {
    to {
      box-shadow: -154px -131.6666666667px #00ffcc, -243px -325.6666666667px #ff0d00, 71px -294.6666666667px #77ff00, 154px 7.3333333333px #00ff73, 159px 65.3333333333px #ff00f7, 191px -207.6666666667px #ffd000, 123px -232.6666666667px #0059ff, -96px 18.3333333333px #2600ff, 93px 76.3333333333px #00eaff, -94px -388.6666666667px #00ff59, -92px -107.6666666667px #ff8400, -7px -20.6666666667px #3c00ff, 37px -197.6666666667px #ea00ff, 249px -148.6666666667px #ff0022, -112px -249.6666666667px #ff0040, -191px -374.6666666667px #ff7300, 249px -12.6666666667px #3300ff, -238px -366.6666666667px #00fffb, -76px -186.6666666667px #00ffe6, 242px 60.3333333333px #00d5ff, -69px -217.6666666667px #0095ff, 222px -155.6666666667px #0037ff, 164px -410.6666666667px #ff004d, -228px 2.3333333333px #ff9d00, -201px -352.6666666667px #ff00dd, 75px -378.6666666667px #00ff6a, -141px -375.6666666667px #ff0077, -75px -362.6666666667px #8000ff, -162px -287.6666666667px #00ff88, -152px -260.6666666667px #00b3ff, 180px -205.6666666667px #005eff, -110px -16.6666666667px #ff00d5, -128px -298.6666666667px #00ffc4, 141px -197.6666666667px #00f7ff, 73px -109.6666666667px #ff6600, 164px -347.6666666667px #00c8ff, -178px -307.6666666667px #0026ff, 133px 0.3333333333px #bbff00, 13px 37.3333333333px #7bff00, -168px -198.6666666667px #00ddff, -155px -70.6666666667px #8800ff, 167px -111.6666666667px #ffc800, 98px -353.6666666667px #00fffb, 65px -235.6666666667px #ff0059, 186px -122.6666666667px #ff0009, -124px -385.6666666667px #ff007b, 6px -251.6666666667px #ff00bf, 66px -309.6666666667px #0dff00, 169px -119.6666666667px #ff4800, -232px -137.6666666667px #5eff00, 171px -173.6666666667px #ff0055;
    }
}
@keyframes gravity {
    to {
        transform: translateY(200px);
        -moz-transform: translateY(200px);
        -webkit-transform: translateY(200px);
        -o-transform: translateY(200px);
        -ms-transform: translateY(200px);
        opacity: 0;
    }
}
@keyframes position {
    0%, 19.9% {
        margin-top: 10%;
        margin-left: 40%;
    }
    20%, 39.9% {
        margin-top: 40%;
        margin-left: 30%;
    }
    40%, 59.9% {
        margin-top: 20%;
        margin-left: 70%;
    }
    60%, 79.9% {
        margin-top: 30%;
        margin-left: 20%;
    }
    80%, 99.9% {
        margin-top: 30%;
        margin-left: 80%;
    }
}

.noise {
    position: absolute;
    top: -500px;
    right: -500px;
    bottom: -500px;
    left: -500px;
    background: transparent url(/lib/noise.png) 0 0;
    background-size: 320px 320px;
    opacity: .35;
    animation: noise 1s steps(8,end) infinite both;
}

.noise-wrapper {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    opacity: 1;
    overflow: hidden;
    z-index: 10;
    
    &:after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: radial-gradient(ellipse at center, rgba(0,0,0,0) 0%,rgba(0,0,0,0.75) 100%);
    }
}

@keyframes noise {
    0% {
        transform: translateX(0px,0px);
    }
    10% {
        transform: translate(-100px, 100px);
    }
    20% {
        transform: translate(150px, -100px);
    }
    30% {
        transform: translate(-100px,100px);
    }
    40% {
        transform: translate(100px, -150px);
    }
    50% {
        transform: translate(-100px, 200px);
    }
    60% {
        transform: translate(-200px, -100px);
    }
    70% {
        transform: translateY(50px, 100px);
    }
    80% {
        transform: translate(100px, -150px);
    }
    90% {
        transform: translate(0px, 200px);
    }
    100% {
        transform: translate(-100px, 100px);
    }
}

.signal-lost-top {
    width: 100%;
    height: 0%;
    opacity: 0.9;
    background: black;
    position: absolute;
    top: 0;
    z-index: 100;
}

.signal-lost-bottom {
    width: 100%;
    height: 0%;
    opacity: 0.9;
    background: black;
    position: absolute;
    bottom: 0;
    z-index: 100;
}

.refresh {
    position: relative;
    display: inline-block;
    height: 1rem;
    width: 1rem;
    font-size: 1rem;
    cursor: pointer;
    margin-left: .5rem;
    top: .2rem;
}

.font-overlay {
    z-index: 999;
    position: absolute;
    top: 1rem;
}

#tech {
    display: grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap: 0.5rem;
    align-items: start;
    justify-items: center;
}

#tech > div:not(.action) {
    grid-column: 1 / -1;
}

#tech > .action {
    margin: 0;
    width: 100%;
    max-width: 5.5rem;
    aspect-ratio: 1 / 1;
    display: flex;
    justify-content: center;
    align-items: center;
}

#tech > .action a.button,
#tech > .action .oldTech {
    margin: 0;
    width: 100%;
    height: 100%;
}

#tech > .action a.button {
    border-radius: 50%;
}

#techCompleted .tech {
    display: grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap: 0.5rem;
    align-items: start;
    justify-items: center;
}

#techCompleted .tech > div:not(.action) {
    grid-column: 1 / -1;
}

#techCompleted .tech > .action {
    margin: 0;
    width: 100%;
    max-width: 5.5rem;
    aspect-ratio: 1 / 1;
    display: flex;
    justify-content: center;
    align-items: center;
}

#techCompleted .tech > .action .oldTech {
    margin: 0;
    width: 100%;
    height: 100%;
}

#government .govType {
    border-top: .0625rem solid rgba(255, 255, 255, 0.25);
    padding-top: .25rem;
    margin-top: .25rem;
}

#militaryFloatingPanel {
    position: relative;
}

#militaryFloatingPanel.military-floating {
    position: fixed;
    left: 1rem;
    top: 6rem;
    width: ~"min(56rem, 95vw)";
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    padding: .5rem .6rem .6rem;
    border-radius: .5rem;
    background: #141414;
    border: solid .0625rem rgba(255, 255, 255, 0.18);
    overflow: hidden;
    z-index: 100001;
    pointer-events: auto;
}

#militaryFloatingHeader {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: .5rem;
    padding: .35rem .5rem;
    margin: -0.5rem -0.6rem .5rem;
    background: #1b1b1b;
    border-bottom: solid .0625rem rgba(255, 255, 255, 0.18);
    cursor: move;
    user-select: none;
    touch-action: none;
}

#militaryFloatingPanel.military-floating.is-dragging {
    opacity: 0.95;
    cursor: move;
}

#militaryFloatingContent {
    flex: 1 1 auto;
    min-height: 0;
    overflow-y: auto;
    overflow-x: hidden;
}

#governmentFloatingPanel {
    position: relative;
    width: 100%;
    max-width: 100%;
}

#governmentFloatingPanel.government-floating {
    position: fixed;
    left: .5rem;
    top: 6.5rem;
    width: ~"min(30rem, 95vw)";
    max-width: ~"min(30rem, 95vw)";
    max-height: 70vh;
    padding: .5rem .6rem;
    border-radius: .4rem;
    background: rgba(0, 0, 0, 0.45);
    border: solid .0625rem rgba(255, 255, 255, 0.08);
    overflow-y: auto;
    z-index: 100001;
}

#governmentFloatingPanel.government-floating.is-dragging {
    cursor: move;
    opacity: 0.95;
}

#governmentFloatingPanel.government-floating #government {
    margin-top: 0;
}

#governmentFloatingHeader {
    display: flex;
    align-items: center;
    gap: .5rem;
    padding: .35rem .5rem;
    margin: -0.5rem -0.6rem .35rem;
    background: rgba(0, 0, 0, 0.55);
    border-bottom: solid .0625rem rgba(255, 255, 255, 0.08);
    cursor: move;
    user-select: none;
    touch-action: none;
    position: sticky;
    top: 0;
    z-index: 1;
}
